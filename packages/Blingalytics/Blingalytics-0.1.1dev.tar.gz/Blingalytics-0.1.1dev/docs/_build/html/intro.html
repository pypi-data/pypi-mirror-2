
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sweet walkthrough &mdash; blingalytics v0.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="blingalytics v0.1 documentation" href="index.html" />
    <link rel="next" title="Creating and using reports" href="reports.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reports.html" title="Creating and using reports"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">blingalytics v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="sweet-walkthrough">
<h1>Sweet walkthrough<a class="headerlink" href="#sweet-walkthrough" title="Permalink to this headline">¶</a></h1>
<p>This intro should get you up and running with a basic Blingalytics
installation in just a few minutes. Once you&#8217;re done, you can check out the
documentation for <a class="reference internal" href="sources.html"><em>Data Sources</em></a> and <a class="reference internal" href="caches.html"><em>Cache stores</em></a> to contemplate your options
for snappier infrastructure.</p>
<p>If you haven&#8217;t done so yet, you&#8217;ll need to install the <tt class="docutils literal"><span class="pre">blingalytics</span></tt>
package and requirements before beginning. See <a class="reference internal" href="install.html"><em>Installation</em></a> for details.</p>
<div class="section" id="one-define-a-report">
<h2>One: define a report<a class="headerlink" href="#one-define-a-report" title="Permalink to this headline">¶</a></h2>
<p>With Blingalytics, you use a &#8220;report&#8221; definition to describe precisely what
data you want to look at and how you want to slice it. In a report definition,
you&#8217;re only required to do two things:</p>
<ul class="simple">
<li>List the output columns and where they should get their data</li>
<li>Define the key range for the report (explained below)</li>
</ul>
<div class="section" id="baby-s-first-report">
<h3>Baby&#8217;s first report<a class="headerlink" href="#baby-s-first-report" title="Permalink to this headline">¶</a></h3>
<p>So to start, let&#8217;s put together a completely useless simplest-case report:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">blingalytics</span> <span class="kn">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">formats</span>
<span class="kn">from</span> <span class="nn">blingalytics.sources</span> <span class="kn">import</span> <span class="n">key_range</span><span class="p">,</span> <span class="n">static</span>

<span class="k">class</span> <span class="nc">LameReport</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">Report</span><span class="p">):</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;lame&#39;</span><span class="p">,</span> <span class="n">key_range</span><span class="o">.</span><span class="n">SourceKeyRange</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;lame&#39;</span><span class="p">,</span> <span class="n">static</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">formats</span><span class="o">.</span><span class="n">Integer</span><span class="p">)),</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>So what does this report do? It provides one output column, whose value will
always be <tt class="docutils literal"><span class="pre">5</span></tt>. However, that&#8217;s not even the most useless property of this
report, as this report will actually return zero rows. This is why a report&#8217;s
keys matter.</p>
</div>
<div class="section" id="key-concept">
<h3>Key concept<a class="headerlink" href="#key-concept" title="Permalink to this headline">¶</a></h3>
<p>The keys for a report determine what rows will be in the output. If your
website sells doodads, you might want to see how many doodads you sell per
day. In this case, the report keys would be the range of days you report on so
that you get one row per day. If, on the other hand, you want to see how many
doodads each user has bought, you would want one row per user. So the user ID
is your report key, and the range would be all your users.</p>
<p>To specify the key range for your report, you set the keys attribute of your
report class to a two-tuple. The first item is the label of your key column,
and the second item is the type of key range. In our example, the
<tt class="xref py py-class docutils literal"><span class="pre">sources.SourceKeyRange</span></tt> tells
the report to only include rows returned by the source data. Other key ranges,
such as a range of days, can be used to ensure that a row is returned for each
key, even if there is no source data.</p>
<p>For advanced use cases, you can even have compound keys. For example, you
could have a row per user per day. See <a class="reference internal" href="reports.html"><em>Creating and using reports</em></a> for more.</p>
</div>
<div class="section" id="build-your-columns">
<h3>Build your columns<a class="headerlink" href="#build-your-columns" title="Permalink to this headline">¶</a></h3>
<p>Columns are defined in a report as a list of two-tuples. Each two-tuple
represents a column, in order, by defining a label and its data source. The
label should be unique among the columns, and is used by keys and other
options to reference that column. The data source defines how that column&#8217;s
data should be computed, and is covered in more detail in <a class="reference internal" href="sources.html"><em>Data Sources</em></a>.</p>
</div>
<div class="section" id="a-slightly-realer-report">
<h3>A slightly realer report<a class="headerlink" href="#a-slightly-realer-report" title="Permalink to this headline">¶</a></h3>
<p>Now that we know a bit more about how this works, let&#8217;s define a report that
actually does something (to be fair, it&#8217;s still pretty useless, but we&#8217;re
getting closer):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">blingalytics</span> <span class="kn">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">formats</span>
<span class="kn">from</span> <span class="nn">blingalytics.sources</span> <span class="kn">import</span> <span class="n">derived</span><span class="p">,</span> <span class="n">key_range</span><span class="p">,</span> <span class="n">static</span>

<span class="k">class</span> <span class="nc">RealerReport</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">Report</span><span class="p">):</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;prime&#39;</span><span class="p">,</span> <span class="n">key_range</span><span class="o">.</span><span class="n">IterableKeyRange</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">]))</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;prime&#39;</span><span class="p">,</span> <span class="n">key_range</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="n">formats</span><span class="o">.</span><span class="n">Integer</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;squared&#39;</span><span class="p">,</span> <span class="n">derived</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;prime&#39;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">formats</span><span class="o">.</span><span class="n">Integer</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;note&#39;</span><span class="p">,</span> <span class="n">static</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="s">&#39;Useful data coming soon...&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">formats</span><span class="o">.</span><span class="n">String</span><span class="p">)),</span>
    <span class="p">]</span>
    <span class="n">default_sort</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;prime&#39;</span><span class="p">,</span> <span class="s">&#39;asc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>So now we&#8217;ve got a report with three columns: prime is one of the prime
numbers from the key range; note is simply a static string value; and squared
is the square of the prime number. OK, time to run it!</p>
</div>
</div>
<div class="section" id="two-run-the-report">
<h2>Two: run the report<a class="headerlink" href="#two-run-the-report" title="Permalink to this headline">¶</a></h2>
<p>Once you&#8217;ve defined a report, such as <tt class="docutils literal"><span class="pre">RealerReport</span></tt>, you can instantiate
the report and tell it where to cache the data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">blingalytics.caches.local_cache</span> <span class="kn">import</span> <span class="n">LocalCache</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">RealerReport</span><span class="p">(</span><span class="n">LocalCache</span><span class="p">())</span>
</pre></div>
</div>
<p>Once you have a report instance, you can run the report:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">report</span><span class="o">.</span><span class="n">run_report</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="retrieving-report-rows">
<h3>Retrieving report rows<a class="headerlink" href="#retrieving-report-rows" title="Permalink to this headline">¶</a></h3>
<p>Now that the report is cached, you can retrieve the data with limits, offsets,
column sorting, and so on. But in the simplest case, you can just get all the
rows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rows</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">report_rows</span><span class="p">()</span>
<span class="c"># rows = [</span>
<span class="c">#    [1, &#39;2&#39;, &#39;4&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [2, &#39;3&#39;, &#39;9&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [3, &#39;5&#39;, &#39;25&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [4, &#39;7&#39;, &#39;49&#39;, &#39;Useful data coming soon...&#39;]]</span>
<span class="c">#    [5, &#39;11&#39;, &#39;121&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [6, &#39;13&#39;, &#39;169&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [7, &#39;17&#39;, &#39;289&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c"># ]</span>
</pre></div>
</div>
<p>Let&#8217;s try sorting and limiting the data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rows</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">report_rows</span><span class="p">(</span><span class="n">sort</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;squared&#39;</span><span class="p">,</span> <span class="s">&#39;asc&#39;</span><span class="p">),</span> <span class="n">limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c"># rows = [</span>
<span class="c">#    [7, &#39;17&#39;, &#39;289&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [6, &#39;13&#39;, &#39;169&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c">#    [5, &#39;11&#39;, &#39;121&#39;, &#39;Useful data coming soon...&#39;],</span>
<span class="c"># ]</span>
</pre></div>
</div>
<p>There are plenty more options for retrieving specific rows. See
<a class="reference internal" href="reports.html#blingalytics.base.Report.report_rows" title="blingalytics.base.Report.report_rows"><tt class="xref py py-meth docutils literal"><span class="pre">Report.report_rows</span></tt></a> for more.</p>
</div>
</div>
<div class="section" id="three-pull-real-data">
<h2>Three: pull real data<a class="headerlink" href="#three-pull-real-data" title="Permalink to this headline">¶</a></h2>
<p>Be patient... coming soon.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Sweet walkthrough</a><ul>
<li><a class="reference internal" href="#one-define-a-report">One: define a report</a><ul>
<li><a class="reference internal" href="#baby-s-first-report">Baby&#8217;s first report</a></li>
<li><a class="reference internal" href="#key-concept">Key concept</a></li>
<li><a class="reference internal" href="#build-your-columns">Build your columns</a></li>
<li><a class="reference internal" href="#a-slightly-realer-report">A slightly realer report</a></li>
</ul>
</li>
<li><a class="reference internal" href="#two-run-the-report">Two: run the report</a><ul>
<li><a class="reference internal" href="#retrieving-report-rows">Retrieving report rows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#three-pull-real-data">Three: pull real data</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="reports.html"
                        title="next chapter">Creating and using reports</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reports.html" title="Creating and using reports"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">blingalytics v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Adly Inc..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>