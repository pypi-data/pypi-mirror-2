
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Column formatters &mdash; blingalytics v0.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="blingalytics v0.1 documentation" href="index.html" />
    <link rel="prev" title="User-input widgets" href="widgets.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="widgets.html" title="User-input widgets"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">blingalytics v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-blingalytics.formats">
<span id="column-formatters"></span><h1>Column formatters<a class="headerlink" href="#module-blingalytics.formats" title="Permalink to this headline">¶</a></h1>
<p>Formats define how values in a report should be output for display to the
user. They generally take the underlying Python value and convert it into a
string appropriate for display in the given medium. For example, an internal
value of <tt class="docutils literal"><span class="pre">Decimal('9.99')</span></tt> might be converted to a display value of
<tt class="docutils literal"><span class="pre">'$9.99'</span></tt> for monetary values.</p>
<p>All formatters accept the following optional keyword arguments:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">label</span></tt>: A string that will be used as the label for the column, as
returned by the
<a class="reference internal" href="reports.html#blingalytics.base.Report.report_header" title="blingalytics.base.Report.report_header"><tt class="xref py py-meth docutils literal"><span class="pre">report_header</span></tt></a> method. By
default, this will be automatically generated based on the column name.</li>
<li><tt class="docutils literal"><span class="pre">align</span></tt>: Either <tt class="docutils literal"><span class="pre">'left'</span></tt> or <tt class="docutils literal"><span class="pre">'right'</span></tt>, used to determine the preferred
alignment of the column data. If this is not supplied, the formatter will
use its default alignment. Generally, number-type columns default to
right-aligned, while other columns default to left-aligned.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Many of the formatters rely on Python&#8217;s <tt class="docutils literal"><span class="pre">locale</span></tt> module to perform
locale-dependent formatting. For example, if your locale is set to
<tt class="docutils literal"><span class="pre">'en_US'</span></tt>, monetary values will be formatted as <tt class="docutils literal"><span class="pre">'$1,234.00'</span></tt>. If your
locale is set to <tt class="docutils literal"><span class="pre">'en_GB'</span></tt>, monetary values will be formatted as
<tt class="docutils literal"><span class="pre">'£1,123.00'</span></tt>. Your locale is set per Python thread, and should be
set somewhere in your code that guarantees it will be run prior to any
formatting operations. See Python&#8217;s documentation for the <tt class="docutils literal"><span class="pre">locale</span></tt>
module for more.</p>
</div>
<div class="section" id="output-formats">
<h2>Output formats<a class="headerlink" href="#output-formats" title="Permalink to this headline">¶</a></h2>
<p>As a base, all formats have formatter functions defined for two types of
output: HTML and CSV. You can pass in <tt class="docutils literal"><span class="pre">'html'</span></tt> (the default) or <tt class="docutils literal"><span class="pre">'csv'</span></tt>
as the format option to your report&#8217;s
<a class="reference internal" href="reports.html#blingalytics.base.Report.report_rows" title="blingalytics.base.Report.report_rows"><tt class="xref py py-meth docutils literal"><span class="pre">report_rows</span></tt></a> and
<a class="reference internal" href="reports.html#blingalytics.base.Report.report_footer" title="blingalytics.base.Report.report_footer"><tt class="xref py py-meth docutils literal"><span class="pre">report_footer</span></tt></a> methods to
format the output appropriately.</p>
<p>But you are not limited to HTML and CSV output formatting. If you want to
format values differently for another medium, you can subclass any formats you
use and add a <tt class="docutils literal"><span class="pre">format_NAME</span></tt> method. For example, you could add a
<tt class="docutils literal"><span class="pre">format_pdf</span></tt> method. You would then pass in <tt class="docutils literal"><span class="pre">'pdf'</span></tt> as the format option
to your report&#8217;s <a class="reference internal" href="reports.html#blingalytics.base.Report.report_rows" title="blingalytics.base.Report.report_rows"><tt class="xref py py-meth docutils literal"><span class="pre">report_rows</span></tt></a>
and <a class="reference internal" href="reports.html#blingalytics.base.Report.report_footer" title="blingalytics.base.Report.report_footer"><tt class="xref py py-meth docutils literal"><span class="pre">report_footer</span></tt></a> methods.
See the docstring and code of the base <tt class="docutils literal"><span class="pre">Format</span></tt> class for more.</p>
</div>
<div class="section" id="formatter-types">
<h2>Formatter types<a class="headerlink" href="#formatter-types" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="blingalytics.formats.Hidden">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Hidden</tt><big>(</big><em>label=None</em>, <em>align=None</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Hidden" title="Permalink to this definition">¶</a></dt>
<dd><p>No particular formatting is performed, and this column should be hidden
from the end user. This column will be marked as hidden in the header data
returned by your report&#8217;s
<a class="reference internal" href="reports.html#blingalytics.base.Report.report_header" title="blingalytics.base.Report.report_header"><tt class="xref py py-meth docutils literal"><span class="pre">report_header</span></tt></a> method.</p>
<p>A hidden column is used for the internal ID returned with each row. You
could also use these yourself to, for example, pass along a URL that gets
formatted into a nice-looking link with some front-end JavaScript.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Bling">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Bling</tt><big>(</big><em>label=None</em>, <em>align=None</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Bling" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the column as monetary data. This is formatted as currency
according to the thread-level locale setting. If being output for HTML,
it will add grouping indicators (such as commas in the U.S.). If being
output for CSV, it will not. By default, the column is right-aligned.</p>
<p>For example, in the <tt class="docutils literal"><span class="pre">'en_US'</span></tt> locale, numbers will be formatted as
<tt class="docutils literal"><span class="pre">'$1,234.56'</span></tt> for HTML or <tt class="docutils literal"><span class="pre">'$1234.56'</span></tt> for CSV.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Integer">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Integer</tt><big>(</big><em>grouping=True</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Integer" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the data as an integer. This formatter accepts one additional
optional argument:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">grouping</span></tt>: Whether or not the formatted value should have groupings
(such as a comma in the U.S.) when output for HTML. For example, when
representing the number of pageviews per month, you would probably want
separators; however, for an database ID you probably don&#8217;t. Defaults to
<tt class="xref docutils literal"><span class="pre">True</span></tt>.</li>
</ul>
<p>This formatting is based on the Python thread-level <tt class="docutils literal"><span class="pre">locale</span></tt> setting.
For example, in the <tt class="docutils literal"><span class="pre">'en_US'</span></tt> locale, numbers will be formatted as
<tt class="docutils literal"><span class="pre">'1,234'</span></tt> for HTML or <tt class="docutils literal"><span class="pre">'1234'</span></tt> for CSV. By default, the column is
right-aligned.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Percent">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Percent</tt><big>(</big><em>precision=1</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the data as a percent. This formatter accepts one additional
optional argument:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">precision</span></tt>: The number of decimal places of precision that should be
kept for display. Defaults to <tt class="docutils literal"><span class="pre">1</span></tt>.</li>
</ul>
<p>This is formatted as a decimal number with a trailing percent sign. For
example, numbers will be formatted as <tt class="docutils literal"><span class="pre">'12.3%'</span></tt> with a precision of
<tt class="docutils literal"><span class="pre">1</span></tt>. By default, this column is right-aligned.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.String">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">String</tt><big>(</big><em>title=False</em>, <em>truncate=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#blingalytics.formats.String" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats column data as strings. Essentially, this will simply coerce
values to strings. It also accepts a couple optional formatting
parameters:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">title</span></tt>: If <tt class="xref docutils literal"><span class="pre">True</span></tt>, will title-case the string. Defaults to
<tt class="xref docutils literal"><span class="pre">False</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">truncate</span></tt>: Set this to an integer value to truncate the string to
that number of characters. Adds an ellipsis if truncation was performed.
Defaults to not performing any truncation.</li>
</ul>
<p>This column is left-aligned by default.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Boolean">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Boolean</tt><big>(</big><em>terms=('Yes'</em>, <em>'No'</em>, <em>'')</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Boolean" title="Permalink to this definition">¶</a></dt>
<dd><p>Formatter for boolean data. This coerces the value to a boolean, and then
presents a string representation of whether it&#8217;s true or false. It accepts
one optional argument:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">terms</span></tt>: This is a tuple of three strings that determine how true,
false, and null values will be represented, in that order. By default,
it uses <tt class="docutils literal"><span class="pre">('Yes',</span> <span class="pre">'No',</span> <span class="pre">'')</span></tt>.</li>
</ul>
<p>This column is left-aligned by default.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Epoch">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Epoch</tt><big>(</big><em>label=None</em>, <em>align=None</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Epoch" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the column as a date. Expects the underlying data to be stored as
an integer number of days since the UNIX epoch. (This storage method works
great in conjunction with a
<a class="reference internal" href="sources/database.html#blingalytics.sources.database.ColumnTransform" title="blingalytics.sources.database.ColumnTransform"><tt class="xref py py-class docutils literal"><span class="pre">database.ColumnTransform</span></tt></a>
filter for doing timezone offsets.)</p>
<p>This date is formatted according to the Python thread&#8217;s <tt class="docutils literal"><span class="pre">locale</span></tt>
setting. For example, in the <tt class="docutils literal"><span class="pre">'en_US'</span></tt> locale, a date is formatted as
&#8216;01/23/2011&#8217;. By default, the column is left-aligned.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Date">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Date</tt><big>(</big><em>label=None</em>, <em>align=None</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Date" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the column as a date. Expects the underlying data to be stored as
a Python <tt class="docutils literal"><span class="pre">date</span></tt> or <tt class="docutils literal"><span class="pre">datetime</span></tt> object. This date is formatted according
to the Python thread&#8217;s <tt class="docutils literal"><span class="pre">locale</span></tt> setting. For example, in the <tt class="docutils literal"><span class="pre">'en_US'</span></tt>
locale, a date is formatted as &#8216;01/23/2011&#8217;. By default, the column is
left-aligned.</p>
</dd></dl>

<dl class="class">
<dt id="blingalytics.formats.Month">
<em class="property">class </em><tt class="descclassname">blingalytics.formats.</tt><tt class="descname">Month</tt><big>(</big><em>label=None</em>, <em>align=None</em><big>)</big><a class="headerlink" href="#blingalytics.formats.Month" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the column as a month. Expects the underlying values to be Python
<tt class="docutils literal"><span class="pre">datetime</span></tt> or <tt class="docutils literal"><span class="pre">date</span></tt> objects. For example, <tt class="docutils literal"><span class="pre">'Jan</span> <span class="pre">2011'</span></tt>.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Column formatters</a><ul>
<li><a class="reference internal" href="#output-formats">Output formats</a></li>
<li><a class="reference internal" href="#formatter-types">Formatter types</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="widgets.html"
                        title="previous chapter">User-input widgets</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/formats.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="widgets.html" title="User-input widgets"
             >previous</a> |</li>
        <li><a href="index.html">blingalytics v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Adly Inc..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>