(function(a){String.prototype.startsWith=function(e){var c=this.length;var d=e.length;if(c<d){return false}return(this.substr(0,d)==e)};String.prototype.endsWith=function(e){var c=this.length;var d=e.length;if(c<d){return false}return(this.substr(c-d)==e)};a.ZBlog={ajax:{check:function(c,d,e){if(typeof(c)=="undefined"){a.getScript(d,e)}else{e()}},getAddr:function(){var c=window.location.href;return c.substr(0,c.lastIndexOf("/")+1)},post:function(f,h,d,c,g){if(f.startsWith("http://")){var i=f}else{var i=a.ZBlog.ajax.getAddr()+f}var e={url:i,type:"POST",data:h,dataType:g,success:d,error:c};a.ajax(e)},submit:function(h,f,i,d,c,g){if(f.startsWith("http://")){var j=f}else{var j=a.ZBlog.ajax.getAddr()+f}var e={url:j,type:"POST",data:i,dataType:g,success:d,error:c};a(h).ajaxSubmit(e)}},form:{check:function(c){a.ZBlog.ajax.check(a.fn.ajaxSubmit,"/++skin++ZBlog.FO/@@/ztfy.jquery.form/jquery-form.min.js",c)}},loader:{div:null,start:function(e){e.empty();var c=a('<div class="loader"></div>').appendTo(e);var d=a('<img class="loading" src="/++skin++ZBlog.FO/@@/ztfy.blog.img/loading.gif" />').appendTo(c);a.ZBlog.loader.div=c},stop:function(){if(a.ZBlog.loader.div!=null){a.ZBlog.loader.div.replaceWith("");a.ZBlog.loader.div=null}}},actions:{showLoginForm:function(d){var c=a("SPAN.inputs",d);c.parents("LI:first").addClass("selected");c.show();a("INPUT",c).get(0).focus()},login:function(c){if(typeof(c)=="undefined"){c=a('FORM[name="login_form"]')}a.ZBlog.form.check(function(){a.ZBlog.actions._login(c)});return false},_login:function(c){a.ZBlog.ajax.submit(c,a(c).attr("action")+"/@@ajax/login",{},a.ZBlog.actions._loginCallback,a.ZBlog.actions._loginError,"text")},_loginCallback:function(c,d){if(d=="success"){if(c=="OK"){window.location.reload()}else{jAlert(a.ZBlog.I18n.BAD_LOGIN_MESSAGE,a.ZBlog.I18n.BAD_LOGIN_TITLE,null)}}},_loginError:function(d,c){jAlert(c,a.ZBlog.I18n.ERROR_OCCURED,null)},logout:function(){a.get(window.location.href+"/@@login.html/@@ajax/logout",a.ZBlog.actions._logoutCallback)},_logoutCallback:function(c,d){window.location.reload()}},code:{resizeFrame:function(c){a(c).css("height",a("BODY",c.contentDocument).height()+20)}}};var b=a("HTML").attr("lang")||a("HTML").attr("xml:lang");a.getScript("/++skin++ZBlog.FO/@@/ztfy.blog.front.js/i18n/"+b+".js")})(jQuery);