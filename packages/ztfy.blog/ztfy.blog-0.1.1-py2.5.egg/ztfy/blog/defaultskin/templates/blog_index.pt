<h1 tal:content="context/i18n:title" />
<div class="blog" i18n:domain="ztfy.blog"
	tal:define="presentation view/presentation;
				heading context/i18n:heading;
				position presentation/header_position;">
	<div class="heading" tal:define="renderer heading/html:renderer;"
						 tal:condition="heading"
						 tal:attributes="class python:position and 'heading nofloat' or 'heading'"
						 tal:content="structure python:renderer.render(presentation.header_format,request)" />
	<div class="topics" tal:define="page_topics view/getTopics;
									topics page_topics/topics;
									klass python:heading and (not position) and 'topics' or 'topics nofloat';"
						tal:attributes="class klass">
		<div class="topic" tal:repeat="topic topics">
			<tal:var content="structure topic/@@preview" />
		</div>
		<div class="pages" tal:define="pages page_topics/pages;
									   current_page python:int(request.form.get('page',0));"
						   tal:condition="python:pages > 1">
			<a tal:condition="python:current_page > 0"
			   tal:attributes="href string:${request/URL}?page=0;"
			   title="First page" i18n:attributes="title">&lt;&lt;</a>
			<a tal:repeat="page python:range(pages)"
			   tal:attributes="href string:${request/URL}?page=${page};
							   class python:(current_page == page) and 'current' or '';"
			   tal:content="python:page+1">page</a>
			<a tal:define="last python:pages-1"
			   tal:condition="python:current_page < last"
			   tal:attributes="href string:${request/URL}?page=${last};"
			   title="Last page" i18n:attributes="title">&gt;&gt;</a>
		</div>
	</div>
</div>