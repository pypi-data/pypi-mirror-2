 <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:tal="http://xml.zope.org/namespaces/tal"
          xmlns:metal="http://xml.zope.org/namespaces/metal"
          xmlns:i18n="http://xml.zope.org/namespaces/i18n"
          metal:use-macro="here/main_template/macros/master"
          i18n:domain="vs.org">
 <body>
    <div metal:fill-slot="main">
        <tal:main-macro
            metal:define-macro="main"
            tal:define="kssClassesView context/@@kss_field_decorator_view;
                        getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                        kssClassesView context/@@kss_field_decorator_view;
                        templateId template/getId;
                        ">

                        <div tal:replace="structure provider:plone.abovecontenttitle" />

            <h1 class="documentFirstHeading"> 
                <metal:field use-macro="python:here.widget('title', mode='view')">
                            Title
                </metal:field>
            </h1>

            <p metal:use-macro="here/kss_generic_macros/macros/generic_description_view">
                Description
            </p>

            <div tal:replace="structure provider:plone.belowcontenttitle" />
            <div tal:replace="structure provider:plone.abovecontentbody" />

            <tal:def define="image context/getImageReference">
                <span tal:condition="image"
                   class="discreet employeefoto"
                   tal:attributes="href string:${image/absolute_url}/image/view">
                        <img tal:attributes="src string:${image/absolute_url}/image_preview" />          
                </span>
            </tal:def>
            <table class="employee-data vertical listing">
                <tbody>

                <tr tal:condition="nothing | context/getPosition">
                    <th i18n:translate="label_position" >:</th>
                    <td><metal:field use-macro="python:here.widget('position', mode='view')">position</metal:field></td>
                </tr>

                <tr tal:condition="nothing | context/getSalutation">
                    <th i18n:translate="label_salutation" >:</th>
                    <td>
                        <metal:field use-macro="python:here.widget('salutation', mode='view')">salutation</metal:field>
                    </td>
                </tr>

                <tr tal:condition="nothing | context/getDegree">
                    <th i18n:translate="label_degree" >:</th>
                    <td>
                        <metal:field use-macro="python:here.widget('degree', mode='view')">degree</metal:field>
                    </td>
                </tr>

                <tr tal:condition="nothing | context/getFirstname">
                    <th i18n:translate="label_firstname" >:</th>
                    <td>
                        <metal:field use-macro="python:here.widget('firstname', mode='view')">firstname</metal:field>
                    </td>
                </tr>

                <tr tal:condition="nothing | context/getLastname">
                    <th i18n:translate="label_lastname" >:</th>
                    <td>
                        <metal:field use-macro="python:here.widget('lastname', mode='view')">lastname</metal:field>
                    </td>
                </tr>

                <!-- numbers -->
                <tr tal:repeat="number_type context/getNumberTypes">
                    <th i18n:translate="" tal:content="number_type" />
                    <td>
                        <div tal:repeat="number python: context.getNumbersByType(number_type)" 
                            tal:content="number"
                        />
                    </td>
                </tr>

                <tr tal:condition="context/getEmail">
                    <th i18n:translate="label_email">:</th>
                    <td>
                        <a tal:content="structure python:context.getEmail().replace('@', ' @ ')"></a>
                    </td>
                </tr>

                <tr tal:condition="context/getUrl">
                    <th i18n:translate="label_url">:</th>
                    <td>
                        <a href="url" tal:attributes="href context/getUrl">
                            <metal:field use-macro="python:here.widget('url', mode='view')">url</metal:field>
                        </a>
                    </td>
                </tr>

                <tr tal:define="teams python: context.getBRefs(relationship='isEmployee')" tal:condition="teams">
                    <th i18n:translate="label_teams">Institutions / Departments </th>
                    <td>
                    <ul class="vsTeamList">
                        <li tal:repeat="team teams">
                            <img src="content_icon"
                                tal:attributes="src team/getIcon; title team/Type;"
                                i18n:attributes="title" />
                            <a href="team" 
                                tal:attributes="href team/absolute_url"
                                tal:content="team/Title">
                                Team
                            </a>
                        </li>
                    </ul>
                    </td>
                </tr>
                <tr>
                    <th i18n:translate="label_vcard"></th>
                    <td>
                    <a href="vcard" class="vcard-link" 
                        tal:attributes="href string:${context/@@plone_context_state/object_url}/@@vcard_view">
                        <img src="home_icon" 
                            tal:attributes="src string:${context/@@plone_context_state/object_url}/++resource++vs.org.images/vcard_icon.gif;"
                            i18n:attributes="title label_vcard; alt label_vcard;" />
                            <span i18n:translate="link_vcard" tal:omit-tag="" />
                    </a>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="visualClear"></div>
            <div tal:replace="structure provider:plone.belowcontentbody" />
        </tal:main-macro>
    </div>
</body>
</html>
  


