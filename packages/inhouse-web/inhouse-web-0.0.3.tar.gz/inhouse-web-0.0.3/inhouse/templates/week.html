{% extends "base.html" %}
{% load i18n %}

{% block page-title %}{% trans "Week" %}{% endblock %}

{% block sub-navigation %}
  <ul>
    <li><a href="{% url inhouse.views.show_today %}">{% trans "Current day" %}</a> |</li>
    <li><a href="{% url inhouse.views.overview %}">{% trans "Overview" %}</a> |</li>
    <li><a href="{% url inhouse.views.show_week %}" style="font-weight: bold;">{% trans "Week" %}</a> |</li>
    <li><a href="">{% trans "Month" %}</a> |</li>
  </ul>
{% endblock %}

{% block content %}
  <div id="week" class="default-list">
    <div class="pagination">
      <div style="margin-bottom: 5px; float:left;">
        <a title="{% trans "previous month" %}" href=""><span class="sprite left_big"></span></a>
        <a title="{% trans "next month" %}" href=""><span class="sprite right_big"></span></a>
        {{ first_day|date }} - {{ last_day|date }}
      </div>
    </div>
    <table width="100%" style="table-layout:fixed;">
      <thead>
        <tr>
          <!--<th></th>-->
          {% for day in days %}
            <th style="text-align: center;">
            <a href="/time/{{ day|date:"Y/m/d" }}">{{ day|date:"D" }} {{ day|date:"SHORT_DATE_FORMAT" }}</a>
            </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
          <tr>
            <!--<td width="30px;"></td>-->
            {% for bookings in day_data %}
              <td class="week_day">
                {% if bookings %}
                  <table>
                  {% for booking in bookings %}
                    <tr>
                      <td class="week_booking" style="height:{{ booking.duration|duration_to_pixel }}px; {% if booking.is_closed %} background-color: #DDD;{% endif %}">
                      {{ booking.duration|format_minutes_to_time }}<br/>
                      <a href="/time/edit/{{ booking.id }}">{{ booking.get_title|truncatewords:2 }}</a>
                      </td>
                    </tr>
                  {% endfor %}
                  </table>
                {% endif %}
              </td>
            {% endfor %}
          </tr>
          <tr class="sum">
            <!--<td width="30px;"><strong>{% trans "Sum:" %}</strong></td>-->
            {% for sum in sum_data %}
              <td style="text-align: center;"><strong>{{ sum|format_minutes_to_time }}</strong></td>
            {% endfor %}
          </tr>
      </tbody>
    </table>
  </div>
{% endblock %}