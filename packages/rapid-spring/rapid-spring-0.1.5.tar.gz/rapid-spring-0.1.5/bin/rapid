#!/usr/bin/env python
# -*- coding: utf-8 -*-
# Copyright (C) 2010 Tobi Vollebregt

import os, sys

# modify path so that development copy is picked up first, if available
sys.path = [os.path.normpath(os.path.join(os.path.realpath(__file__), '..', '..'))] + sys.path
from rapid.main import *


if __name__ == '__main__':
	if len(sys.argv) < 2:
		usage()

	verb = sys.argv[1]

	if verb == 'pin':
		pin(req_arg())
	elif verb == 'unpin':
		unpin(req_arg())
	elif verb == 'install':
		install(req_arg())
	elif verb == 'uninstall':
		uninstall(req_arg())
	elif verb == 'list-packages':
		list_packages(opt_arg(), True)
	elif verb == 'list-installed-packages':
		list_packages(opt_arg(), False)
	elif verb == 'list-tags':
		list_tags(opt_arg(), True)
	elif verb == 'list-pinned-tags':
		list_tags(opt_arg(), False)
	elif verb == 'update' or verb == 'upgrade':
		upgrade(opt_arg())
	elif verb == 'uninstall-unpinned':
		uninstall_unpinned()
	elif verb == 'collect-pool':
		collect_pool()
	else:
		print 'Unknown operation: ' + verb
		print
		usage()
