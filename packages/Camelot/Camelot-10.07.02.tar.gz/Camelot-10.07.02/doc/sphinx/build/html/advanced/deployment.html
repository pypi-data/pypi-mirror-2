<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Deployment &mdash; Camelot v0.1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot v0.1 documentation" href="../index.html" />
    <link rel="up" title="Advanced Topics" href="index.html" />
    <link rel="next" title="Authentication and permissions" href="permissions.html" />
    <link rel="prev" title="Internationalization" href="i18n.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="permissions.html" title="Authentication and permissions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="i18n.html" title="Internationalization"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Camelot v0.1 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Advanced Topics</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="deployment">
<span id="doc-deployment"></span><h1>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Release:</th><td class="field-body">0.1</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body">July 02, 2010</td>
</tr>
</tbody>
</table>
<p>After developing a Camelot application comes the need to deploy the
application, eather at a central location or in a distributed setup.</p>
<div class="section" id="building-egg-files">
<h2>Building .egg files<a class="headerlink" href="#building-egg-files" title="Permalink to this headline">¶</a></h2>
<p>Whatever the deployment setup is, it is almost always a good idea to
distribute your application as a single .egg file, containing as much
as possible the dependencies that are likely to change often during
the lifetime of the application.  Resource files (like icons or templates
can be included in this .egg file as well).</p>
<p>Building .egg files is a relatively straightforward process using
<a class="reference external" href="http://peak.telecommunity.com/DevCenter/setuptools">setuptools</a></p>
<p>A setup.py file for building an .egg of your application could look
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">setup</span><span class="p">(</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;movie store&#39;</span><span class="p">,</span>
  <span class="n">version</span> <span class="o">=</span> <span class="s">&#39;01.01&#39;</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;Movie Store&#39;</span><span class="p">,</span>
  <span class="n">author</span> <span class="o">=</span> <span class="s">&#39;Conceptive Engineering&#39;</span><span class="p">,</span>
  <span class="n">author_email</span> <span class="o">=</span> <span class="s">&#39;project-camelot@conceptive.be&#39;</span><span class="p">,</span>
  <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;www.conceptive.be&#39;</span><span class="p">,</span>
  <span class="n">include_package_data</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
  <span class="n">packages</span> <span class="o">=</span> <span class="n">find_packages</span><span class="p">(),</span>
  <span class="n">py_modules</span> <span class="o">=</span>  <span class="p">[</span><span class="s">&#39;settings&#39;</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>Which is then build using this command:</p>
<div class="highlight-python"><pre>python -O setup.py bdist_egg --exclude-source-files</pre>
</div>
<p>The setup.py script above includes settings.py in the .egg file.  This
is prefered if the settings.py file is going to be the same for all
deployments.  (Eg.: the database is on a central server accessible
for all)  In some occasions it might be better not to include the settings.py
file into the .egg file, and only put it in your PYTHONPATH at deployment
time.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The advantage of using .egg files comes when updating the application, simply
replacing a single .egg file at a central location is enough to migrate all
your users to the new version.</p>
</div>
</div>
<div class="section" id="linux-deployment">
<h2>Linux deployment<a class="headerlink" href="#linux-deployment" title="Permalink to this headline">¶</a></h2>
<p>The application can be launched by putting the .egg in the PYTHONPATH
and starting python with the -m option:</p>
<div class="highlight-python"><pre>export PYTHONPATH = /mnt/r/movie_store-01.01-py2.5.egg
python.exe -m movie_store.main</pre>
</div>
</div>
<div class="section" id="windows-deployment">
<h2>Windows deployment<a class="headerlink" href="#windows-deployment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-egg-files">
<h3>Using .egg files<a class="headerlink" href="#using-egg-files" title="Permalink to this headline">¶</a></h3>
<p>First of all python needs to be available on the machines that are going
to run the application.  Notice that for python to be available, it not
necessarily needs to be installed on every machine that runs the application.
Installing python on a shared disk of a central server might just be enough.</p>
<p>Don&#8217;t forget to install the needed binary libraries as well, like PyQt, PIL.</p>
<p>Also put the .egg file on a shared drive.</p>
<p>Then, the easiest way to proceed is to put a little .vbs bootstrap script on
the shared drive and put shortcuts to it on the desktops of the users.  The
.vbs script can look like this:</p>
<div class="highlight-python"><pre>Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.Environment("Process").item("PYTHONPATH") = "R:\movie_store-01.01-py2.5.egg;"
WshShell.Run """R:\Python2.5\pythonw.exe"" -m movie_store.main"</pre>
</div>
</div>
<div class="section" id="creating-installers">
<h3>Creating installers<a class="headerlink" href="#creating-installers" title="Permalink to this headline">¶</a></h3>
<p>When the application needs to be installed at a variety of sites and circumstances,
or it needs to be downloadable as a package, it might be needed to build a real
windows installer.  This can be done using a combination of <a class="reference external" href="http://www.py2exe.org/">py2exe</a> and <a class="reference external" href="http://www.innosetup.com">InnoSetup</a>.</p>
<p>The commercial release of Camelot includes a script that builds an installer from
a Camelot application.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Deployment</a><ul>
<li><a class="reference external" href="#building-egg-files">Building .egg files</a></li>
<li><a class="reference external" href="#linux-deployment">Linux deployment</a></li>
<li><a class="reference external" href="#windows-deployment">Windows deployment</a><ul>
<li><a class="reference external" href="#using-egg-files">Using .egg files</a></li>
<li><a class="reference external" href="#creating-installers">Creating installers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="i18n.html"
                                  title="previous chapter">Internationalization</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="permissions.html"
                                  title="next chapter">Authentication and permissions</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/advanced/deployment.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="permissions.html" title="Authentication and permissions"
             >next</a> |</li>
        <li class="right" >
          <a href="i18n.html" title="Internationalization"
             >previous</a> |</li>
        <li><a href="../index.html">Camelot v0.1 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Advanced Topics</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; <a href="../copyright.html">Copyright</a> 2009, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>