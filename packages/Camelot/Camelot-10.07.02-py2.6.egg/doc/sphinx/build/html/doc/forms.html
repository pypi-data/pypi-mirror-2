<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating Forms &mdash; Camelot v0.1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot v0.1 documentation" href="../index.html" />
    <link rel="up" title="Camelot Documentation" href="index.html" />
    <link rel="next" title="Actions" href="actions.html" />
    <link rel="prev" title="Customizing the Admin classes" href="admin.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="actions.html" title="Actions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="admin.html" title="Customizing the Admin classes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Camelot v0.1 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-forms">
<span id="doc-forms"></span><h1>Creating Forms<a class="headerlink" href="#creating-forms" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Release:</th><td class="field-body">0.1</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body">July 02, 2010</td>
</tr>
</tbody>
</table>
<p>This section describes how to place fields on forms and applying
various layouts.  It also covers how to customize forms to your
specific needs.  As with everything in Camelot, the goal of the framework
is that you can create 80% of your forms with minimal effort, while
the framework should allow you to really customize the other 20% of
your forms.</p>
<div class="section" id="form">
<h2>Form<a class="headerlink" href="#form" title="Permalink to this headline">¶</a></h2>
<p>A form is a collection of fields organized within a layout.  Each
field is represented by its editor.</p>
<p>Usually forms are defined by specifying the &#8216;form_display&#8217; attribute of an
Admin class :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">elixir</span> <span class="kn">import</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">ManyToOne</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.types</span> <span class="kn">import</span> <span class="n">Unicode</span><span class="p">,</span> <span class="n">Date</span>
<span class="kn">from</span> <span class="nn">camelot.admin.entity_admin</span> <span class="kn">import</span> <span class="n">EntityAdmin</span>
<span class="kn">from</span> <span class="nn">camelot.view</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">short_description</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">512</span><span class="p">))</span>
    <span class="n">releasedate</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Date</span><span class="p">)</span>
    <span class="n">director</span> <span class="o">=</span> <span class="n">ManyToOne</span><span class="p">(</span><span class="s">&#39;Person&#39;</span><span class="p">)</span>
  
    <span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
        <span class="n">form_display</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">([</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;short_description&#39;</span><span class="p">,</span> <span class="s">&#39;director&#39;</span><span class="p">,</span> <span class="s">&#39;release_date&#39;</span><span class="p">])</span>
</pre></div>
</div>
<img alt="../_images/form.png" src="../_images/form.png" />
<p>The &#8216;form_display&#8217; attribute should either be a list of fields to display
or an instance of camelot.view.forms.Form or its subclasses.</p>
<p>Forms can be nested into each other :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">camelot.admin.entity_admin</span> <span class="kn">import</span> <span class="n">EntityAdmin</span>
<span class="kn">from</span> <span class="nn">camelot.view</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">camelot.core.utils</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
    <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;person&#39;</span><span class="p">)</span>
    <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;persons&#39;</span><span class="p">)</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">,</span> <span class="p">]</span>
    <span class="n">form_display</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">TabForm</span><span class="p">([(</span><span class="s">&#39;Basic&#39;</span><span class="p">,</span> <span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">([</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">,</span> <span class="s">&#39;contact_mechanisms&#39;</span><span class="p">,])),</span>
                                  <span class="p">(</span><span class="s">&#39;Official&#39;</span><span class="p">,</span> <span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">([</span><span class="s">&#39;birthdate&#39;</span><span class="p">,</span> <span class="s">&#39;social_security_number&#39;</span><span class="p">,</span> <span class="s">&#39;passport_number&#39;</span><span class="p">,</span>
                                                           <span class="s">&#39;passport_expiry_date&#39;</span><span class="p">,</span><span class="s">&#39;addresses&#39;</span><span class="p">,])),</span> <span class="p">])</span>
</pre></div>
</div>
<img alt="../_images/nested_form.png" src="../_images/nested_form.png" />
</div>
<div class="section" id="inheritance-and-forms">
<h2>Inheritance and Forms<a class="headerlink" href="#inheritance-and-forms" title="Permalink to this headline">¶</a></h2>
<p>Just as Entities support inheritance, forms support inheritance as well.  This
avoids duplication of effort when designing and maintaining forms.  Each of the
Form subclasses has a set of methods to modify its content.  In the example below
a new tab is added to the form defined in the previous section.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

<span class="kn">from</span> <span class="nn">camelot.view</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">nested_form</span> <span class="kn">import</span> <span class="n">Admin</span>

<span class="k">class</span> <span class="nc">InheritedAdmin</span><span class="p">(</span><span class="n">Admin</span><span class="p">):</span>
    <span class="n">form_display</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">Admin</span><span class="o">.</span><span class="n">form_display</span><span class="p">)</span>
    <span class="n">form_display</span><span class="o">.</span><span class="n">add_tab</span><span class="p">(</span><span class="s">&#39;Work&#39;</span><span class="p">,</span> <span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">([</span><span class="s">&#39;employers&#39;</span><span class="p">,</span> <span class="s">&#39;directed_organizations&#39;</span><span class="p">,</span> <span class="s">&#39;shares&#39;</span><span class="p">]))</span> 
</pre></div>
</div>
<img alt="../_images/inherited_form.png" src="../_images/inherited_form.png" />
</div>
<div class="section" id="putting-notes-on-forms">
<h2>Putting notes on forms<a class="headerlink" href="#putting-notes-on-forms" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/NoteEditor.png" src="../_images/NoteEditor.png" />
<p>A note on a form is nothing more than a property with the NoteDelegate as its
delegate and where the widget is inside a WidgetOnlyForm.</p>
<p>In the case of a Person, we display a note if another person with the same name
allready exists :</p>
<div class="highlight-python"><pre>class Person( Party ):
    """Person represents natural persons
    """
    using_options( tablename = 'person', inheritance = 'multi' )
    first_name = Field( Unicode( 40 ), required = True )
    last_name = Field( Unicode( 40 ), required = True )
    middle_name = Field( Unicode( 40 ) )
    personal_title = Field( Unicode( 10 ) )
    suffix = Field( Unicode( 3 ) )
    sex = Field( Unicode( 1 ), default = u'M' )
    birthdate = Field( Date() )
    martial_status = Field( Unicode( 1 ) )
    social_security_number = Field( Unicode( 12 ) )
    passport_number = Field( Unicode( 20 ) )
    passport_expiry_date = Field( Date() )
    is_staff = Field( Boolean, default = False, index = True )
    is_superuser = Field( Boolean, default = False, index = True )
    picture = Field( camelot.types.Image( upload_to = 'person-pictures' ), deferred = True )
    comment = Field( camelot.types.RichText() )
    employers = OneToMany( 'EmployerEmployee', inverse = 'established_to', cascade='all, delete, delete-orphan' )

    @property
    def note(self):
        for person in self.__class__.query.filter_by(first_name=self.first_name, last_name=self.last_name):
            if person!=self:
                return _('A person with the same name allready exists')
    
    @property
    def name( self ):
        # we don't use full name in here, because for new objects, full name will be None, since
        # it needs to be fetched from the db first
        return u'%s %s' % ( self.first_name, self.last_name )

    def __unicode__( self ):
        return self.name

    class Admin( Party.Admin ):
        verbose_name = _( 'Person' )
        verbose_name_plural = _( 'Persons' )
        list_display = ['first_name', 'last_name', 'email', 'phone']
        form_display = TabForm( [( _('Basic'), Form( [HBoxForm( [Form( [WidgetOnlyForm('note'), 'first_name', 'last_name', 'sex'] ),
                                                          Form( ['picture', ] ),
                                                         ] ),
                                                         'contact_mechanisms', 'comment', ], scrollbars = False ) ),
                                ( _('Official'), Form( ['birthdate', 'social_security_number', 'passport_number', 
                                                        'passport_expiry_date', 'addresses', ], scrollbars = False ) ),
                                ( _('Work'), Form( ['employers', 'directed_organizations', 'shares'], scrollbars = False ) ),
                                ( _('Status'), Form( ['status'] ) ),
                                ] )
        field_attributes = dict( Party.Admin.field_attributes )
        field_attributes['note'] = {'delegate':delegates.NoteDelegate}

</pre>
</div>
</div>
<div class="section" id="module-camelot.view.forms">
<h2>Available Form Subclasses<a class="headerlink" href="#module-camelot.view.forms" title="Permalink to this headline">¶</a></h2>
<p>camelot.view.forms.Form has several subclasses that can be used to create
various layouts.  Each subclass maps to a QT Layout class.</p>
<p>Classes to layout fields on a form.  These are mostly used for specifying the
form_display attribute in Admin classes, but they can be used on their own as
well.  Form classes can be used recursive.</p>
<dl class="class">
<dt id="camelot.view.forms.Form">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">Form</tt><big>(</big><em>content</em>, <em>scrollbars=False</em>, <em>columns=1</em><big>)</big><a class="headerlink" href="#camelot.view.forms.Form" title="Permalink to this definition">¶</a></dt>
<dd><p>Base Form class to put fields on a form.  A form can be converted to a
QT widget by calling its render method.  The base form uses the QFormLayout
to render a form:</p>
<dl class="docutils">
<dt>class Admin(EntityAdmin):</dt>
<dd>form_display = Form([&#8216;title&#8217;, &#8216;short_description&#8217;, &#8216;director&#8217;, &#8216;release_date&#8217;])</dd>
</dl>
<img alt="../_images/form.png" src="../_images/form.png" />
<dl class="method">
<dt id="camelot.view.forms.Form.get_fields">
<tt class="descname">get_fields</tt><big>(</big><big>)</big><a class="headerlink" href="#camelot.view.forms.Form.get_fields" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">the fields, visible in this form</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.Form.removeField">
<tt class="descname">removeField</tt><big>(</big><em>original_field</em><big>)</big><a class="headerlink" href="#camelot.view.forms.Form.removeField" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a field from the form, This function can be used to modify
inherited forms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>original_field</em> &#8211; the name of the field to be removed</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the field was found and removed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.Form.render">
<tt class="descname">render</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#camelot.view.forms.Form.render" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>widgets</em> &#8211; a dictionary mapping each field in this form to a tuple</td>
</tr>
</tbody>
</table>
<p>of (label, widget editor)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">a QWidget into which the form is rendered</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.Form.render_ooxml">
<tt class="descname">render_ooxml</tt><big>(</big><em>obj</em>, <em>delegates</em><big>)</big><a class="headerlink" href="#camelot.view.forms.Form.render_ooxml" title="Permalink to this definition">¶</a></dt>
<dd>Generator for lines of text in Office Open XML representing this form
:param obj: the object or entity that will be rendered
:param delegates: a dictionary mapping field names to their delegate</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.Form.replaceField">
<tt class="descname">replaceField</tt><big>(</big><em>original_field</em>, <em>new_field</em><big>)</big><a class="headerlink" href="#camelot.view.forms.Form.replaceField" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace a field on this form with another field.  This function can be used to
modify inherited forms.</p>
<p>:param original_field : the name of the field to be replace
:param new_field : the name of the new field
:return: True if the original field was found and replaced.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.GridForm">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">GridForm</tt><big>(</big><em>grid</em>, <em>nomargins=False</em><big>)</big><a class="headerlink" href="#camelot.view.forms.GridForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Put different fields into a grid, without a label.  Row or column labels can be added
using the Label form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GridForm</span><span class="p">([[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;short_description&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;director&#39;</span><span class="p">,</span><span class="s">&#39;release_date&#39;</span><span class="p">]])</span>
</pre></div>
</div>
<img alt="../_images/grid_form.png" src="../_images/grid_form.png" />
<dl class="method">
<dt id="camelot.view.forms.GridForm.append_column">
<tt class="descname">append_column</tt><big>(</big><em>column</em><big>)</big><a class="headerlink" href="#camelot.view.forms.GridForm.append_column" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>column</em> &#8211; the list of fields that should come in the additional column</td>
</tr>
</tbody>
</table>
<p>use this method to modify inherited grid forms</p>
</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.GridForm.append_row">
<tt class="descname">append_row</tt><big>(</big><em>row</em><big>)</big><a class="headerlink" href="#camelot.view.forms.GridForm.append_row" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>row</em> &#8211; the list of fields that should come in the additional row</td>
</tr>
</tbody>
</table>
<p>use this method to modify inherited grid forms</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.GroupBoxForm">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">GroupBoxForm</tt><big>(</big><em>title</em>, <em>content</em>, <em>scrollbars=None</em>, <em>min_width=None</em>, <em>min_height=None</em>, <em>columns=1</em><big>)</big><a class="headerlink" href="#camelot.view.forms.GroupBoxForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a form within a QGroupBox:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
  <span class="n">form_display</span> <span class="o">=</span> <span class="n">GroupBoxForm</span><span class="p">(</span><span class="s">&#39;Movie&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;short_description&#39;</span><span class="p">])</span>
</pre></div>
</div>
<img alt="../_images/group_box_form.png" src="../_images/group_box_form.png" />
</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.HBoxForm">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">HBoxForm</tt><big>(</big><em>columns</em><big>)</big><a class="headerlink" href="#camelot.view.forms.HBoxForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Render different forms in a horizontal box:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">form</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">HBoxForm</span><span class="p">([[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;short_description&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;director&#39;</span><span class="p">,</span> <span class="s">&#39;release_date&#39;</span><span class="p">]])</span>
</pre></div>
</div>
<img alt="../_images/hbox_form.png" src="../_images/hbox_form.png" />
</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.Label">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">Label</tt><big>(</big><em>label</em>, <em>alignment='left'</em>, <em>style=None</em><big>)</big><a class="headerlink" href="#camelot.view.forms.Label" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a label with a QLabel</p>
<dl class="method">
<dt id="camelot.view.forms.Label.render_ooxml">
<tt class="descname">render_ooxml</tt><big>(</big><big>)</big><a class="headerlink" href="#camelot.view.forms.Label.render_ooxml" title="Permalink to this definition">¶</a></dt>
<dd>Generator for label text in Office Open XML representing this form</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.TabForm">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">TabForm</tt><big>(</big><em>tabs</em>, <em>position='North'</em><big>)</big><a class="headerlink" href="#camelot.view.forms.TabForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Render forms within a QTabWidget:</p>
<div class="highlight-python"><pre>from = TabForm([('First tab', ['title', 'short_description']),
                ('Second tab', ['director', 'release_date'])])</pre>
</div>
<img alt="../_images/tab_form.png" src="../_images/tab_form.png" />
<dl class="method">
<dt id="camelot.view.forms.TabForm.add_tab">
<tt class="descname">add_tab</tt><big>(</big><em>tab_label</em>, <em>tab_form</em><big>)</big><a class="headerlink" href="#camelot.view.forms.TabForm.add_tab" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a tab to the form</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>tab_label</em> &#8211; the name of the tab</li>
<li><em>tab_form</em> &#8211; the form to display in the tab or a list of field names.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.TabForm.add_tab_at_index">
<tt class="descname">add_tab_at_index</tt><big>(</big><em>tab_label</em>, <em>tab_form</em>, <em>index</em><big>)</big><a class="headerlink" href="#camelot.view.forms.TabForm.add_tab_at_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a tab to the form at the specified index</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>tab_label</em> &#8211; the name to the tab</li>
<li><em>tab_form</em> &#8211; the form to display in the tab or a list of field names.</li>
<li><em>index</em> &#8211; the position of tab in the tabs list.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.view.forms.TabForm.get_tab">
<tt class="descname">get_tab</tt><big>(</big><em>tab_label</em><big>)</big><a class="headerlink" href="#camelot.view.forms.TabForm.get_tab" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get the tab form of associated with a tab_label, use this function to</dt>
<dd>modify the underlying tab_form in case of inheritance</dd>
</dl>
<p>:param tab_label : a label of a tab as passed in the construction method
:return: the tab_form corresponding to tab_label</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.VBoxForm">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">VBoxForm</tt><big>(</big><em>rows</em><big>)</big><a class="headerlink" href="#camelot.view.forms.VBoxForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Render different forms or widgets in a vertical box:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">form</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">VBoxForm</span><span class="p">([[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;short_description&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;director&#39;</span><span class="p">,</span> <span class="s">&#39;release_date&#39;</span><span class="p">]])</span>
</pre></div>
</div>
<img alt="../_images/vbox_form.png" src="../_images/vbox_form.png" />
</dd></dl>

<dl class="class">
<dt id="camelot.view.forms.WidgetOnlyForm">
<em class="property">class </em><tt class="descclassname">camelot.view.forms.</tt><tt class="descname">WidgetOnlyForm</tt><big>(</big><em>field</em><big>)</big><a class="headerlink" href="#camelot.view.forms.WidgetOnlyForm" title="Permalink to this definition">¶</a></dt>
<dd>Renders a single widget without its label, typically a one2many widget</dd></dl>

<dl class="function">
<dt id="camelot.view.forms.structure_to_form">
<tt class="descclassname">camelot.view.forms.</tt><tt class="descname">structure_to_form</tt><big>(</big><em>structure</em><big>)</big><a class="headerlink" href="#camelot.view.forms.structure_to_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a python data structure to a form, using the following rules :</p>
<blockquote>
<ul class="simple">
<li>if structure is an instance of Form, return structure</li>
<li>if structure is a list, create a Form from this list</li>
</ul>
</blockquote>
<p>This function is mainly used in the Admin class to construct forms out of
the form_display attribute</p>
</dd></dl>

</div>
<div class="section" id="customizing-forms">
<h2>Customizing Forms<a class="headerlink" href="#customizing-forms" title="Permalink to this headline">¶</a></h2>
<p>Several options exist for completely customizing the forms of an application.</p>
<div class="section" id="layout">
<h3>Layout<a class="headerlink" href="#layout" title="Permalink to this headline">¶</a></h3>
<p>When the desired layout cannot be achieved with Camelot&#8217;s form classes, a custom
Form subclass can be made to lay out the widgets.</p>
<p>When subclassing the Form class, it&#8217;s &#8216;render&#8217; method should be reimplemented to
put the labels and the editors in a custom layout.  The &#8216;render&#8217; method will be
called by Camelot each time it needs a form for the related entity.  It should thus
return a QWidget to be used as the needed form.</p>
<p>The &#8216;render&#8217; method its most important argument is widgets which is a dictionary
containing for each field of the form a widget representing the label of the field
and a widget for editing the field.  The editor widgets are bound to the
model.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span>

<span class="kn">from</span> <span class="nn">camelot.view</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">camelot.admin.entity_admin</span> <span class="kn">import</span> <span class="n">EntityAdmin</span>

<span class="k">class</span> <span class="nc">CustomForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CustomForm</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">([</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">])</span>
        
    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">widgets</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">nomargins</span> <span class="o">=</span> <span class="bp">False</span> <span class="p">):</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFormLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s">&#39;Please fill in the complete name :&#39;</span><span class="p">,</span> <span class="n">widget</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">_field_name</span><span class="p">,(</span><span class="n">field_label</span><span class="p">,</span> <span class="n">field_editor</span><span class="p">)</span> <span class="ow">in</span> <span class="n">widgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">field_label</span><span class="p">,</span> <span class="n">field_editor</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">setBackgroundRole</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">ToolTipBase</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">setAutoFillBackground</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">widget</span>

<span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">]</span>
    <span class="n">form_display</span> <span class="o">=</span> <span class="n">CustomForm</span><span class="p">()</span>
    <span class="n">form_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>The form defined above puts the widgets into a QFormLayout using a different
background color, and adds some instructions for the user :</p>
<img alt="../_images/custom_layout.png" src="../_images/custom_layout.png" />
</div>
<div class="section" id="editors">
<h3>Editors<a class="headerlink" href="#editors" title="Permalink to this headline">¶</a></h3>
<p>The editor of a specific field can be changed, by specifying an alternative delegate
for that field, using the field attributes, see <a class="reference external" href="delegates.html#specifying-delgates"><em>Specifying delegates</em></a>.</p>
</div>
<div class="section" id="tooltips">
<h3>Tooltips<a class="headerlink" href="#tooltips" title="Permalink to this headline">¶</a></h3>
<p>Each field on the form can be given a dynamic tooltip, using the &#8216;tooltip&#8217; field
attribute : <a class="reference external" href="delegates.html#tooltips"><em>tooltip</em></a>.</p>
</div>
<div class="section" id="buttons">
<h3>Buttons<a class="headerlink" href="#buttons" title="Permalink to this headline">¶</a></h3>
<p>Buttons bound to a specific action can be put on a form, using the &#8216;form_actions&#8217;
attribute of the Admin class : <a class="reference external" href="admin.html#form-actions"><em>Form View Actions</em></a>.</p>
</div>
<div class="section" id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h3>
<p>Validation is done at the object level.  Before a form is closed validation of the
bound object takes place, an invalid object will prevent closing the form.  A custom
validator can be defined : <a class="reference external" href="admin.html#validators"><em>Validators</em></a></p>
</div>
<div class="section" id="behaviour">
<h3>Behaviour<a class="headerlink" href="#behaviour" title="Permalink to this headline">¶</a></h3>
<p>To change what happens when Camelot requires a form for an object, some methods
on the Admin class can be overwritten :</p>
<blockquote>
<ul class="simple">
<li>create_form_view</li>
<li>create_new_view</li>
</ul>
</blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Creating Forms</a><ul>
<li><a class="reference external" href="#form">Form</a></li>
<li><a class="reference external" href="#inheritance-and-forms">Inheritance and Forms</a></li>
<li><a class="reference external" href="#putting-notes-on-forms">Putting notes on forms</a></li>
<li><a class="reference external" href="#module-camelot.view.forms">Available Form Subclasses</a></li>
<li><a class="reference external" href="#customizing-forms">Customizing Forms</a><ul>
<li><a class="reference external" href="#layout">Layout</a></li>
<li><a class="reference external" href="#editors">Editors</a></li>
<li><a class="reference external" href="#tooltips">Tooltips</a></li>
<li><a class="reference external" href="#buttons">Buttons</a></li>
<li><a class="reference external" href="#validation">Validation</a></li>
<li><a class="reference external" href="#behaviour">Behaviour</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="admin.html"
                                  title="previous chapter">Customizing the Admin classes</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="actions.html"
                                  title="next chapter">Actions</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/doc/forms.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="actions.html" title="Actions"
             >next</a> |</li>
        <li class="right" >
          <a href="admin.html" title="Customizing the Admin classes"
             >previous</a> |</li>
        <li><a href="../index.html">Camelot v0.1 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; <a href="../copyright.html">Copyright</a> 2009, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>