

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>neat — WSGI, neat &mdash; neat v0.4.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="neat v0.4.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">neat v0.4.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-neat">
<span id="neat-wsgi-neat"></span><h1><a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> &#8212; WSGI, neat<a class="headerlink" href="#module-neat" title="Permalink to this headline">¶</a></h1>
<p>neat is a <a class="reference external" href="http://wsgi.org/wsgi/">WSGI</a> micro framework that encourages API-centric development of web
applications. The framework is especially compatible with <a class="reference external" href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">REST</a> services and
APIs, though it can conceivably be used for more or less anything. Applications
implemented with neat are easy to test and produce data that is easy for clients
to consume.</p>
<div class="section" id="installing-neat">
<h2>Installing <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a><a class="headerlink" href="#installing-neat" title="Permalink to this headline">¶</a></h2>
<p>You can install the latest stable version of <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> using <strong class="command">pip</strong>:</p>
<div class="highlight-none"><div class="highlight"><pre>$ pip install neat
</pre></div>
</div>
<p>Public repositories for the project are hosted at <a class="reference external" href="http://github.com/wcmaier/neat">github</a> and <a class="reference external" href="http://bitbucket.org/wcmaier/neat">bitbucket</a>, so
you can use either <a class="reference external" href="http://git-scm.com/">git</a> or <a class="reference external" href="http://mercurial.selenic.com/">Mercurial</a> to get a copy of the project&#8217;s code
and history:</p>
<div class="highlight-none"><div class="highlight"><pre>$ hg clone http://bitbucket.org/wcmaier/neat
$ git clone git://github.com/wcmaier/neat.git
</pre></div>
</div>
<p>If you notice a problem with <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a>, please report it using the github
<a class="reference external" href="http://github.com/wcmaier/neat/issues">issue tracker</a> (or, if you have a fix, send a <a class="reference external" href="http://github.com/wcmaier/neat/pull/new/master">pull request</a>).</p>
<div class="section" id="a-note-about-versions">
<h3>A note about versions<a class="headerlink" href="#a-note-about-versions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> is developed along two branches. The first, &#8216;default&#8217; (or &#8216;master&#8217; in
git) contains new features and possible bugs &#8211; this branch is the active
development branch. The second, &#8216;stable&#8217;, contains releases both major and minor
as well as bugfixes. If you&#8217;d like to help improve <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a>, take a look at
default/master. Otherwise, stick with stable.</p>
</div>
</div>
<div class="section" id="a-quick-tour-of-neat-s-features">
<h2>A quick tour of <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a>&#8216;s features<a class="headerlink" href="#a-quick-tour-of-neat-s-features" title="Permalink to this headline">¶</a></h2>
<p>Hello world:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">neat</span> <span class="kn">import</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">Dispatch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">webob</span> <span class="kn">import</span> <span class="n">Request</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Hello</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">collection</span> <span class="o">=</span> <span class="s">&quot;hello&quot;</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s">&quot;Hello, </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">req</span><span class="o">.</span><span class="n">path_info_pop</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dispatch</span> <span class="o">=</span> <span class="n">Dispatch</span><span class="p">(</span><span class="n">Hello</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s">&quot;/hello/you&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">dispatch</span><span class="p">)</span><span class="o">.</span><span class="n">body</span>
<span class="go">&#39;Hello, you&#39;</span>
</pre></div>
</div>
<p>Easily add support for new media types:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">JsonHello</span><span class="p">(</span><span class="n">Hello</span><span class="p">):</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">mimetypes</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;application/javascript&quot;</span><span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">}</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">retrieve_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">req</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">content_type</span> <span class="o">=</span> <span class="s">&quot;application/json&quot;</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">&quot;message&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">req</span><span class="p">)})</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dispatch</span> <span class="o">=</span> <span class="n">Dispatch</span><span class="p">(</span><span class="n">JsonHello</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s">&quot;/hello/you&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">dispatch</span><span class="p">)</span><span class="o">.</span><span class="n">body</span>
<span class="go">&#39;{&quot;message&quot;: &quot;Hello, you&quot;}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> is a simple framework for modeling and representing resources
via HTTP. This approach takes full advantage of the structure of the
web, described by Roy Fielding in his famous <a class="reference external" href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">REST</a> paper. <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a>
applications include a single <a class="reference internal" href="#neat.neat.Dispatch" title="neat.neat.Dispatch"><tt class="xref py py-class docutils literal"><span class="pre">Dispatch</span></tt></a> that combines any
number of resources (usually subclasses of <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a>).
When a <a class="reference internal" href="#neat.neat.Dispatch" title="neat.neat.Dispatch"><tt class="xref py py-class docutils literal"><span class="pre">Dispatch</span></tt></a> receives a HTTP request, it routes the
request to <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> methods using rules defined by the
<a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> itself. The <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> methods
then interact with the data or state of the actual resource (for example, a
database) and return a representation of the current state to the client.
<a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> can support a variety of representations (like
JSON, HTML, CSV, XML), so the framework chooses the representation that best
matches the HTTP request&#8217;s Content header.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The rules for routing requests and choosing representation formats are all
defined by the <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a>, so different resources may define
different rules. If the default rules don&#8217;t suit you, simply override
<tt class="xref py py-meth docutils literal"><span class="pre">match()</span></tt>.</p>
</div>
</div>
<div class="section" id="module-neat.neat">
<span id="api"></span><h2>API<a class="headerlink" href="#module-neat.neat" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="neat.neat.Resource">
<em class="property">class </em><tt class="descclassname">neat.neat.</tt><tt class="descname">Resource</tt><a class="headerlink" href="#neat.neat.Resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="attribute">
<dt id="neat.neat.Resource.extensions">
<tt class="descname">extensions</tt><a class="headerlink" href="#neat.neat.Resource.extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps URI file extensions to media types.</p>
<p>For example:</p>
<blockquote>
.html -&gt; text/html
.json -&gt; application/vnd.my.resource+json</blockquote>
<p>The media types should be present in <a class="reference internal" href="#neat.neat.Resource.media" title="neat.neat.Resource.media"><tt class="xref py py-attr docutils literal"><span class="pre">media</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="neat.neat.Resource.media">
<tt class="descname">media</tt><a class="headerlink" href="#neat.neat.Resource.media" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps media types to local method suffixes.</p>
<p>For example:</p>
<blockquote>
text/html -&gt; html
application/vnd.my.resource+json -&gt; json</blockquote>
</dd></dl>

<dl class="attribute">
<dt id="neat.neat.Resource.methods">
<tt class="descname">methods</tt><a class="headerlink" href="#neat.neat.Resource.methods" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps HTTP methods to local method base names.</p>
<p>For example:</p>
<blockquote>
GET -&gt; get
POST -&gt; post</blockquote>
</dd></dl>

<dl class="attribute">
<dt id="neat.neat.Resource.params">
<tt class="descname">params</tt><a class="headerlink" href="#neat.neat.Resource.params" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of &#8216;magic&#8217; parameters.</p>
<p>These GET parameters allow less-than-perfect clients to use interesting HTTP
features even if the client itself doesn&#8217;t support them at the protocol
level. Keys in the dictionary represent the feature to be supported (ie &#8220;method&#8221;);
the value indicates the name of the GET parameter used to signal the
feature. For example, params = {&#8220;method&#8221;: &#8220;_method&#8221;} would allow clients to
set the HTTP method using the &#8220;_method&#8221; get parameter. By default, no magic
parameters are supported. Possible keys include:</p>
<blockquote>
<ul class="simple">
<li><em>method</em> (HTTP method)</li>
<li><em>accept</em> (desired response media type)</li>
<li><em>content-type</em> (request content type)</li>
</ul>
</blockquote>
</dd></dl>

<dl class="attribute">
<dt id="neat.neat.Resource.prefix">
<tt class="descname">prefix</tt><a class="headerlink" href="#neat.neat.Resource.prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI space for which this resource is responsible.</p>
</dd></dl>

<dl class="attribute">
<dt id="neat.neat.Resource.req">
<tt class="descname">req</tt><a class="headerlink" href="#neat.neat.Resource.req" title="Permalink to this definition">¶</a></dt>
<dd><p>A <tt class="xref py py-class docutils literal"><span class="pre">webob.Request</span></tt> instance.</p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">__call__()</span></tt> sets this attribute before calling one of the
&lt;method&gt;_&lt;media&gt; methods. It also sets the following attributes of the
request object:</p>
<blockquote>
<ul class="simple">
<li><em>response</em>, a <tt class="xref py py-class docutils literal"><span class="pre">webob.Response</span></tt> instance;</li>
<li><em>content</em>, an object produced by a handle_&lt;media&gt; method.</li>
</ul>
</blockquote>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="neat.neat.Dispatch">
<em class="property">class </em><tt class="descclassname">neat.neat.</tt><tt class="descname">Dispatch</tt><big>(</big><em>*resources</em><big>)</big><a class="headerlink" href="#neat.neat.Dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>A WSGI application that dispatches to other WSGI applications.</p>
<p>Incoming requests are passed to registered <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> subclasses.
Resources can be registered by passing them as arguments on initialization
or by adding them to <a class="reference internal" href="#neat.neat.Dispatch.resources" title="neat.neat.Dispatch.resources"><tt class="xref py py-attr docutils literal"><span class="pre">resources</span></tt></a> later.</p>
<dl class="method">
<dt id="neat.neat.Dispatch.match">
<tt class="descname">match</tt><big>(</big><em>req</em>, <em>resources</em><big>)</big><a class="headerlink" href="#neat.neat.Dispatch.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the resource that matches <em>req</em>.</p>
<p><em>req</em> should be a <tt class="xref py py-class docutils literal"><span class="pre">webob.Request</span></tt> instance; <em>resources</em> should be
an iterable of <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> subclasses. Returns None if no resource
matches the request.</p>
<p>A request matches if:</p>
<blockquote>
<ul class="simple">
<li>PATH_INFO ends in &#8216;/&#8217; and starts with the resource&#8217;s
<a class="reference internal" href="#neat.neat.Resource.prefix" title="neat.neat.Resource.prefix"><tt class="xref py py-attr docutils literal"><span class="pre">Resource.prefix</span></tt></a> attribute; or</li>
<li>PATH_INFO is the same as the resource&#8217;s <a class="reference internal" href="#neat.neat.Resource.prefix" title="neat.neat.Resource.prefix"><tt class="xref py py-attr docutils literal"><span class="pre">Resource.prefix</span></tt></a>
attribute.</li>
</ul>
</blockquote>
<p>The first match wins.</p>
</dd></dl>

<dl class="attribute">
<dt id="neat.neat.Dispatch.resources">
<tt class="descname">resources</tt><a class="headerlink" href="#neat.neat.Dispatch.resources" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#neat.neat.Resource" title="neat.neat.Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> subclasses.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="developing-neat">
<h2>Developing <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a><a class="headerlink" href="#developing-neat" title="Permalink to this headline">¶</a></h2>
<div class="section" id="running-the-tests">
<h3>Running the tests<a class="headerlink" href="#running-the-tests" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> ships with a number of unit tests that help ensure that the
code runs correctly. The tests live in the <tt class="xref py py-mod docutils literal"><span class="pre">tests</span></tt> package and can be run
by <tt class="docutils literal"><span class="pre">setup.py</span></tt>:</p>
<div class="highlight-python"><pre>$ python setup.py test</pre>
</div>
<p>All new code in <a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> should be accompanied by unit and/or functional
tests. You can get a sense for how completely the unit tests exercise
<a class="reference internal" href="#module-neat" title="neat"><tt class="xref py py-mod docutils literal"><span class="pre">neat</span></tt></a> by running the <a class="reference external" href="http://nedbatchelder.com/code/coverage/">coverage</a> tool:</p>
<div class="highlight-python"><pre>$ coverage run --branch setup.py test</pre>
</div>
<p><tt class="docutils literal"><span class="pre">coverage</span></tt> tracks the code statements and branches that the test suite
touches and can generate a report listing the lines of code that are
missed:</p>
<div class="highlight-python"><pre>$ coverage report -m --omit "tests,/home/will/lib,lib/neat/ext,setup"</pre>
</div>
<p>It&#8217;s useful to omit the third party code directory (<tt class="docutils literal"><span class="pre">ext</span></tt>) as well as
the path to the Python standard library as well as <tt class="docutils literal"><span class="pre">setup.py</span></tt> and the
tests themselves.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">neat</span></tt> &#8212; WSGI, neat</a><ul>
<li><a class="reference internal" href="#installing-neat">Installing <tt class="docutils literal"><span class="pre">neat</span></tt></a><ul>
<li><a class="reference internal" href="#a-note-about-versions">A note about versions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-quick-tour-of-neat-s-features">A quick tour of <tt class="docutils literal"><span class="pre">neat</span></tt>&#8216;s features</a></li>
<li><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li><a class="reference internal" href="#module-neat.neat">API</a></li>
<li><a class="reference internal" href="#developing-neat">Developing <tt class="docutils literal"><span class="pre">neat</span></tt></a><ul>
<li><a class="reference internal" href="#running-the-tests">Running the tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">neat v0.4.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Copyright (c) 2010 Will Maier &lt;willmaier@ml1.net&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.3.
    </div>
  </body>
</html>