<configure xmlns="http://namespaces.repoze.org/bfg">

  <!-- this must be included for the view declarations to work -->
  <include package="repoze.bfg.includes" />

  <subscriber for="repoze.bfg.interfaces.INewRequest"
    handler=".run.handle_teardown"/>

  <static
    name="static"
    path="templates/static"
    />

  <route
     path="login"
     name="login"
     view=".login.login"
     view_renderer="templates/login.pt"
     />

  <route
     path="logout"
     name="logout"
     view=".login.logout"
     />

  <route
    path=""
    name="view_wiki"
    view=".views.view_wiki"
    />
    
  <route
     path=":pagename"
     name="view_page"
     view=".views.view_page"
     view_renderer="templates/view.pt"
     />

  <route
     path="add_page/:pagename"
     name="add_page"
     view=".views.add_page"
     view_renderer="templates/edit.pt"
     view_permission="edit"
     />

  <route
     path=":pagename/edit_page"
     name="edit_page"
     view=".views.edit_page"
     view_renderer="templates/edit.pt"
     view_permission="edit"
     />

  <forbidden
     view=".login.login"
     renderer="templates/login.pt"/>

  <authtktauthenticationpolicy
    secret="sosecret"
    />

  <aclauthorizationpolicy/>

</configure>
