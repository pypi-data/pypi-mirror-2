##
## RNAspace: non-coding RNA annotation platform
## Copyright (C) 2009  CNRS, INRA, INRIA, Univ. Paris-Sud 11
## 
## This program is free software: you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation, either version 3 of the License, or
## (at your option) any later version.
## 
## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.
## 
## You should have received a copy of the GNU General Public License
## along with this program.  If not, see <http://www.gnu.org/licenses/>.
##

#from rnaspace.ui.view.rnaspace_template import rnaspace_template
#extends rnaspace_template

#def header_title: Error


#def predict_id
#if $authkey is None
notaccessible#slurp
#else
inactive#slurp
#end if
#end def

#def explore_id
#if $authkey is None
notaccessible#slurp
#else
inactive#slurp
#end if
#end def


#block import_ressources
<script type="text/javascript" 
	src="${mount_point}ressource/js/jquery.ui.core.min.js">
</script>
<script type="text/javascript" 
	src="${mount_point}ressource/js/jquery.ui.dialog.min.js">
</script>
<script type="text/javascript" 
	src="${mount_point}ressource/js/jquery.ui.draggable.min.js">
</script>
<script type="text/javascript" 
	src="${mount_point}ressource/js/jquery.ui.resizable.min.js">
</script>
<script type="text/javascript" 
	src="${mount_point}ressource/js/jquery.bgiframe.min.js">
</script>
<script type="text/javascript" 
	src="${mount_point}ressource/js/jquery.ui.alerts.js">
</script>
<link href="${mount_point}ressource/css/jquery.ui.core.css" 
      rel="stylesheet" type="text/css" media="screen" />
<link href="${mount_point}ressource/css/jquery.ui.dialog.css" rel="stylesheet" 
      type="text/css" media="screen" />
<link href="${mount_point}ressource/css/jquery.ui.theme.css" rel="stylesheet" 
      type="text/css" media="screen" />
#end block

#block jquery
var mount_point = "${mount_point}";
#if $authkey is not None
#raw
$("#predict_btn").attr("href", mount_point + "predict/index?authkey=" + $("#authkey").val());
$("#explore_btn").attr("href", mount_point + "explore/index?authkey=" + $("#authkey").val());
$("#manage_btn").attr("href", "");
$("#manage_btn").click(function() {
    jConfirm("If you get back on this page, you will restart a brand new project, keep on going ?", 'Confirm', function(r) {
        if ( r ) {
            document.location.replace(mount_point + "manage");
        }
    });
    return false;
});
#end raw
#end if

#raw
$("#help").attr("href", mount_point + "help");
#end raw

#end block

#block javascript
#end block

#block page_content
<input type="hidden" id="authkey" value="$authkey" />

<div class="cbb_header">
  <div class="cbb_title">Error</div>
      
  <div class="cbb_content"> <br /><br />
    <p>
      $content
    </p>
  </div>
</div>
#end block
