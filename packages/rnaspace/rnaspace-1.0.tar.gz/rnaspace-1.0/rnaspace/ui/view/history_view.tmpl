##
## RNAspace: non-coding RNA annotation platform
## Copyright (C) 2009  CNRS, INRA, INRIA, Univ. Paris-Sud 11
## 
## This program is free software: you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation, either version 3 of the License, or
## (at your option) any later version.
## 
## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.
## 
## You should have received a copy of the GNU General Public License
## along with this program.  If not, see <http://www.gnu.org/licenses/>.
##

#from rnaspace.ui.view.popup_template import popup_template
#extends popup_template

#def page_title: History

#block import_ressources
#end block

#block jquery
#raw
    // replace span by a link
    // so if javascript is not enable, there will be no empty link
    $("span.history_date").each( function () {
        var TextSpan = $(this).text();
        $(this).replaceWith('<a class="history_date" href="">' + TextSpan + '<\/a>');
    });

    // when we click on a history_date element, display event
    $("a.history_date").click( function () {
        $(this).next("div.date_entry").slideToggle("fast");
	return false;
    });
#end raw
#end block

#block javascript
#end block

#block page_content 

<h2>Predict History</h2>

#if $sorted_dates is None
<p>
  No entry
</p>
#else
#for $date in $sorted_dates
  <span class="history_date">$date</span>
  <div class="date_entry">
    <ul class="history">
      #for ($i, $event) in enumerate($history[$date])
        #if $i%2 == 0
          <li class="pair">$event</li>
	#else
	  <li class="impair">$event</li>
	#end if
      #end for
    </ul>
  </div>

#end for
#end if
#end block
