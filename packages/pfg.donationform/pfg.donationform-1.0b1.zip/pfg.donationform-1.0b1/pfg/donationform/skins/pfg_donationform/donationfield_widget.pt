<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="pfg.donationfield">

  <head><title></title></head>

  <body>

    <metal:view_macro define-macro="view">
    </metal:view_macro>

    <metal:define define-macro="edit">
      <metal:use use-macro="field_macro | here/widgets/field/macros/edit">
        <metal:fill fill-slot="widget_body">
        <p i18n:translate="">Please consider supporting us at one of the following levels.</p>
        <p>
          <tal:levels tal:repeat="level field/fgDonationLevels">
            <tal:defines tal:define="level_parts python:level.split('|');
                                     amount python:level_parts[0];
                                     formatted_amount python:'%.2f' % float(amount);
                                     label python:level_parts[1]">
              <input type="radio"
                     tal:attributes="value amount;
                                     name string:${fieldName}_level;
                                     checked python:request.form.get(fieldName + '_level') == amount and 'checked' or None"/>
              <span tal:replace="string:$$${formatted_amount} - ${label}"/><br/>
            </tal:defines>
          </tal:levels>
        </p>
        <p>
          <input type="radio" value = ""
                 tal:attributes="name string:${fieldName}_level;
                                 checked python:(not request.form.get(fieldName + '_level')) and 'checked' or None"/>
          <span onclick="jq(this).parent().children('input').click()">
          <span i18n:translate="">Or enter a donation amount:</span>
          $<input type="text"
                  size="4"
                  tal:attributes="name string:${fieldName}_amount;
                                  value python:request.form.get(fieldName + '_amount', field.fgCost)" />
          </span>
        </p>
        <p tal:condition="field/fgAllowRecurringPayments">
          <input type="checkbox"
                 tal:attributes="name string:${fieldName}_recurring;
                                 checked python:fieldName + '_recurring' in request.form and 'checked' or None"/>
          <tal:block i18n:translate="">Make this donation once a month for a total of
            <input type="text" size="2"
                   tal:attributes="name string:${fieldName}_occurrences;
                                   value python:request.form.get(fieldName + '_occurrences', '12')"
                   i18n:name="value_occurrences"/>
            months.
          </tal:block>
        </p>
        </metal:fill>
      </metal:use>
    </metal:define>

    <metal:define define-macro="search">
      <metal:field use-macro="here/donationfield_widget/macros/edit"/>
    </metal:define>
  </body>

</html>
