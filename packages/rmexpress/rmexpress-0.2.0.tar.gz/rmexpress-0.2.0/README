
rmexpress README
================

rmexpress is a command line utility that can permanently delete files or
directories from the user's home directory, provided that the path to the
file or directory, which is going to be deleted, matches a specific pattern.
When this functionality is combined with proper sudo configuration, it is
possible for the user to delete any files and directories that have been
created by other users, for instance a web server process, inside his own home
directory, provided that their paths match any of the patterns defined by the
system administrator.


Initial configuration
---------------------

Having installed the software, create a copy of the default configuration
file at /etc/rmexpress.conf. Invoke the following commands as root:

    cp /etc/rmexpress.conf.default /etc/rmexpress.conf

Edit the configuration options inside /etc/rmexpress.conf

Add secure permissions:

    chmod 0600 /etc/rmexpress.conf
    chown root /etc/rmexpress.conf
    chgrp root /etc/rmexpress.conf

Configure sudo. An example configuration exists in /etc/sudoers.rmexpress
Assuming that you want to allow the members of the ``vip`` group to use
rmexpress, add the following configuration at the end of /etc/sudoers:

    Cmnd_Alias    RMEXPRESS = /usr/local/bin/rmexpress, /usr/bin/rmexpress
    %vip          ALL = NOPASSWD: RMEXPRESS

All users belonging to the ``vip`` group should now be able to delete any
files or directories your configuration permits.


Usage
-----

A user can run (for example):

    sudo rmexpress /home/jsmith/public_html/cache/staticfiles
    cd /home/jsmith
    sudo rmexpress tmp/foo
    
Note that this version does not support globbing, so the following
is not possible:

    sudo rmexpress tmp/*

rmexpress supports some command line options. Check them out by running:

    rmexpress --help


Contributions
-------------

Contributions are welcome.


License
-------

This software is released under the terms of the Apache license version 2.
The full legal text of the license exists in the LICENSE file.
The NOTICE file also contains important copyright information.

