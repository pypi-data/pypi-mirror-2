<html>
<head>
<title>zinnia.views.search</title>
</head>
<body>
zinnia.views.search
<style>
.coverage pre {float: left; margin: 0px 1em; border: none;
               padding: 0px; }
.num pre { margin: 0px }
.nocov, .nocov pre {background-color: #faa}
.cov, .cov pre {background-color: #cfc}
div.coverage div { clear: both; height: 1.1em}
</style>
<div class="stats">
Covered: 21 lines<br/>
Missed: 0 lines<br/>
Skipped 6 lines<br/>
Percent: 100 %<br/>

</div>
<div class="coverage">
<div class="cov"><span class="num"><pre> 1</pre></span><pre>&quot;&quot;&quot;Views for Zinnia entries search&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 2</pre></span><pre>from django.utils.translation import ugettext as _</pre></div>
<div class="cov"><span class="num"><pre> 3</pre></span><pre>from django.views.generic.list_detail import object_list</pre></div>
<div class="skip"><span class="num"><pre> 4</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 5</pre></span><pre>from zinnia.models import Entry</pre></div>
<div class="skip"><span class="num"><pre> 6</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre> 7</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 8</pre></span><pre>def entry_search(request):</pre></div>
<div class="cov"><span class="num"><pre> 9</pre></span><pre>    &quot;&quot;&quot;Search entries matching with a pattern&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>10</pre></span><pre>    error = None</pre></div>
<div class="cov"><span class="num"><pre>11</pre></span><pre>    pattern = None</pre></div>
<div class="cov"><span class="num"><pre>12</pre></span><pre>    entries = Entry.published.none()</pre></div>
<div class="skip"><span class="num"><pre>13</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>14</pre></span><pre>    if request.GET:</pre></div>
<div class="cov"><span class="num"><pre>15</pre></span><pre>        pattern = request.GET.get('pattern', '')</pre></div>
<div class="cov"><span class="num"><pre>16</pre></span><pre>        if len(pattern) &lt; 3:</pre></div>
<div class="cov"><span class="num"><pre>17</pre></span><pre>            error = _('The pattern is too short')</pre></div>
<div class="cov"><span class="num"><pre>18</pre></span><pre>        else:</pre></div>
<div class="cov"><span class="num"><pre>19</pre></span><pre>            entries = Entry.published.search(pattern)</pre></div>
<div class="cov"><span class="num"><pre>20</pre></span><pre>    else:</pre></div>
<div class="cov"><span class="num"><pre>21</pre></span><pre>        error = _('No pattern to search found')</pre></div>
<div class="skip"><span class="num"><pre>22</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>23</pre></span><pre>    return object_list(request, queryset=entries,</pre></div>
<div class="cov"><span class="num"><pre>24</pre></span><pre>                        template_name='zinnia/entry_search.html',</pre></div>
<div class="cov"><span class="num"><pre>25</pre></span><pre>                        extra_context={'error': error,</pre></div>
<div class="cov"><span class="num"><pre>26</pre></span><pre>                                       'pattern': pattern})</pre></div>
<div class="skip"><span class="num"><pre>27</pre></span><pre></pre></div>
</div>
</body>
</html>
