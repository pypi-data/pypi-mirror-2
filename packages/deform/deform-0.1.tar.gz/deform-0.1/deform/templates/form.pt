<form
  tal:attributes="id field.name or None"
  action="${field.action}"
  class="wufoo"
  method="${field.method}"
  enctype="multipart/form-data"
  accept-charset="utf-8"
  i18n:domain="deform">

  <fieldset class="deformFormFieldset">

    <legend tal:condition="field.title">${field.title}</legend>

    <input type="hidden" name="_charset_" />
    <input tal:condition="field.formid"
           type="hidden" name="__formid__" tal:attributes="value field.formid"/>
    <ul>
      
      <li class="errorLi" tal:condition="field.error">
        <h3 class="errorMsgLbl" i18n:translate=""
            >There was a problem with your submission</h3>
        <p class="errorMsg" i18n:translate=""
           >Errors have been highlighted below</p>
      </li>
      
      <li class="section first" tal:condition="field.title">
        <h3>${field.title}</h3>
        <div tal:condition="field.description">${field.description}</div>
      </li>
      
      <div 
          tal:define="rndr field.renderer;
                      tmpl field.widget.item_template"
          tal:repeat="f field.children"
          tal:replace="structure 
                       rndr(tmpl,field=f,cstruct=cstruct.get(f.name))"/>
      
      <li class="buttons">
        <tal:block repeat="button field.buttons">
          <button 
              tal:attributes="id (field.formid or '') + button.name"
              name="${button.name}"
              type="submit"
              class="btnText submit"
              value="${button.value}">
            <span>${button.title}</span>
          </button>
        </tal:block>
      </li>
      
    </ul>
    
  </fieldset>
  
</form>
