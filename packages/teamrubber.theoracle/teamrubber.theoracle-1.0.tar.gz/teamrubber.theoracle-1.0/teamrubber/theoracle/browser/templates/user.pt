<div class="section">
<h2>User Information</h2>
<dl>
    <dt>User ID</dt>
    <dd tal:content="view/getUserName" tal:on-error="string:Error" />

    <dt>User folder</dt>
    <dd tal:content="view/getPAS" tal:on-error="string:Error" />


    <dt>Roles</dt>
    <dd tal:content="view/getRoles" tal:on-error="string:Error" />

    <dt>Roles in context</dt>
    <dd tal:content="view/getRolesInContext" tal:on-error="string:Error" />
</dl>
</div>

<div class="section" tal:define="valid_roles view/getValidRoles">

    <h2>Permissions</h2>
    <table tal:define="assignments view/getPermissions">
        <thead>
            <tr>
                <td>Permission</td>
                <td>Valid</td>
                <td tal:repeat="role valid_roles" tal:content="role"></td>
            </tr>
            
        </thead>
        
        <tr tal:repeat="permission assignments" tal:attributes="class python:repeat['permission'].odd() and 'odd' or 'even';">

            <tal:row tal:define="perm_class python:assignments[permission]['___VALID'] and 'valid_permission' or 'invalid_permission'">
                <td tal:content="permission" />
                <td tal:content="python:assignments[permission]['___VALID'] and 'Yes' or 'No'" tal:attributes="class perm_class"></td>
                
                <tal:roles tal:repeat="role valid_roles">
                    <td class="role" tal:define="value python:assignments[permission].get(role)">
                        <span tal:condition="python:value == 0">Yes</span>
                        <span tal:condition="python:value > 0">Yes (<span tal:replace="value" />)</span>
                    </td>
                </tal:roles>
                
            </tal:row>
        </tr>
    </table>
</div>
