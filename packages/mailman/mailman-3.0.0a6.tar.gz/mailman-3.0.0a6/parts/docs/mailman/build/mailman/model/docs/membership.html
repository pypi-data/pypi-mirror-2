

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>List memberships &mdash; mailman v3.0.0a6 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.0.0a6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="mailman v3.0.0a6 documentation" href="../../index.html" />
    <link rel="next" title="The message store" href="messagestore.html" />
    <link rel="prev" title="Mailing lists" href="mailinglist.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="messagestore.html" title="The message store"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mailinglist.html" title="Mailing lists"
             accesskey="P">previous</a> |</li>
        <li><a href="../../docs/README.html">mailman v3.0.0a6 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="list-memberships">
<h1>List memberships<a class="headerlink" href="#list-memberships" title="Permalink to this headline">¶</a></h1>
<p>Users represent people in Mailman.  Users control email addresses, and rosters
are collections of members.  A member gives an email address a role, such as
<cite>member</cite>, <cite>administrator</cite>, or <cite>moderator</cite>.  Roster sets are collections of
rosters and a mailing list has a single roster set that contains all its
members, regardless of that member&#8217;s role.</p>
<p>Mailing lists and roster sets have an indirect relationship, through the
roster set&#8217;s name.  Roster also have names, but are related to roster sets
by a more direct containment relationship.  This is because it is possible to
store mailing list data in a different database than user data.</p>
<p>When we create a mailing list, it starts out with no members...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mlist</span> <span class="o">=</span> <span class="n">create_list</span><span class="p">(</span><span class="s">&#39;_xtest@example.com&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlist</span>
<span class="go">&lt;mailing list &quot;_xtest@example.com&quot; at ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>...no owners...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>...no moderators...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>...and no administrators.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span>
<span class="gp">... </span>       <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<div class="section" id="administrators">
<h2>Administrators<a class="headerlink" href="#administrators" title="Permalink to this headline">¶</a></h2>
<p>A mailing list&#8217;s administrators are defined as union of the list&#8217;s owners and
the list&#8217;s moderators.  We can add new owners or moderators to this list by
assigning roles to users.  First we have to create the user, because there are
no users in the user database yet.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mailman.interfaces.usermanager</span> <span class="kn">import</span> <span class="n">IUserManager</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zope.component</span> <span class="kn">import</span> <span class="n">getUtility</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_manager</span> <span class="o">=</span> <span class="n">getUtility</span><span class="p">(</span><span class="n">IUserManager</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_1</span> <span class="o">=</span> <span class="n">user_manager</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s">&#39;aperson@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;Anne Person&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">user_1</span><span class="o">.</span><span class="n">real_name</span>
<span class="go">Anne Person</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">user_1</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;]</span>
</pre></div>
</div>
<p>We can add Anne as an owner of the mailing list, by creating a member role for
her.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mailman.interfaces.member</span> <span class="kn">import</span> <span class="n">MemberRole</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_1</span><span class="o">.</span><span class="n">addresses</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">address_1</span><span class="o">.</span><span class="n">address</span>
<span class="go">aperson@example.com</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_1</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mlist</span><span class="p">,</span> <span class="n">MemberRole</span><span class="o">.</span><span class="n">owner</span><span class="p">)</span>
<span class="go">&lt;Member: Anne Person &lt;aperson@example.com&gt; on</span>
<span class="go">         _xtest@example.com as MemberRole.owner&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[u&#39;Anne Person&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;]</span>
</pre></div>
</div>
<p>Adding Anne as a list owner also makes her an administrator, but does not make
her a moderator.  Nor does it make her a member of the list.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[u&#39;Anne Person&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>We can add Ben as a moderator of the list, by creating a different member role
for him.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user_2</span> <span class="o">=</span> <span class="n">user_manager</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s">&#39;bperson@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;Ben Person&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">user_2</span><span class="o">.</span><span class="n">real_name</span>
<span class="go">Ben Person</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_2</span><span class="o">.</span><span class="n">addresses</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">address_2</span><span class="o">.</span><span class="n">address</span>
<span class="go">bperson@example.com</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_2</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mlist</span><span class="p">,</span> <span class="n">MemberRole</span><span class="o">.</span><span class="n">moderator</span><span class="p">)</span>
<span class="go">&lt;Member: Ben Person &lt;bperson@example.com&gt;</span>
<span class="go">         on _xtest@example.com as MemberRole.moderator&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[u&#39;bperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[u&#39;Ben Person&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;bperson@example.com&#39;]</span>
</pre></div>
</div>
<p>Now, both Anne and Ben are list administrators.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span>
<span class="gp">... </span>       <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;, u&#39;bperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">real_name</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
<span class="go">[u&#39;Anne Person&#39;, u&#39;Ben Person&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;, u&#39;bperson@example.com&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<p>Similarly, list members are born of users being given the proper role.  It&#8217;s
more interesting here because these roles should have a preference which can
be used to decide whether the member is to get regular delivery or digest
delivery.  Without a preference, Mailman will fall back first to the address&#8217;s
preference, then the user&#8217;s preference, then the list&#8217;s preference.  Start
without any member preference to see the system defaults.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user_3</span> <span class="o">=</span> <span class="n">user_manager</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s">&#39;cperson@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;Claire Person&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">user_3</span><span class="o">.</span><span class="n">real_name</span>
<span class="go">Claire Person</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_3</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_3</span><span class="o">.</span><span class="n">addresses</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">address_3</span><span class="o">.</span><span class="n">address</span>
<span class="go">cperson@example.com</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">address_3</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mlist</span><span class="p">,</span> <span class="n">MemberRole</span><span class="o">.</span><span class="n">member</span><span class="p">)</span>
<span class="go">&lt;Member: Claire Person &lt;cperson@example.com&gt;</span>
<span class="go">         on _xtest@example.com as MemberRole.member&gt;</span>
</pre></div>
</div>
<p>Claire will be a regular delivery member but not a digest member.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;cperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">regular_members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;cperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">digest_members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>It&#8217;s easy to make the list administrators members of the mailing list too.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">members</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">addresses</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">member</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mlist</span><span class="p">,</span> <span class="n">MemberRole</span><span class="o">.</span><span class="n">member</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">members</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">members</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">m</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="go">[&lt;Member: Anne Person &lt;aperson@example.com&gt; on</span>
<span class="go">          _xtest@example.com as MemberRole.member&gt;,</span>
<span class="go"> &lt;Member: Ben Person &lt;bperson@example.com&gt; on</span>
<span class="go">          _xtest@example.com as MemberRole.member&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;, u&#39;bperson@example.com&#39;, u&#39;cperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">regular_members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[u&#39;aperson@example.com&#39;, u&#39;bperson@example.com&#39;, u&#39;cperson@example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">address</span> <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">mlist</span><span class="o">.</span><span class="n">digest_members</span><span class="o">.</span><span class="n">addresses</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
</div>
<div class="section" id="finding-members">
<h2>Finding members<a class="headerlink" href="#finding-members" title="Permalink to this headline">¶</a></h2>
<p>You can find the <tt class="docutils literal"><span class="pre">IMember</span></tt> object that is a member of a roster for a given
text email address by using the <tt class="docutils literal"><span class="pre">IRoster.get_member()</span></tt> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mlist</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="s">&#39;aperson@example.com&#39;</span><span class="p">)</span>
<span class="go">&lt;Member: Anne Person &lt;aperson@example.com&gt; on</span>
<span class="go">         _xtest@example.com as MemberRole.owner&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="s">&#39;aperson@example.com&#39;</span><span class="p">)</span>
<span class="go">&lt;Member: Anne Person &lt;aperson@example.com&gt; on</span>
<span class="go">         _xtest@example.com as MemberRole.owner&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="s">&#39;aperson@example.com&#39;</span><span class="p">)</span>
<span class="go">&lt;Member: Anne Person &lt;aperson@example.com&gt; on</span>
<span class="go">         _xtest@example.com as MemberRole.member&gt;</span>
</pre></div>
</div>
<p>However, if the address is not subscribed with the appropriate role, then None
is returned.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">mlist</span><span class="o">.</span><span class="n">administrators</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="s">&#39;zperson@example.com&#39;</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">mlist</span><span class="o">.</span><span class="n">moderators</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="s">&#39;aperson@example.com&#39;</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">mlist</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">get_member</span><span class="p">(</span><span class="s">&#39;zperson@example.com&#39;</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
</div>
<div class="section" id="all-subscribers">
<h2>All subscribers<a class="headerlink" href="#all-subscribers" title="Permalink to this headline">¶</a></h2>
<p>There is also a roster containing all the subscribers of a mailing list,
regardless of their role.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">sortkey</span><span class="p">(</span><span class="n">member</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">role</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">member</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">member</span><span class="o">.</span><span class="n">role</span><span class="p">))</span>
<span class="gp">... </span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">mlist</span><span class="o">.</span><span class="n">subscribers</span><span class="o">.</span><span class="n">members</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sortkey</span><span class="p">)]</span>
<span class="go">[(u&#39;aperson@example.com&#39;, &#39;MemberRole.member&#39;),</span>
<span class="go"> (u&#39;aperson@example.com&#39;, &#39;MemberRole.owner&#39;),</span>
<span class="go"> (u&#39;bperson@example.com&#39;, &#39;MemberRole.member&#39;),</span>
<span class="go"> (u&#39;bperson@example.com&#39;, &#39;MemberRole.moderator&#39;),</span>
<span class="go"> (u&#39;cperson@example.com&#39;, &#39;MemberRole.member&#39;)]</span>
</pre></div>
</div>
</div>
<div class="section" id="double-subscriptions">
<h2>Double subscriptions<a class="headerlink" href="#double-subscriptions" title="Permalink to this headline">¶</a></h2>
<p>It is an error to subscribe someone to a list with the same role twice.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">address_1</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mlist</span><span class="p">,</span> <span class="n">MemberRole</span><span class="o">.</span><span class="n">owner</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">AlreadySubscribedError</span>: <span class="n-Identifier">aperson@example.com is already a MemberRole.owner</span>
<span class="go">of mailing list _xtest@example.com</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../docs/README.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">List memberships</a><ul>
<li><a class="reference internal" href="#administrators">Administrators</a></li>
<li><a class="reference internal" href="#members">Members</a></li>
<li><a class="reference internal" href="#finding-members">Finding members</a></li>
<li><a class="reference internal" href="#all-subscribers">All subscribers</a></li>
<li><a class="reference internal" href="#double-subscriptions">Double subscriptions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mailinglist.html"
                        title="previous chapter">Mailing lists</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="messagestore.html"
                        title="next chapter">The message store</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/model/docs/membership.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="messagestore.html" title="The message store"
             >next</a> |</li>
        <li class="right" >
          <a href="mailinglist.html" title="Mailing lists"
             >previous</a> |</li>
        <li><a href="../../docs/README.html">mailman v3.0.0a6 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright The Mailman Developers.
      Last updated on Sep 20, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>