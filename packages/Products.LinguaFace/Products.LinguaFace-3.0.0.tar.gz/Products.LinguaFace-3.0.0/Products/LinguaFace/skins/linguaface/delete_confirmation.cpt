<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="linguaplone">

<body>

   <div metal:fill-slot="main"
        tal:define="is_translatable python:here.linguaface_tool.isTranslatable(here);
					deletable_languages python:is_translatable and here.getDeletableLanguages() or [];
                    untranslated_languages python:is_translatable and here.getUntranslatedLanguages() or [];
                    useSelf python:isStructuralFolder and not isContextDefaultPage;
                    folder_warning python:useSelf and here.portal_type != 'Topic';">

      <i18n:div domain="plone">

      <h1 i18n:translate="alert_really_delete_folder"
          tal:condition="folder_warning">
        Do you really want to delete this folder and all its contents?
      </h1>

      <h1 i18n:translate="alert_really_delete"
          tal:condition="not:folder_warning">
        Do you really want to delete this item?
      </h1>

      <fieldset>

      <ul>
          <li tal:content="object_title">The item title (ID)</li>
      </ul>

      <form method="POST"
            action="#"
            tal:attributes="action current_page_url">
        <div class="formControls">

          <input type="hidden"
                 name="form.submitted"
                 value="1"
                 />

          <input class="destructive"
                 type="submit"
                 value="Delete"
                 i18n:attributes="value;"
                 />
          <input class="standalone"
                 type="submit"
                 value="Cancel"
                 name="form.button.Cancel"
                 i18n:attributes="value label_cancel;"
                 />
        </div>

      </form>
      </fieldset>
      </i18n:div>

<tal:comment replace="nothing">
        <h2 i18n:translate="header_link_translations">
            Link translations
        </h2>

        <p tal:condition="untranslated_languages"
           i18n:translate="description_link_translations">
            Link another existing content as a translation for
            the current one in the selected language.
        </p>

        <p class="documentDescription"
           tal:condition="not:untranslated_languages"
           i18n:translate="description_no_linkable_translations">
            There is no untranslable language to link to.
        </p>

        <form name="linkTranslation"
              method="post"
              action=""
              class="group"
              tal:condition="untranslated_languages"
              tal:attributes="action here/absolute_url">

            <div class="field">

                <label for="link_language"
                       i18n:translate="label_link_language">Language</label>

                <div class="formHelp" i18n:translate="help_link_language">
                    Select the language that the translation will be linked as.
                </div>

                <div tal:repeat="lang untranslated_languages"
                     tal:define="content_language context/Language">
                    <input type="radio"
                           class="noborder"
                           id="link"
                           name="link_language"
                           tal:attributes="value python:lang[0];
                                           id python:'link_' + lang[0];
                                           checked python:content_language == lang[0]"
                           />
                    <label for=""
                           tal:attributes="for python:'link_' + lang[0]"
                           tal:content="python:lang[1]"
                           />
                </div>

            </div>

            <div class="field"
                 tal:define="startup_directory python:here.referencebrowser_startupDirectory('');
                             value request/link_content | nothing;
                             fieldName string:link_content;
                             fieldRealName fieldName;
                             at_url python:'/'.join(here.getPhysicalPath());
                 ">

                <label for="link_content_browse"
                       i18n:translate="label_link_content">Content</label>

                <div class="formHelp" i18n:translate="help_link_content">
                    Select the content to link as a translation.
                </div>

                <tal:value tal:condition="value">
                    <input size="30"
                           type="text"
                           id="link_content_label"
                           readonly="readonly"
                           value=""
                           tal:define="obj python:here.reference_catalog.lookupObject(value)"
                           tal:attributes="value obj/title_or_id"
                           />
                </tal:value>

                <input tal:condition="not:value"
                       id="link_content_label"
                       size="50"
                       type="text"
                       readonly="readonly"
                       value="No translation content selected. Click the browse button to select."
                       i18n:attributes="value label_no_translation_selected;"
                       />

                <input type="hidden"
                       name="link_content"
                       id="link_content"
                       value=""
                       tal:attributes="value value"
                       />

                <input type="button"
                       name="link_content_browse"
                       class="searchButton"
                       value="Browse..."
                       onClick=""
                       i18n:attributes="value label_browse;"
                       tal:attributes="onClick string:javascript:referencebrowser_openBrowser('${startup_directory}','${fieldName}', '${at_url}', '${fieldRealName}')"
                       />

                <script type="text/javascript"
                        charset="iso-8859-1"
                        src="referencebrowser.js"
                        tal:attributes="src string:$portal_url/referencebrowser.js"></script>

            </div>

            <div class="formControls">
                <input class="context"
                       type="submit"
                       name="linkTranslation:method"
                       i18n:attributes="value label_link_translation;"
                       value="Link Translation"
                       />
            </div>

        </form>
</tal:comment>

	<tal:translations_delete condition="is_translatable">

        <h2 i18n:translate="header_remove_translations">
            Remove translations
        </h2>

        <p tal:condition="deletable_languages"
           i18n:translate="description_remove_translations">
            Select translations to remove.
        </p>

        <p class="documentDescription"
           tal:condition="not:deletable_languages"
           i18n:translate="description_no_removable_translations">
            There are no translations to remove.
        </p>

        <form name="deleteLanguage"
              method="post"
              action=""
              class="group"
              tal:condition="deletable_languages"
              tal:attributes="action here/absolute_url">

            <fieldset>

                <legend i18n:translate="legend_existing_translations">
                    Existing translations
                </legend>

                <div class="field">
                    <div tal:repeat="lang deletable_languages">
                      <tal:block define="title python:lang[2];
                                         codeLang python:lang[0];
                                         infoslang python:lang[1];">
                        <input type="checkbox"
                               class="noborder"
                               id="remove_language"
                               name="languages:list"
                               tal:attributes="value codeLang;
                                               id python:'remove_' + codeLang"
                               />
                        <label for="remove_language"
                               tal:attributes="for python:'remove_' + codeLang"
                               tal:content="python: '%s (%s)' %(title, codeLang or 'neutral')"
                               />
                        &nbsp;
                        <tal:flag condition="python: same_type(infoslang, {})">
                            <img tal:attributes="src string:$portal_url${infoslang/flag}" />
                        </tal:flag>
                      </tal:block>
                    </div>
                </div>

                <div class="formControls">
                    <input class="destructive"
                           type="submit"
                           name="deleteTranslations:method"
                           i18n:domain="plone"
                           i18n:attributes="value"
                           value="Delete"
                           />
                </div>

            </fieldset>

        </form>
	</tal:translations_delete>

    </div>

</body>
</html>
