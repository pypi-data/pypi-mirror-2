
<VirtualHost *:80>
    ServerAdmin webmasters@manicsages.org
    ServerName comsat.manicsages.org

    ErrorLog /var/log/apache2/comsat_balancer.error_log
    CustomLog "|/usr/sbin/rotatelogs -f /var/log/apache2/comsat_balancer.access_log.%Y-%m%d-%H%M 16M" common

    DocumentRoot "/var/www/comsat/comsat/static"

    <Location "/">
    	SetHandler python-program
        PythonInterpreter comsat_balancer
	PythonHandler django.core.handlers.modpython
	SetEnv DJANGO_SETTINGS_MODULE settings
	PythonPath "['/var/www/comsat/comsat'] + sys.path"
    </Location>

    <Directory "/var/www/comsat/comsat/static">
        Options Indexes FollowSymLinks
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>

    <IfModule peruser.c>
        # this must match a Processor
        ServerEnvironment apache apache

        # these are optional - defaults to the values specified in httpd.conf
        MinSpareProcessors 4
        MaxProcessors 20
    </IfModule>

    <IfModule itk.c>
        # The userid and groupid this VirtualHost will run as
        AssignUserID apache apache

        # Optional: A separate MaxClients for the VirtualHost,
        # to limit the maximum number of processes
        MaxClientsVHost 1000

        # Note that if you do not assign a user ID for your
        # VirtualHosts, none will be assigned by default,
        # ie. you'll run as root. Don't forget this!
    </IfModule>
</VirtualHost>

# vim:syntax=apache
