<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:main fill-slot="main">
    <div metal:define-macro="main"
         i18n:domain="pcommerce"
         tal:define="errors view/errors|nothing;
                     payment view/payment_method;
                     address view/order/delivery|nothing;
                     memberInfo view/member_info|nothing"
         id="checkout">
      
      <h1 class="documentFirstHeading" i18n:translate="checkout_title">
        Check out
      </h1>

      <form name=""
            id="checkout"
            method="post"
            action=""
            tal:attributes="action string:${context/absolute_url}/@@checkout">
        
        <input name="pcommerce.delivery.edit" value="1" type="hidden" />
                       
        <div class="formControls">
          <input class="context next" name="pcommerce.delivery" value="Next step" type="submit"
                 i18n:attributes="value" />
          <input class="standalone" name="pcommerce.cancel" value="Cancel checkout" type="submit"
                 i18n:attributes="value" />
        </div>
        
        <fieldset id="delivery">
          
          <legend i18n:translate="">
            Delivery address
          </legend>
  
          <metal:address use-macro="context/@@pcommerce_macros/addressForm" />
                       
        </fieldset>
        
        <fieldset id="billing">
          
          <legend i18n:translate="">
            <tal:payment i18n:translate="">Payment method</tal:payment>
            <span class="fieldRequired"
                  title="Required"
                  tal:condition="not: view/payment_method"
                  i18n:domain="plone"
                  i18n:attributes="title title_required;"
                  i18n:translate="label_required">
                (Required)
            </span>
          </legend>
          
          <metal:payment tal:condition="payment"
                         use-macro="context/@@pcommerce_macros/paymentInfo" />
          
          <div class="field" tal:condition="not: payment"
               tal:attributes="class python:'field'+(errors.has_key('payment_id') and ' error' or '')">
      
            <div tal:condition="python:errors.has_key('payment_id')"
                 tal:content="errors/payment_id|nothing">
                The Error
            </div>
      
            <div class="widget"
                 tal:repeat="payment view/payments">
              <label tal:attributes="title payment/description">
                <input type="radio" name="payment_id" value=""
                       tal:attributes="value payment/id" />
                <span tal:replace="payment/title">Title</span>
                <img src="" tal:condition="payment/icon" tal:attributes="src payment/icon" />
              </label>
            </div>
      
          </div>
          
        </fieldset>
      
        <div class="field"
             tal:attributes="class python:'field'+(errors.has_key('gtc') and ' error' or '')">
          <div tal:condition="python:errors.has_key('gtc')"
               tal:content="errors/gtc|nothing">
              The Error
          </div>
          <label>
              <input id="test" class="noborder" name="gtc:boolean" type="checkbox" value="1">
              <tal:label i18n:translate="">I accept the <a href="" target="_blank" i18n:name="link" tal:attributes="href view/gtc" i18n:translate="">general terms and conditions</a></tal:label>
          </label>
          <span class="fieldRequired"
                title="Required"
                i18n:domain="plone"
                i18n:attributes="title title_required;"
                i18n:translate="label_required">
              (Required)
          </span>
        </div>
                       
        <div class="formControls">
          <input class="context next" name="pcommerce.delivery" value="Next step" type="submit"
                 i18n:attributes="value" />
          <input class="standalone" name="pcommerce.cancel" value="Cancel checkout" type="submit"
                 i18n:attributes="value" />
        </div>
      </form>

    </div>
</metal:main>

</body>
</html>