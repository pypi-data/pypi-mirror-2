<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:main fill-slot="main">
    <div metal:define-macro="main"
         i18n:domain="pcommerce"
         tal:define="errors view/errors|nothing;
                     payment view/payment_method;
                     address view/order/delivery|nothing"
         id="checkout">
                      
      <h1 class="documentFirstHeading" i18n:translate="checkout_title">
        Check out
      </h1>

      <form name=""
            id="checkout"
            method="post"
            action=""
            tal:attributes="action string:${context/absolute_url}/@@checkout">
          
        <input name="pcommerce.pre.edit" value="1" type="hidden" />
                       
        <div class="formControls">
          <input class="context previous" name="pcommerce.edit.delivery" value="Previous step" type="submit"
                 i18n:attributes="value" />
          <input class="context next" name="pcommerce.pre" value="Next step" type="submit"
                 i18n:attributes="value" />
          <input class="standalone" name="pcommerce.cancel" value="Cancel checkout" type="submit"
                 i18n:attributes="value" />
        </div>
        
        <fieldset id="delivery">
          
          <legend i18n:translate="">
            Delivery address
          </legend>
        
          <a href="" class="editLink" title="Edit delivery address"
             tal:attributes="href string:${portal_url}/@@checkout?pcommerce.edit.delivery"
             i18n:attributes="title">
            <img src="edit.gif" alt="Edit" i18n:translate="alt label_edit" i18n:domain="plone" /> 
          </a>
  
          <metal:address use-macro="context/@@pcommerce_macros/addressInfo" />
                       
        </fieldset>
        
        <fieldset id="billing">
          
          <legend i18n:translate="">
            Payment method
          </legend>
          
          <metal:payment tal:condition="payment"
                         use-macro="context/@@pcommerce_macros/paymentInfo" />
                         
          <div tal:replace="structure view/pre_payment" />
          
        </fieldset>
                       
        <div class="formControls">
          <input class="context previous" name="pcommerce.delivery" value="Previous step" type="submit"
                 i18n:attributes="value" />
          <input class="context next" name="pcommerce.pre" value="Next step" type="submit"
                 i18n:attributes="value" />
          <input class="standalone" name="pcommerce.cancel" value="Cancel checkout" type="submit"
                 i18n:attributes="value" />
        </div>
      </form>

    </div>
</metal:main>

</body>
</html>