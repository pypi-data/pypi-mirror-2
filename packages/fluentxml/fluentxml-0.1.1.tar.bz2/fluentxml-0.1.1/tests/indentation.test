>>> import fluentxml
>>> from fluentxml import Document, ParserWOIndentationNode

>>> data = '<?xml version="1.0"?>\n<?quux bar foo?>\n<?qux xyzzy="baz" foobar="waldo"?>\n<foo xmlns="foobar" xmlns:a="toto">\n  <a:bar>data</a:bar>\n  <baz>re</baz>\n  <stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" id="c2s&amp;123">\n    <a>&quot;&amp;&lt;&gt;</a>\n  </stream:stream>\n</foo>\n'
>>> data2 = '<?xml version="1.0"?>\n<?quux bar foo?>\n<?qux xyzzy="baz" foobar="waldo"?>\n<foo xmlns="foobar" xmlns:a="toto"><a:bar>data</a:bar><baz>re</baz><stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" id="c2s&amp;123"><a>&quot;&amp;&lt;&gt;</a></stream:stream></foo>\n'

>>> fluentxml.open = File(data)
>>> d = Document.load('/dev/null', parser_class=ParserWOIndentationNode)
>>> d.instructions
[('quux', 'bar foo'), ('qux', 'xyzzy="baz" foobar="waldo"')]
>>> d.root
Node('foo', {'xmlns': 'foobar', 'xmlns:a': 'toto'}, [ANode('bar', children=['data']), Node('baz', children=['re']), StreamNode('stream', {'xmlns': 'jabber:client', 'xmlns:stream': 'http://etherx.jabber.org/streams', 'id': 'c2s&123'}, [Node('a', children=['"&<>'])])])

>>> fluentxml.open = File()
>>> d.save()
>>> fluentxml.open.content == data2
True

>>> fluentxml.open = File()
>>> d.save(pretty=True)
>>> fluentxml.open.content == data
True

>>> fluentxml.open = File(data)
>>> d = Document.load('/dev/null')
>>> d.instructions
[('quux', 'bar foo'), ('qux', 'xyzzy="baz" foobar="waldo"')]
>>> d.root
Node('foo', {'xmlns': 'foobar', 'xmlns:a': 'toto'}, ['\n  ', ANode('bar', children=['data']), '\n  ', Node('baz', children=['re']), '\n  ', StreamNode('stream', {'xmlns': 'jabber:client', 'xmlns:stream': 'http://etherx.jabber.org/streams', 'id': 'c2s&123'}, ['\n    ', Node('a', children=['"&<>']), '\n  ']), '\n'])

>>> fluentxml.open = File()
>>> d.save()
>>> fluentxml.open.content == data
True
