>>> import fluentxml
>>> from fluentxml import Document, ParserWOIndentationNode

>>> data = u'<?xml version="1.0"?>\n<?quux bar foo?>\n<?qux xyzzy="baz" foobar="waldo"?>\n<foo xmlns="foobar" xmlns:a="toto">\n  <a:bar>data</a:bar>\n  <baz>re</baz>\n  <stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" id="c2s&amp;123">\n    <a>&quot;&amp;&lt;&gt;</a>\n  </stream:stream>\n</foo>\n'
>>> data2 = u'<?xml version="1.0"?>\n<?quux bar foo?>\n<?qux xyzzy="baz" foobar="waldo"?>\n<foo xmlns="foobar" xmlns:a="toto"><a:bar>data</a:bar><baz>re</baz><stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" id="c2s&amp;123"><a>&quot;&amp;&lt;&gt;</a></stream:stream></foo>\n'

>>> fluentxml.open = File(data)
>>> d = Document.load('/dev/null', parser_class=ParserWOIndentationNode)
>>> d.instructions
[(u'quux', u'bar foo'), (u'qux', u'xyzzy="baz" foobar="waldo"')]
>>> d.root
Node(u'foo', {u'xmlns': u'foobar', u'xmlns:a': u'toto'}, [ANode(u'bar', children=[u'data']), Node(u'baz', children=[u're']), StreamNode(u'stream', {u'xmlns': u'jabber:client', u'xmlns:stream': u'http://etherx.jabber.org/streams', u'id': u'c2s&123'}, [Node(u'a', children=[u'"&<>'])])])

>>> fluentxml.open = File()
>>> d.save()
>>> fluentxml.open.content == data2
True

>>> fluentxml.open = File()
>>> d.save(pretty=True)
>>> fluentxml.open.content == data
True

>>> fluentxml.open = File(data)
>>> d = Document.load('/dev/null')
>>> d.instructions
[(u'quux', u'bar foo'), (u'qux', u'xyzzy="baz" foobar="waldo"')]
>>> d.root
Node(u'foo', {u'xmlns': u'foobar', u'xmlns:a': u'toto'}, [u'\n  ', ANode(u'bar', children=[u'data']), u'\n  ', Node(u'baz', children=[u're']), u'\n  ', StreamNode(u'stream', {u'xmlns': u'jabber:client', u'xmlns:stream': u'http://etherx.jabber.org/streams', u'id': u'c2s&123'}, [u'\n    ', Node(u'a', children=[u'"&<>']), u'\n  ']), u'\n'])

>>> fluentxml.open = File()
>>> d.save()
>>> fluentxml.open.content == data
True
