<tal:manager replace="structure provider:collage.ContentManager" />

<tal:helper tal:define="kssview context/@@collage_kss_helper">
<div class="cte_external-search">

	<a href="#somelink"
	    tal:attributes="href context/getTitleLink|nothing"
	    tal:omit-tag="not:context/getTitleLink|nothing">
	<label metal:define-macro="title"
               tal:content="context/Title"
	       class="cte_external-search-group_item_title"
	       tal:attributes="for context/id_string">
	  [Title]
	</label>
	</a>
	
	<!-- The icon representing the site to be searched. -->
	<img tal:replace="structure context/getImage|nothing" />
       
	<form method="post" 
	      tal:attributes="action context/getActionURL;
                              method context/getFormMethod;
                              name   string:${context/id_string}_form;
			      target python:context.getNewWindow() and '_blank' or None;"
	      name="external_searchform">
        
        <tal:fields
         tal:define="fields context/getHiddenFields">
            <input type="hidden"
                   tal:repeat="field fields"
                   tal:attributes="value field/fieldValue;
                                   name  field/fieldName;"
            />
        
        </tal:fields>
          <input type="text"
                 tal:attributes="name  context/getSearchBoxName;
                                 value context/getSearchBoxValue|nothing;
                                 id    context/id_string;"
                 />
	  <input tal:define="name context/getSubmitName|nothing;
			     value context/getSubmitValue|nothing"
		 tal:attributes="name python:name and name or None;
                                 value python:value and value or None;"
		 type="submit"
                 value="Search" />
	</form>
</div>
</tal:helper>
