
<metal:page define-macro="master">
<tal:doctype tal:replace="structure string:&lt;!DOCTYPE html PUBLIC
  &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" />

<html xmlns="http://www.w3.org/1999/xhtml" 
    tal:define="portal_state context/@@plone_portal_state;
        context_state context/@@plone_context_state;
        plone_view context/@@plone;
        lang portal_state/language;
        view nocall:view | nocall: plone_view;
        dummy python: plone_view.mark_view(view);
        portal_url portal_state/portal_url;
        checkPermission nocall: context/portal_membership/checkPermission;
        site_properties context/portal_properties/site_properties;
        ajax_load request/ajax_load | nothing"
    tal:attributes="lang lang;">

    <metal:cache use-macro="context/global_cache_settings/macros/cacheheaders">
    Get the global cache headers located in global_cache_settings.
    </metal:cache>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Forces IE8+ into newest rendering engine even if on an intranet. This has to be defined before any script/style tags. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
<tal:comment tal:condition="python:None">This was changed so that the preference pages worked. Had to essentially bring over main_template and change column_one and the main content area </tal:comment>
    <metal:baseslot define-slot="base">
        <base tal:attributes="href plone_view/renderBase" /><!--[if lt IE 7]></base><![endif]-->
        

    </metal:baseslot>

        
    <tal:notajax tal:condition="not:ajax_load">
        <div tal:replace="structure provider:plone.htmlhead" />
        <link tal:replace="structure provider:plone.htmlhead.links" />

        <tal:comment replace="nothing"> 
            Various slots where you can insert elements in the header from a template.
        </tal:comment>
        <metal:topslot define-slot="top_slot">
        <tal:block tal:define="dummy python:request.set('disable_border',1);
                             disable_column_two python:request.set('disable_plone.rightcolumn',1);"/>
        </metal:topslot>
        <metal:headslot define-slot="head_slot" />
        <metal:styleslot define-slot="style_slot" >
       
         
        </metal:styleslot>
        <metal:javascriptslot define-slot="javascript_head_slot" />
        <!--[if IE]>
<link href="IEFixes_wl.css"  media="screen" type="text/css" rel="stylesheet">
<![endif]-->
        <meta name="viewport" content="width=device-width; maximum-scale=1; minimum-scale=1; user-scalable=0;" />
        <meta name="generator" content="Plone - http://plone.org" />
    </tal:notajax>
</head>

<body tal:define="isRTL portal_state/is_rtl;
                  sl python:plone_view.have_portlets('plone.leftcolumn', view);
                  sr python:plone_view.have_portlets('plone.rightcolumn', view);
                  body_class python:plone_view.bodyClass(template, view);
                  themeplate_view python:context.restrictedTraverse('@@ResponsiveColumnControl')"
    tal:attributes="class body_class;
                    dir python:isRTL and 'rtl' or 'ltr'" >
<div id="visual-portal-wrapper">

        <div id="portal-top" class="row"
            i18n:domain="plone"
            tal:condition="not:ajax_load">
            <div tal:replace="structure provider:plone.portaltop" />
        </div>
    <div id="portal-columns" class="row">

        <div id="portal-column-content" class="cell" tal:attributes="class string:cell grid_width_is_9 prefix_3">

            <div id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" tal:condition="not:ajax_load" />
            
            <metal:block define-slot="content">
                <div metal:define-macro="content"
                    tal:define="show_border context/@@plone/showEditableBorder; show_border python:show_border and not ajax_load"
                    tal:attributes="class python:show_border and 'documentEditable' or ''">

                    <div id="edit-bar" 
                        tal:condition="show_border"
                        tal:content="structure provider:plone.contentviews" />

                    <div metal:use-macro="context/global_statusmessage/macros/portal_message">
                     Status message
                    </div>

<metal:slot define-slot="prefs_configlet_wrapper"> 
          <metal:slot define-slot="prefs_configlet_content">
          
            <metal:block metal:use-macro="context/main_template/macros/content">
              <metal:override metal:fill-slot="main">
                <metal:slot metal:define-slot="prefs_configlet_main" tal:content="nothing">
                  Page body text
                </metal:slot>
              </metal:override>
            </metal:block>
      
          </metal:slot>
             
        </metal:slot>
                </div>
            </metal:block>
        
            <div id="viewlet-below-content" tal:content="structure provider:plone.belowcontent" tal:condition="not:ajax_load" />
        </div>

<!--         <tal:notajax tal:condition="not:ajax_load"> -->
        <div id="portal-column-one" 
            class="cell grid_width_is_3 position_0"
            metal:define-slot="column_one_slot">
        <metal:prefs use-macro="here/portlet_prefs/macros/portlet" />
        </div>

        <div id="portal-column-two" 
            class="cell grid_width_is_3 prefix_9"
            metal:define-slot="column_two_slot" 
            tal:condition="sr"
            tal:attributes="class python:themeplate_view.getColumnsClass(view, 'two')"
            >
<!--            tal:attributes="class python:isRTL and 'cell grid_width_is_3 position_0' or 'cell grid_width_is_3 prefix_9'"
            -->
            
            <metal:portlets define-slot="portlets_two_slot">
                <tal:block replace="structure provider:plone.rightcolumn" />
            </metal:portlets>
        </div>
        <!--         </tal:notajax> -->
    </div>


    <metal:block i18n:domain="plone" tal:condition="not:ajax_load">
    <div id="footer">
        <div tal:replace="structure provider:plone.portalfooter" />
    </div>
    </metal:block>

</div>
</body>
</html>

</metal:page>

