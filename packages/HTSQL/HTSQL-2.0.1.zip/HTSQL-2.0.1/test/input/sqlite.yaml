#
# Copyright (c) 2006-2011, Prometheus Research, LLC
# Authors: Clark C. Evans <cce@clarkevans.com>,
#          Kirill Simonov <xi@resolvent.net>
#

title: SQLite regression tests
id: sqlite
output: test/output/sqlite.yaml
tests:

- title: Remove any existing regression database
  id: cleanup-sqlite
  tests:
  - rmdir: build/regress/regress-sqlite

- title: Deploy the regression database
  id: setup-sqlite
  tests:
  - mkdir: build/regress/regress-sqlite
  - connect: &connect
      engine: sqlite
      database: build/regress/regress-sqlite/htsql_regress.sqlite
    sql-include: test/sql/regress-sqlite.sql

- title: Run the test collection
  id: test-sqlite
  tests:
  - define: sqlite
  - db: *connect
  # The Regression Schema
  - include: test/input/schema.yaml
  # Examples from the Tutorial
  - include: test/input/tutorial.yaml
  # Standard Data Types, Functions, and Operations
  - include: test/input/library.yaml
  # Edge Cases of HTSQL-to-SQL Translation
  - include: test/input/translation.yaml
  # Formatting Output Data
  - include: test/input/format.yaml

