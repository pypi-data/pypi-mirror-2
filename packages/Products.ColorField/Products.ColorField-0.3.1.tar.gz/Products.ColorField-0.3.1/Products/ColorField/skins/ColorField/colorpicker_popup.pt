<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="atreferencebrowserwidget">

<head tal:define="ztu modules/ZTUtils;">
    <title tal:content="here/title_or_id">Title or Id</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"
          tal:define="charset here/portal_properties/site_properties/default_charset;
                      dummy python:request.RESPONSE.setHeader('Content-Type', 'text/html;;charset=%s' % charset)"
          tal:attributes="content string:text/html;;charset=${charset}" />
    <tal:styles define="view context/@@plone|nothing"
                replace="structure provider:plone.resourceregistries.styles" />
    <script language="javascript" type="text/javascript">
         function showMessage(message) {
            element = document.getElementById('message');
            element.style.display='block';
            inner = document.getElementById('messageTitle');
            inner.innerHTML = message;
         }
         function submitHistoryForm() {
             var form = document.history;
             var path = form.path.options[form.path.selectedIndex].value;
             form.action = path;
             form.submit();
         }
    </script>
    <script type="text/javascript" src="colorpicker.js" tal:attributes="src string:${here/portal_url}/colorpicker.js"></script>
    <style type="text/css">
       .context {
            background-color:#fff;
       }
       .portlet {
            margin: 1px 0 1em 0;
            border-bottom: &dtml-borderWidth; &dtml-borderStyle; &dtml-globalBorderColor;;
            background-color: transparent;
       }
    </style>

</head>
    <body onload="focus();" tal:define="brightness request/brightness">

   <div align="center" class="portlet">

   <div class="portletContent">   
   <table>
   <tr>
      <th  colspan="2" i18n:domain="colorfield" i18n:translate="label_pick_color">Pick a color:</th>
   <tr>
   <tr>
      <td valign="top">

<script type="text/javascript">
<!--

for (var i=0; i < defaultPalette.length; i++) {
   var color = defaultPalette[i];
   if (i % brightness.length == 0)
      document.write('\<div\>');
   document.write('<img id=\"color' + i + '\" style="background-color: #' + color + ';" onclick=\"displayColorset(this, ' + i + '); displayColor(this);" src=\"' + pixel.src + '\" width=\"' + squareSize + '\" height=\"' + squareSize + '" />');
   if (i % brightness.length == brightness.length-1)
     document.write('\<\/div\>');
}

// -->
</script>

      </td>

      <td valign="top" tal:condition="python:brightness == 'ON'">
         <div class="border" title="Select color brightness">

<script type="text/javascript">
<!--

for (var i=0; i < brightness.length; i++)
   document.write('\<div\>\<img id=\"bright' + i + '\" onclick=\"setMarquee2(this); updatePalette(this, ' + i + ');\" src=\"' + pixel.src + '\" width=\"15\" height=\"15\" style=\"background-color: #' + brightness[i][0] + ';\"/\>\<\/div\>');

// -->
</script>

         </div>
      </td> 
   </tr>

   <tr>
      <td colspan="2"><br/>
	<form method="post" action="" tal:define="cp_name python:here.REQUEST.get('cp_name');">
          <input type="hidden" id="result" />
               <input type="text" style="border: none;" id="display" value="" size="10" />
            <input type="button" i18n:domain="colorfield"
                        class="context"
                        value="Accept"
                        onClick=""
                        i18n:attributes="value label_accept"
                        tal:attributes="onClick string:javascript:cp_submit(name='${cp_name}');" />
            <input type="button"
                        class="context"
                        value="Cancel"
                        onClick=""
                        i18n:attributes="value label_cancel"
                        tal:attributes="onClick string:javascript:cp_cancel();" />
               
       </form> 
      </td>
   </tr>
   </table>

   </div>

   </div>

</body>
</html>

