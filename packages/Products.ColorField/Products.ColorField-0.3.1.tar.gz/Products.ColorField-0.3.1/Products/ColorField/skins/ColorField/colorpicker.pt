<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">

  <head><title></title></head>

  <body>
        <metal:view_macro define-macro="view"
            tal:define="kssClassesView context/@@kss_field_decorator_view;
                        getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;">
        <div metal:define-macro="string-field-view"
            tal:define="kss_class python:getKssClasses(fieldName,
                              templateId='widgets/string', macro='string-field-view');"
            tal:attributes="class kss_class;
                            id string:parent-fieldname-$fieldName">
            <span metal:define-slot="inside"
                  tal:replace="structure accessor">string</span>
        </div>
        </metal:view_macro>

        <metal:edit_macro define-macro="edit">

        <metal:use use-macro="field_macro | here/widgets/field/macros/edit">

        <div metal:fill-slot="widget_body">

<!--           <input id="" type="text" size="10"-->
<!--              i18n:attributes="value"-->
<!--              tal:attributes="name fieldName;-->
<!--                  id string:${fieldName}_label;-->
<!--                  tabindex tabindex/next;-->
<!--                  value python:edit_accessor()"/>-->
           <input id="" type="text" size="10"
              i18n:attributes="value"
              tal:attributes="name fieldName;
                  id string:${fieldName}_label;
                  value python:edit_accessor()"/>
           <img src="" name="color_preview"
              tal:define="html_color python:edit_accessor(); brightness python:test(widget.allow_brightness,'ON','OFF');"
              tal:attributes="alt html_color;
              onclick string:javascript:window.open('${here/absolute_url}/colorpicker_popup?brightness=${brightness}&cp_name=${fieldName}','cpWindow','toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=yes,width=270,height=270');
              src python:getattr(here,'marquee.gif').absolute_url();
              name string:preview$fieldName;
              style string:background-color:$html_color;"/>

        </div>

        </metal:use>

        </metal:edit_macro>

  </body>
</html>
