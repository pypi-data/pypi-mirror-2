(function(a){a.datepick.setDefaults(a.datepick.regional[""]);a.fn.datepick_z3cform=function(b){return a(this).each(function(){var c=a(this).children(".date-widget[id$=day], .datetime-widget[id$=day]"),g=a(this).children(".date-widget[id$=month], .datetime-widget[id$=month]"),e=a(this).children(".date-widget[id$=year], .datetime-widget[id$=year]"),d=a('<input type="hidden" />').insertAfter(a(this).children(".date-widget:eq(2), .datetime-widget:eq(2)")),h=function(){if(c.val()&&g.val()&&e.val()){return new Date(e.val(),g.val()-1,c.val(),12)}else{return undefined}},f=function(i){c.val(i.getDate());g.val(i.getMonth()+1);e.val(i.getFullYear()).trigger("focus").trigger("blur")};a(d).datepick(a.extend({showOnFocus:false,showAnim:"",showTrigger:'<button type="button" class="datepick"><img src="popup_calendar.png" alt="" /></button>',defaultDate:h(),onShow:function(i,j){i.css("width",null);a(h()).each(function(){i.find(".dp"+Number(this).toString()).addClass("selected")})},onSelect:function(i){a(d).datepick("option","defaultDate",i[0]);return f(i[0])}},b));a(c.toArray().concat(g.toArray()).concat(e.toArray())).bind("change",function(){a(h()).each(function(){a(d).datepick("option","defaultDate",this)})})})}})(jQuery);