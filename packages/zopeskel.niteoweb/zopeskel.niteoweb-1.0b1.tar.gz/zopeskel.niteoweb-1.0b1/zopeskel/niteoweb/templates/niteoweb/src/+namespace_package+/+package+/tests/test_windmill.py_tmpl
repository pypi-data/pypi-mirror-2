# -*- coding: utf-8 -*-
"""
Windmill full-browser testing of JavaScript functionalities and
whole-system sceanarios.

    Main goals for windmill tests:
    - never duplicate code
    - never test same code twice
    - try to isolate and fragment tests as much as possible
    - prepare environment through low level calls

"""

from Products.PloneTestCase.PloneTestCase import portal_owner, default_password

from ${namespace_package}.{package}.tests import SystemTestCase


class TestWindmill(SystemTestCase):
    """Testing with Windmill"""

    def test_login(self, username=portal_owner, password=default_password):
        self.wm.open_site(url="/login_form")
        self.wm.waits.forPageLoad(timeout=30000)
        self.wm.type(id="__ac_name", text=username)
        self.wm.type(id="__ac_password", text=password)
        self.wm.click(name="submit")
        self.wm.waits.forPageLoad(timeout=30000)
        self.wm.asserts.assertNode(xpath="//dl[@class='portalMessage info']/dd")

def test_suite():
    from unittest import TestSuite, makeSuite
    suite = TestSuite()
    suite.addTest(makeSuite(TestWindmill))
    return suite
