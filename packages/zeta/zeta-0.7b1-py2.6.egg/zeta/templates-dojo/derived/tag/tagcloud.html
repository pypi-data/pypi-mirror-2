## This file is subject to the terms and conditions defined in
## file 'LICENSE', which is part of this source code package.
##       Copyright (c) 2009 SKR Farms (P) LTD.


<%inherit file="/base/basic1.html"/>
<%namespace name="elements" file="/component/elements.html"/>

<%!

page_tooltips = [

[ 'TagCloud',
"""List of all tags, font size corresponding the to number of tagged items"""
],

]

%>

<%def name="hd_script()">
    ${parent.hd_script()}
</%def>

<%def name="bd_body()">
    <% 
        pagebartext = "Tag Cloud"
        tline       = capture( elements.iconlink, h.url_tagtimeline,
                               'timeline', title="Timeline" )
        pbar_spans  = [ '&ensp;' * 3 ]
        rspans      = [ tline ]

    %>
    ${elements.pagebar( pagebartext, spans=pbar_spans, rspans=rspans, 
                        tooltips=page_tooltips )}
    <div id="bdy" class="w100">
    % if c.userpanes :
    <div class="panel1">
    % else :
    <div class="fullpanel1">
    % endif
        <div id="tagcloud" class="ml20 mr20">
            <h3>Special tags</h3>
            <div class="ml10">
                % for tagname in c.specialtags :
                <% weight = c.tagpercentile.pop(tagname); %>
                <span class="mr10 vmiddle"
                      style="font-size : ${90 + weight[1]}%">
                      <a href="${h.url_fortag( tagname)}">${tagname}</a>
                </span>
                % endfor
            </div>
            <h3>Normal tags</h3>
            <div class="ml10">
                <% tagnames = sorted(c.tagpercentile.keys()) %>
                % for tagname in tagnames :
                <span class="mr10 vmiddle"
                      style="font-size : ${90 + c.tagpercentile[tagname][1]}%">
                      <a href="${h.url_fortag( tagname)}">${tagname}</a>
                </span>
                % endfor
            </div>
        </div>
    </div>
    % if c.userpanes :
    <div class="panel2">${elements.user_panes( c.userpanes )}</div>
    % endif
    </div>
</%def>

<%def name="bd_script()">
    ${parent.bd_script()}
</%def>
