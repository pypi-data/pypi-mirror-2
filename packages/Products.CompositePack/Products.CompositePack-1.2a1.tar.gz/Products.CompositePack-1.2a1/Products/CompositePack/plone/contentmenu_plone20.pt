<tal:layouts define="composite nocall:options/composite;
                     tool nocall:options/tool;
                     layouts python:tool.getRegisteredLayoutsForType(composite.parent.portal_type);
                     currentLayout python:tool.getLayoutById(composite.getLayout())">
    <li tal:condition="python: len(layouts)<=1"
        class="actionSingular">
        <tal:state i18n:domain="compopack" i18n:translate="label_layout">Layout:</tal:state>
        <span tal:content="currentLayout/title"
              i18n:translate="">
        Current layout
        </span>
    </li>


    <li class="actionPlural" tal:condition="python:len(layouts)>1">

    <div class="menuPosition">
      <ul class="actionMenu"
          id="layoutMenu"
          onmouseover="menuMouseover(event)">
        <tal:block repeat="layout layouts">
          <li tal:condition="python:layout != currentLayout">
            <a href="#"
               onMouseUp="if (activeButton != null) resetButton(activeButton);"
               i18n:translate=""
               tal:content="layout/title"
               tal:attributes="href
               string:${composite/absolute_url}/changeLayout?layout_id=${layout/getId}">File Menu Item 1</a>
          </li>
        </tal:block>
      </ul>

      <a href="#"
         onclick="return buttonClick(event, 'layoutMenu');"
         onmouseover="buttonMouseover(event, 'layoutMenu');">

        <span i18n:domain="compopack" 
              i18n:translate="label_layout">Layout:</span>

        <span tal:content="currentLayout/title"
              i18n:translate="">
          Current layout
        </span>
      </a>
    </div>

  </li>
</tal:layouts>

