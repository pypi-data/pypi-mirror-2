<html xmlns="http://www.w3.org/1999/xhtml" xmlns:py="http://genshi.edgewall.org/"
    xmlns:xi="http://www.w3.org/2001/XInclude">
    <head>
        <title>Intentional Programing</title>
        <link href="resource/site.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <form name="addschedule" id="addschedule" method="post" action="_schedule.html" onsubmit="sendIt('addschedule');">
            <input type="hidden" name="schedule" value="${schedule.id}" py:if="schedule"/>
            <table class="grid" width="100%">
                <tr>
                    <th>process</th>
                    <th>starting[hh:mm]</th>
                    <th>ending[hh:mm]</th>
                    <th>every[hh:mm]</th>
                    <th style="text-align:center;">S</th>
                    <th style="text-align:center;">M</th>
                    <th style="text-align:center;">T</th>
                    <th style="text-align:center;">W</th>
                    <th style="text-align:center;">T</th>
                    <th style="text-align:center;">F</th>
                    <th style="text-align:center;">S</th>
                    <th colspan="4"/>
                </tr>
                <tr class="odd">
                    <td>
                        <select name="process">
                            <option value="">None</option>
                            <option py:for="process in processes"
                                py:content="process.name"
                                py:attrs="dict(value=process.id, selected=schedule and schedule.process and schedule.process==process.name and 'selected' or None)"
                                >process</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="starting" size="6"
                            value="${schedule and schedule.starting and schedule.starting.strftime('%H:%M') or ''}"
                        />
                    </td>
                    <td>
                        <input type="text" name="ending" size="6"
                            value="${schedule and schedule.ending and schedule.ending.strftime('%H:%M') or ''}"
                        />
                    </td>
                    <td>
                        <input type="text" name="every" size="6"
                            value="${schedule and schedule.every and schedule.every.strftime('%H:%M') or ''}"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Sun"
                            py:attrs="dict(checked=(schedule and schedule.isSun and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Mon"
                            py:attrs="dict(checked=(schedule and schedule.isMon and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Tue"
                            py:attrs="dict(checked=(schedule and schedule.isTue and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Wed"
                            py:attrs="dict(checked=(schedule and schedule.isWed and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Thu"
                            py:attrs="dict(checked=(schedule and schedule.isThu and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Fri"
                            py:attrs="dict(checked=(schedule and schedule.isFri and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <input type="checkBox" name="day" value="Sat"
                            py:attrs="dict(checked=(schedule and schedule.isSat and 'selected' or None))"
                        />
                    </td>
                    <td align="center">
                        <a href="javascript:sendIt('addschedule');">
                            <img src="resource/images/16x16/${schedule and 'Save' or 'Add'}.png"
                                alt="add" border="0"/>
                        </a>
                    </td>
                    <td colspan="3"/>
                </tr>
                <tr py:for="i,item in enumerate(schedules)"
                    class="${schedule and 'current' or ( i%2 and 'odd' or 'even')}">
                    <td py:content="item.process">process</td>
                    <td py:content="item.starting.strftime('%H:%M')">starting</td>
                    <td py:content="item.ending and item.ending.strftime('%H:%M') or ''">ending</td>
                    <td py:content="item.every and item.every.strftime('%H:%M') or ''">every</td>
                    <td align="center">
                        <input type="checkBox"
                            py:attrs="dict(checked=(item.isSun and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <input type="checkBox" readonly="readonly"
                            py:attrs="dict(checked=(item.isMon and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <input type="checkBox" readonly="readonly"
                            py:attrs="dict(checked=(item.isTue and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <input type="checkBox" readonly="readonly"
                            py:attrs="dict(checked=(item.isWed and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <input type="checkBox" readonly="readonly"
                            py:attrs="dict(checked=(item.isThu and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <input type="checkBox" readonly="readonly"
                            py:attrs="dict(checked=(item.isFri and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <input type="checkBox" readonly="readonly"
                            py:attrs="dict(checked=(item.isSat and 'selected' or None))"/>
                    </td>
                    <td align="center">
                        <a href="javascript:viewIt('_schedule.html?remove=${item.id}');">
                            <img src="resource/images/16x16/Delete.png" border="0" width="16"
                                height="16"/>
                        </a>
                    </td>
                    <td align="center">
                        <a href="javascript:viewIt('_schedule.html?schedule=${item.id}');">
                            <img src="resource/images/16x16/Edit.png" border="0" width="16"
                                height="16"/>
                        </a>
                    </td>
                    <td align="center">
                        <a href="javascript:viewIt('_activate_schedule.html?id=${item.id}');">
                            <img src="resource/images/16x16/${item.active and 'Pause' or 'Play'}.png"
                                border="0" width="16" height="16"/>
                        </a>
                    </td>
                    <td py:content="item.nextEventTime(sa_session, '%H:%M')">next</td>
                </tr>
            </table>
        </form>
    </body>
</html>
