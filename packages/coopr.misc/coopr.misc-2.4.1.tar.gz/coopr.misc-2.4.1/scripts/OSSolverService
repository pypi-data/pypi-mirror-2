#! /usr/bin/env python
#
# Python wrapper for launching Coopr optimizers within the COIN-OR 
# Optimization Services
#
#  _________________________________________________________________________
#
#  Coopr: A COmmon Optimization Python Repository
#  Copyright (c) 2008 Sandia Corporation.
#  This software is distributed under the BSD License.
#  Under the terms of Contract DE-AC04-94AL85000 with Sandia Corporation,
#  the U.S. Government retains certain rights in this software.
#  For more information, see the FAST README.txt file.
#  _________________________________________________________________________

import sys
if sys.version_info[0:2] < (2,4):
   print ""
   print "ERROR: OSSolverService requires Python 2.4 or newer"
   sys.exit(1)
from os.path import abspath, dirname
sys.path.insert(0, dirname(dirname(abspath(__file__))))
sys.path.append(".")

import coopr.opt

if len(sys.argv) == 1:
    print "OSSolverService -osil <filename> -solver <name>"
    sys.exit(1)

osilFile = None
solver = None
i=1
while i<len(sys.argv):
    if sys.argv[i] == "-osil":
        i=i+1
        osilFile=sys.argv[i] 
    elif sys.argv[i] == "-solver":
        i=i+1
        solver=sys.argv[i] 
    i=i+1

print "osilFile",osilFile,"solver",solver

opt = coopr.opt.SolverFactory(solver)
opt.solve(osilFile, rformat=coopr.opt.ResultsFormat.osrl)


