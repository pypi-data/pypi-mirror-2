

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ptemplate — lightweight, data-driven templating &mdash; ptemplate v0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ptemplate v0.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">ptemplate v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-ptemplate">
<span id="ptemplate-lightweight-data-driven-templating"></span><h1><a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> &#8212; lightweight, data-driven templating<a class="headerlink" href="#module-ptemplate" title="Permalink to this headline">¶</a></h1>
<p>ptemplate is a lightweight templating engine for Python, heavily inspired by
Google&#8217;s <a class="reference external" href="http://google-ctemplate.googlecode.com/">ctemplate</a> language.
Like ctemplate, ptemplate strongly separates the application&#8217;s logic and
presentation. At its heart, ptemplate is an extension of Python&#8217;s advanced
string formatting facility &#8211; it extends the interpreter&#8217;s built-in formatters
to provide a fast, expressive, content-agnostic templating system.</p>
<div class="section" id="installing-ptemplate">
<h2>Installing <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a><a class="headerlink" href="#installing-ptemplate" title="Permalink to this headline">¶</a></h2>
<p>You can install the latest stable version of <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> using <strong class="command">pip</strong>:</p>
<div class="highlight-none"><div class="highlight"><pre>$ pip install ptemplate
</pre></div>
</div>
<p>Mirrors of the project&#8217;s repository are hosted at <a class="reference external" href="http://github.com/wcmaier/ptemplate.git">github.com</a> and <a class="reference external" href="http://bitbucket.org/wcmaier/ptemplate/">bitbucket.org</a>
&#8211; feel free to clone and issue pull requests at either service. For <a class="reference external" href="http://git-scm.com/">git</a>
users:</p>
<div class="highlight-none"><div class="highlight"><pre>$ git clone http://github.com/wcmaier/ptemplate.git
</pre></div>
</div>
<p>And for <a class="reference external" href="http://mercurial.selenic.com/">Mercurial</a> users:</p>
<div class="highlight-none"><div class="highlight"><pre>$ hg clone http://bitbucket.org/wcmaier/ptemplate/
</pre></div>
</div>
<p>Both github and bitbucket provide feeds of changes to the project; for example:</p>
<div class="highlight-none"><div class="highlight"><pre>http://github.com/wcmaier/ptemplate/commits/master.atom
</pre></div>
</div>
<p>If you&#8217;d like to contribute an improvement to <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a>, please consider using
either of the above services. Otherwise, send an email to <a class="reference external" href="mailto:willmaier&#37;&#52;&#48;ml1&#46;net">willmaier<span>&#64;</span>ml1<span>&#46;</span>net</a>.</p>
</div>
<div class="section" id="a-quick-tour-of-ptemplate-s-features">
<h2>A quick tour of <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a>&#8216;s features<a class="headerlink" href="#a-quick-tour-of-ptemplate-s-features" title="Permalink to this headline">¶</a></h2>
<p>Simple extension of Python&#8217;s advanced string formatting API (<span class="target" id="index-0"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptemplate.formatter</span> <span class="kn">import</span> <span class="n">Formatter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatter</span> <span class="o">=</span> <span class="n">Formatter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;normal variable substitution: {var}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatter</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">&#39;normal variable substitution: foo&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{#section}this is {something} {/section}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;section&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&quot;something&quot;</span><span class="p">:</span> <span class="s">&quot;fast&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;something&quot;</span><span class="p">:</span> <span class="s">&quot;easy&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;something&quot;</span><span class="p">:</span> <span class="s">&quot;simple&quot;</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatter</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>
<span class="go">&#39;this is fast this is easy this is simple &#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{%this is a comment}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatter</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="o">**</span><span class="p">{})</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
<p>Content filtering system (eg HTML sanitization):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cgi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptemplate.template</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span> <span class="o">=</span> <span class="n">Template</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">converters</span><span class="p">[</span><span class="s">&quot;h&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cgi</span><span class="o">.</span><span class="n">escape</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;content&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;some HTML from the wild&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;something dangerous: {content!h}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&#39;something dangerous: &amp;lt;p&amp;gt;some HTML from the wild&amp;lt;/p&amp;gt;&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;section&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&quot;example&quot;</span><span class="p">:</span> <span class="s">&quot;&lt;p&gt;paragraph&lt;/p&gt;&quot;</span><span class="p">},{</span><span class="s">&quot;example&quot;</span><span class="p">:</span> <span class="s">&quot;no html here&quot;</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;you can sanitize entire sections, too ({#section!h}{example} {/section})&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&#39;you can sanitize entire sections, too (&amp;lt;p&amp;gt;paragraph&amp;lt;/p&amp;gt; no html here )&#39;</span>
</pre></div>
</div>
<p>Basic compatibility with Google&#8217;s <span class="target" id="id1">ctemplate</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptemplate.ctemplate</span> <span class="kn">import</span> <span class="n">CTemplate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;Google is {{#section}}{{something}}, {{/section}}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span> <span class="o">=</span> <span class="n">CTemplate</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;section&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&quot;something&quot;</span><span class="p">:</span> <span class="s">&quot;not evil&quot;</span><span class="p">},{</span><span class="s">&quot;something&quot;</span><span class="p">:</span> <span class="s">&quot;a company&quot;</span><span class="p">}]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&#39;Google is not evil, a company, &#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>Despite its simple syntax, templates processed by <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> can still
produce very complex documents. Unlike most template systems, <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a>
encourages you to keep application logic where it belongs &#8211; in your
application. Expansion of the template is controlled solely by the structure of
your data. This keeps the templating engine itself simple and fast and makes
writing and debugging your templates even easier. For more on the philosophy
behind data-driven templating systems, see &#8220;<a class="reference external" href="http://google-ctemplate.googlecode.com/svn/trunk/doc/howto.html">How To Use the Google Template
System</a>&#8221;.</p>
<p>All of the <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> interfaces take a single data dictionary and use it
to expand a simple string template. The data dictionary&#8217;s keys are plain
strings; its values are either strings or lists of other data dictionaries.
Other objects may be used as values, but they will be converted to strings
before being inserted into the template. String values are substituted for
variables in the template. List values control the number of iterations (and
scope) of section variables.</p>
<p>Templates are composed of plain text with (optional) variable and section
markers. <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> markers must all be valid field names as described
in <span class="target" id="index-1"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a> and begin and end with &#8216;{&#8216; and &#8216;}&#8217;, respectively. Special
fields denoting comments and the beginning and end of sections are marked
with a single-character indicator (&#8216;!&#8217;, &#8216;#&#8217;, &#8216;/&#8217;). Comment fields are ignored
completely. Sections are expanded once for each data dictionary found in the
evaluation scope.</p>
<p>Variable expansion proceeds from the innermost context to the outermost; if no
match is found, an empty string is substituted instead. Variables defined within
a section will first attempt to match keys in that section&#8217;s dictionary. If no
match is found, the dictionary in which the section is defined will be searched
for a match. This process continues until all dictionaries (or &#8220;scopes&#8221;) are
exhausted.</p>
<p>For example, this deeply nested data dictionary produces the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ptemplate.template</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span> <span class="o">=</span> <span class="n">Template</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s">&quot;outer&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&quot;middle&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s">&quot;inner&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>                <span class="p">{</span><span class="s">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;baz&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">]},</span>
<span class="gp">... </span>        <span class="p">]},</span>
<span class="gp">... </span>    <span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;{#outer}outer: {foo} {#middle}middle: {foo} {#inner}inner: {foo} {/inner}{/middle}{/outer}&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&#39;outer: foo middle: bar inner: baz &#39;</span>
</pre></div>
</div>
<p>At each level, a new value for &#8220;foo&#8221; is defined. If the innermost value is
removed, though, the next-highest value is used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s">&quot;outer&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;middle&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;inner&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">&#39;baz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">templater</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">&#39;outer: foo middle: bar inner: bar &#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="ctemplate-support">
<h2>ctemplate support<a class="headerlink" href="#ctemplate-support" title="Permalink to this headline">¶</a></h2>
<p>Since <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> and Google&#8217;s ctemplate are so similar internally,
it&#8217;s fairly easy to process ctemplate templates with <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a>.
In fact, with a very naive preprocessor, <a class="reference internal" href="#module-ptemplate.ctemplate" title="ptemplate.ctemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.ctemplate</span></tt></a> can
pass many of Google&#8217;s ctemplate unittests. To expand ctemplate(-like)
templates, use <a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.ctemplate.CTemplate</span></tt></a> instead of
<a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.template.Template</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.ctemplate.CTemplate</span></tt></a> does not provide full ctemplate
compatibility. See the class documentation for specific exceptions.</p>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>You have access to the templating system at three levels. First, you can
interact directly with <a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.formatter.Formatter</span></tt></a>, which
offers an interface very similar to Python&#8217;s advanced string formatting
(<a class="reference external" href="http://docs.python.org/library/string.html#string.Formatter" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">string.Formatter</span></tt></a>, <span class="target" id="index-2"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a>). Second, you can work with (or
subclass) <a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.template.Template</span></tt></a>, a thin wrapper around
the formatter that also adds a Buffet-style API. Lastly, you can use
<a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.ctemplate.CTemplate</span></tt></a>. <a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">CTemplate</span></tt></a>
extends <a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt></a> with a preprocessor that supports
a subset of Google&#8217;s ctemplate system. <a class="reference internal" href="#module-ptemplate.ctemplate" title="ptemplate.ctemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ctemplate</span></tt></a> also
demonstrates how to subclass and extend the basic <a class="reference internal" href="#module-ptemplate.template" title="ptemplate.template"><tt class="xref py py-mod docutils literal"><span class="pre">template</span></tt></a>.</p>
<p>For a typical use case, <a class="reference internal" href="#module-ptemplate.template" title="ptemplate.template"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.template</span></tt></a> is probably most useful as it
provides a familiar API. <a class="reference internal" href="#module-ptemplate.ctemplate" title="ptemplate.ctemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.ctemplate</span></tt></a> should (with, perhaps, a few
changes to the preprocessor) support many simple templates written for Google&#8217;s
ctemplate system. For smaller projects (or doing things like formatting error
messages), <a class="reference internal" href="#module-ptemplate.formatter" title="ptemplate.formatter"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.formatter</span></tt></a> may be sufficient on its own.</p>
<span class="target" id="module-ptemplate.formatter"></span><div class="section" id="ptemplate-formatter-extended-string-formatter">
<h3><a class="reference internal" href="#module-ptemplate.formatter" title="ptemplate.formatter"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.formatter</span></tt></a> &#8211; extended string formatter<a class="headerlink" href="#ptemplate-formatter-extended-string-formatter" title="Permalink to this headline">¶</a></h3>
<p>This module extends the advanced string formatter (<span class="target" id="index-3"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a>) available in
Python versions greater than 2.5. In addition to regular variable substitution
and formatting, <a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">Formatter</span></tt></a> supports sections and in-template comments.</p>
<dl class="class">
<dt id="ptemplate.formatter.Formatter">
<em class="property">class </em><tt class="descclassname">ptemplate.formatter.</tt><tt class="descname">Formatter</tt><a class="headerlink" href="#ptemplate.formatter.Formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/string.html#string.Formatter" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">string.Formatter</span></tt></a></p>
<p>A string formatter.</p>
<p><a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">Formatter</span></tt></a> extends the advanced string formatter described in
<span class="target" id="index-4"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a> and implemented in Python versions greater than 2.5. It
provides hooks that simplify token conversion (<a class="reference internal" href="#ptemplate.formatter.Formatter.converters" title="ptemplate.formatter.Formatter.converters"><tt class="xref py py-attr docutils literal"><span class="pre">converters</span></tt></a>) and
recognize special template variables (<a class="reference internal" href="#ptemplate.formatter.Formatter.markers" title="ptemplate.formatter.Formatter.markers"><tt class="xref py py-attr docutils literal"><span class="pre">markers</span></tt></a>). Since it uses
<tt class="xref py py-meth docutils literal"><span class="pre">str._formatter_parser()</span></tt> (implemented in C in the standard interpreter)
to parse the input string, it should also perform relatively well.</p>
<dl class="method">
<dt id="ptemplate.formatter.Formatter.convert_field">
<tt class="descname">convert_field</tt><big>(</big><em>value</em>, <em>conversion</em><big>)</big><a class="headerlink" href="#ptemplate.formatter.Formatter.convert_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a field <em>value</em> according to a <em>conversion</em> specification.</p>
<p>If <em>conversion</em> is registered in <a class="reference internal" href="#ptemplate.formatter.Formatter.converters" title="ptemplate.formatter.Formatter.converters"><tt class="xref py py-attr docutils literal"><span class="pre">converters</span></tt></a>, the <em>value</em> is
passed to the matching converter and the output is returned. Otherwise,
the <em>value</em> and <em>conversion</em> specification are passed to
<a class="reference external" href="http://docs.python.org/library/string.html#string.Formatter.convert_field" title="(in Python v2.7)"><tt class="xref py py-meth docutils literal"><span class="pre">string.Formatter.convert_field()</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptemplate.formatter.Formatter.converters">
<tt class="descname">converters</tt><a class="headerlink" href="#ptemplate.formatter.Formatter.converters" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of converter functions keyed by conversion strings.</p>
<p>If a token&#8217;s conversion string matches a key in this dictionary, <a class="reference internal" href="#ptemplate.formatter.Formatter.convert_field" title="ptemplate.formatter.Formatter.convert_field"><tt class="xref py py-meth docutils literal"><span class="pre">convert_field()</span></tt></a>
will use the converter instead of the usual string conversion.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Keys in this dictionary must be one character in length (to match
<tt class="xref py py-meth docutils literal"><span class="pre">str._formatter_parser()</span></tt>&#8216;s expectations for format flags).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="ptemplate.formatter.Formatter.formatsection">
<tt class="descname">formatsection</tt><big>(</big><em>tokens</em>, <em>data</em>, <em>scopes=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#ptemplate.formatter.Formatter.formatsection" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a section of a token stream according to <em>data</em>.</p>
<p><a class="reference internal" href="#ptemplate.formatter.Formatter.formatsection" title="ptemplate.formatter.Formatter.formatsection"><tt class="xref py py-meth docutils literal"><span class="pre">formatsection()</span></tt></a> builds a formatted string from the iterable <em>tokens</em>.
If it encounters a section in the stream, it creates a new stream and
passes the section (and everything in it) to another invocation of
<a class="reference internal" href="#ptemplate.formatter.Formatter.formatsection" title="ptemplate.formatter.Formatter.formatsection"><tt class="xref py py-meth docutils literal"><span class="pre">formatsection()</span></tt></a>, adding its output to the formatted string. This
continues recursively until there are no more sections and the stream of
tokens is finished. Then, the formatted result is returned.</p>
<p>When a section is completed, its output will be passed to
<a class="reference internal" href="#ptemplate.formatter.Formatter.convert_field" title="ptemplate.formatter.Formatter.convert_field"><tt class="xref py py-meth docutils literal"><span class="pre">convert_field()</span></tt></a> and <tt class="xref py py-meth docutils literal"><span class="pre">format_field()</span></tt> if the <tt class="xref py py-attr docutils literal"><span class="pre">Section.conversion</span></tt>
or <tt class="xref py py-attr docutils literal"><span class="pre">Section.format</span></tt> attributes were defined, respectively.</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.formatter.Formatter.get_value">
<tt class="descname">get_value</tt><big>(</big><em>field</em>, <em>args</em>, <em>scopes</em><big>)</big><a class="headerlink" href="#ptemplate.formatter.Formatter.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the value of <em>field</em> in <em>scopes</em>.</p>
<p><em>scopes</em> is a list of data dictionaries associated with each successive
parent of the current section. <a class="reference internal" href="#ptemplate.formatter.Formatter.get_value" title="ptemplate.formatter.Formatter.get_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_value()</span></tt></a> searches for a key
matching <em>field</em> in each of these dictionaries, in order. If no match is
found, an empty string is returned. Otherwise, the key&#8217;s value (a list
of data dictionaries or a string) is returned.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptemplate.formatter.Formatter.markerlen">
<tt class="descname">markerlen</tt><a class="headerlink" href="#ptemplate.formatter.Formatter.markerlen" title="Permalink to this definition">¶</a></dt>
<dd><p>The length of a marker indicator.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptemplate.formatter.Formatter.markers">
<tt class="descname">markers</tt><a class="headerlink" href="#ptemplate.formatter.Formatter.markers" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary mapping marker indicators to marker type names.</p>
<p>The extended syntax supported by <a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">Formatter</span></tt></a> is composed of markers
within normal template variables. Markers registered here can trigger
extended behavior in <tt class="xref py py-meth docutils literal"><span class="pre">_vformat()</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.formatter.Formatter.tokenize">
<tt class="descname">tokenize</tt><big>(</big><em>string</em><big>)</big><a class="headerlink" href="#ptemplate.formatter.Formatter.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize a template <em>string</em>.</p>
<p><a class="reference internal" href="#ptemplate.formatter.Formatter.tokenize" title="ptemplate.formatter.Formatter.tokenize"><tt class="xref py py-meth docutils literal"><span class="pre">tokenize()</span></tt></a> parses <em>string</em> using <a class="reference external" href="http://docs.python.org/library/string.html#string.Formatter.parse" title="(in Python v2.7)"><tt class="xref py py-meth docutils literal"><span class="pre">string.Formatter.parse()</span></tt></a>
(which in turn relies on <tt class="xref py py-meth docutils literal"><span class="pre">str._formatter_parser()</span></tt>) and yields
<a class="reference internal" href="#ptemplate.formatter.Token" title="ptemplate.formatter.Token"><tt class="xref py py-class docutils literal"><span class="pre">Token</span></tt></a> instances using the parsed data.</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.formatter.Formatter.vformat">
<tt class="descname">vformat</tt><big>(</big><em>string</em>, <em>args</em>, <em>kwargs</em><big>)</big><a class="headerlink" href="#ptemplate.formatter.Formatter.vformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Format <em>string</em> according to data in <em>args</em> and <em>kwargs</em>.</p>
<p>Unlike <a class="reference external" href="http://docs.python.org/library/string.html#string.Formatter.vformat" title="(in Python v2.7)"><tt class="xref py py-meth docutils literal"><span class="pre">string.Formatter.vformat()</span></tt></a>, this method does not track (or
complain about) unused arguments.</p>
</dd></dl>

</dd></dl>

</div>
<dl class="class">
<dt id="ptemplate.formatter.Section">
<em class="property">class </em><tt class="descclassname">ptemplate.formatter.</tt><tt class="descname">Section</tt><a class="headerlink" href="#ptemplate.formatter.Section" title="Permalink to this definition">¶</a></dt>
<dd><p>A template section.</p>
<p>Constructor arguments should be passed as keywords and include:</p>
<p><em>name</em> is the name of the section (not including the section marker).</p>
<p><em>tokens</em> is a list of <a class="reference internal" href="#ptemplate.formatter.Token" title="ptemplate.formatter.Token"><tt class="xref py py-class docutils literal"><span class="pre">Token</span></tt></a> instances that belong in the section.</p>
<p><em>data</em> is a template data dictionary applicable to the section.</p>
<p><em>scopes</em> is a list of data dictionaries that should be searched successively
when resolving variables in the section.</p>
<p><em>conversion</em> is a conversion string. If not None, it will be passed with the
output of the section to <a class="reference internal" href="#ptemplate.formatter.Formatter.convert_field" title="ptemplate.formatter.Formatter.convert_field"><tt class="xref py py-meth docutils literal"><span class="pre">Formatter.convert_field()</span></tt></a>.</p>
<p><em>format</em> is a format string. If not None, it will be passed with the output of
the section to <tt class="xref py py-meth docutils literal"><span class="pre">Formatter.format_field()</span></tt>.</p>
</dd></dl>

<dl class="class">
<dt id="ptemplate.formatter.Token">
<em class="property">class </em><tt class="descclassname">ptemplate.formatter.</tt><tt class="descname">Token</tt><a class="headerlink" href="#ptemplate.formatter.Token" title="Permalink to this definition">¶</a></dt>
<dd><p>A template token.</p>
<p>Constructor arguments should be passed as keywords and include:</p>
<p><em>text</em> is the literal text preceding the token.</p>
<p><em>field</em> is the name of the field (or None), not including the marker indicator.</p>
<p><em>fieldname</em> is the full name of the field (or None), including the marker
indicator.</p>
<p><em>marker</em> is a marker type registered in <a class="reference internal" href="#ptemplate.formatter.Formatter.markers" title="ptemplate.formatter.Formatter.markers"><tt class="xref py py-attr docutils literal"><span class="pre">Formatter.markers</span></tt></a>.</p>
<p><em>spec</em> is a format string passed with the token&#8217;s contents to
<tt class="xref py py-meth docutils literal"><span class="pre">Formatter.format_field()</span></tt>.</p>
<p><em>conversion</em> is a conversion string passed with the token&#8217;s contents to
<a class="reference internal" href="#ptemplate.formatter.Formatter.convert_field" title="ptemplate.formatter.Formatter.convert_field"><tt class="xref py py-meth docutils literal"><span class="pre">Formatter.convert_field()</span></tt></a>.</p>
</dd></dl>

<span class="target" id="module-ptemplate.template"></span><div class="section" id="ptemplate-template-advanced-string-templating">
<h3><a class="reference internal" href="#module-ptemplate.template" title="ptemplate.template"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.template</span></tt></a> &#8211; advanced string templating<a class="headerlink" href="#ptemplate-template-advanced-string-templating" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#module-ptemplate.template" title="ptemplate.template"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.template</span></tt></a> provides a <a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt></a>, a thin interface on top
<a class="reference internal" href="#module-ptemplate.formatter" title="ptemplate.formatter"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.formatter</span></tt></a> that is more useful for typical templating tasks.</p>
<dl class="class">
<dt id="ptemplate.template.Template">
<em class="property">class </em><tt class="descclassname">ptemplate.template.</tt><tt class="descname">Template</tt><big>(</big><em>extra_vars_func=None</em>, <em>options=None</em>, <em>template=''</em><big>)</big><a class="headerlink" href="#ptemplate.template.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>A templater.</p>
<p><a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt></a> wraps <a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.formatter.Formatter</span></tt></a> with a
<span class="target" id="buffet">Buffet</span>-compatible <span class="target" id="interface">interface</span>. In addition to the standard Buffet
arguments (<em>extra_vars_func</em>, <em>options</em>), the constructor accepts a
<em>template</em> string. This string is the template that will be rendered later
(by a call to <a class="reference internal" href="#ptemplate.template.Template.render" title="ptemplate.template.Template.render"><tt class="xref py py-meth docutils literal"><span class="pre">render()</span></tt></a>).</p>
<dl class="attribute">
<dt id="ptemplate.template.Template.converters">
<tt class="descname">converters</tt><a class="headerlink" href="#ptemplate.template.Template.converters" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of object converters.</p>
<p>These converters will be passed to the template&#8217;s
<a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.formatter.Formatter</span></tt></a> instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptemplate.template.Template.formatter">
<tt class="descname">formatter</tt><a class="headerlink" href="#ptemplate.template.Template.formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>The template&#8217;s formatter.</p>
<p>The formatter performs the actual templating work and should
have a <tt class="xref py py-meth docutils literal"><span class="pre">ptemplate.formatter.Formatter.format()</span></tt> method and a
<a class="reference internal" href="#ptemplate.formatter.Formatter.converters" title="ptemplate.formatter.Formatter.converters"><tt class="xref py py-attr docutils literal"><span class="pre">ptemplate.formatter.Formatter.converters</span></tt></a> dictionary. The
converters dictionary will be updated with any converters specified in
the Template.</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.template.Template.load_template">
<tt class="descname">load_template</tt><big>(</big><em>templatename</em><big>)</big><a class="headerlink" href="#ptemplate.template.Template.load_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a template specified in Python &#8216;dot&#8217; notation.</p>
<p>Required by Buffet; not supported.</p>
</dd></dl>

<dl class="attribute">
<dt id="ptemplate.template.Template.preprocessor">
<tt class="descname">preprocessor</tt><a class="headerlink" href="#ptemplate.template.Template.preprocessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Template preprocessor callable.</p>
<p>This callable should accept the template string as its sole argument. Its
output should be another template string. Use this facility to translate
foreign template syntaxes into something
<a class="reference internal" href="#ptemplate.formatter.Formatter" title="ptemplate.formatter.Formatter"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.formatter.Formatter</span></tt></a> can understand.</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.template.Template.render">
<tt class="descname">render</tt><big>(</big><em>data</em>, <em>format='html'</em>, <em>fragment=False</em>, <em>template=None</em><big>)</big><a class="headerlink" href="#ptemplate.template.Template.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the template using <em>data</em>.</p>
<p>The <em>format</em>, <em>fragment</em> and <em>template</em> arguments are ignored. Instead,
<a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt></a> uses <tt class="xref py py-attr docutils literal"><span class="pre">template</span></tt> as the template, passing it to
<a class="reference internal" href="#ptemplate.template.Template.preprocessor" title="ptemplate.template.Template.preprocessor"><tt class="xref py py-attr docutils literal"><span class="pre">preprocessor</span></tt></a> if necessary. It then expands the template (using
<a class="reference internal" href="#ptemplate.template.Template.formatter" title="ptemplate.template.Template.formatter"><tt class="xref py py-attr docutils literal"><span class="pre">formatter</span></tt></a>) and returns the result as a string.</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.template.Template.transform">
<tt class="descname">transform</tt><big>(</big><em>info</em>, <em>template</em><big>)</big><a class="headerlink" href="#ptemplate.template.Template.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the output to Elements.</p>
<p>Required by Buffet; not supported.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-ptemplate.ctemplate"></span><div class="section" id="ptemplate-ctemplate-ctemplate-like-interface">
<h3><a class="reference internal" href="#module-ptemplate.ctemplate" title="ptemplate.ctemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.ctemplate</span></tt></a> &#8211; ctemplate-like interface<a class="headerlink" href="#ptemplate-ctemplate-ctemplate-like-interface" title="Permalink to this headline">¶</a></h3>
<p>This module implements a templating interface similar Google&#8217;s <a class="reference external" href="http://google-ctemplate.googlecode.com/">ctemplate</a> with a few important exceptions:</p>
<ul class="simple">
<li>templates may not change the field delimiter</li>
<li>modifiers are marked with &#8216;!&#8217;</li>
<li>comments are marked with &#8216;%&#8217;</li>
<li>the templater does not strip whitespace (except by modifiers)</li>
<li>includes are not supported</li>
<li>pragmas/macros are not supported</li>
<li>separator sections are not supported</li>
</ul>
<p>Like ctemplate, <a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">CTemplate</span></tt></a> expands a string template to match the
structure of a dictionary (using <a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.template.Template</span></tt></a>). Data dictionaries
may contain either lists of other data dictionaries or single values (string,
integer, float, etc). Plain variables are substituted according to the usual
Python string formatting rules (see <span class="target" id="index-5"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a>). Sections (fields preceded by
&#8216;#&#8217;) are expanded once for each data dictionary contained in the corresponding
list.</p>
<dl class="class">
<dt id="ptemplate.ctemplate.CTemplate">
<em class="property">class </em><tt class="descclassname">ptemplate.ctemplate.</tt><tt class="descname">CTemplate</tt><big>(</big><em>extra_vars_func=None</em>, <em>options=None</em>, <em>template=''</em><big>)</big><a class="headerlink" href="#ptemplate.ctemplate.CTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.template.Template</span></tt></a></p>
<p>A (somewhat) ctemplate-compatible templater.</p>
<p>Incompatibilities with Google&#8217;s ctemplate are documented in
<a class="reference internal" href="#module-ptemplate.ctemplate" title="ptemplate.ctemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.ctemplate</span></tt></a>. Construction of a <a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">CTemplate</span></tt></a> instance
is the same as with <a class="reference internal" href="#ptemplate.template.Template" title="ptemplate.template.Template"><tt class="xref py py-class docutils literal"><span class="pre">ptemplate.template.Template</span></tt></a>.</p>
<dl class="attribute">
<dt id="ptemplate.ctemplate.CTemplate.globals">
<tt class="descname">globals</tt><a class="headerlink" href="#ptemplate.ctemplate.CTemplate.globals" title="Permalink to this definition">¶</a></dt>
<dd><p>A global data dictionary.</p>
<p>Template variables that don&#8217;t match keys in the main data dictionary may
match global keys as a last resort. By default, <a class="reference internal" href="#ptemplate.ctemplate.CTemplate.globals" title="ptemplate.ctemplate.CTemplate.globals"><tt class="xref py py-attr docutils literal"><span class="pre">globals</span></tt></a> contains
BI_NEWLINE and BI_SPACE, which match the space and newline characters,
respectively (as in ctemplate).</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.ctemplate.CTemplate.preprocessor">
<tt class="descname">preprocessor</tt><big>(</big><em>input</em><big>)</big><a class="headerlink" href="#ptemplate.ctemplate.CTemplate.preprocessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Google&#8217;s ctemplate syntax.</p>
<p>Since ctemplate and <a class="reference internal" href="#module-ptemplate.template" title="ptemplate.template"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate.template</span></tt></a> are quite similar
internally, a simple translation can make a document (mostly) legible.
At the moment, the preprocessor only converts the marker indicators
(&#8216;{{&#8216; and &#8216;}}&#8217;) and comment character (&#8216;!&#8217;).</p>
</dd></dl>

<dl class="method">
<dt id="ptemplate.ctemplate.CTemplate.render">
<tt class="descname">render</tt><big>(</big><em>data</em>, <em>format='html'</em>, <em>fragment=False</em>, <em>template=None</em><big>)</big><a class="headerlink" href="#ptemplate.ctemplate.CTemplate.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the template.</p>
<p>Here, <a class="reference internal" href="#ptemplate.ctemplate.CTemplate" title="ptemplate.ctemplate.CTemplate"><tt class="xref py py-class docutils literal"><span class="pre">CTemplate</span></tt></a> adds the <a class="reference internal" href="#ptemplate.ctemplate.CTemplate.globals" title="ptemplate.ctemplate.CTemplate.globals"><tt class="xref py py-attr docutils literal"><span class="pre">globals</span></tt></a> dictionary to the <em>data</em>
dictionary before calling <a class="reference internal" href="#ptemplate.template.Template.render" title="ptemplate.template.Template.render"><tt class="xref py py-meth docutils literal"><span class="pre">ptemplate.template.Template.render()</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="running-the-benchmark">
<h2>Running the benchmark<a class="headerlink" href="#running-the-benchmark" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#module-ptemplate" title="ptemplate"><tt class="xref py py-mod docutils literal"><span class="pre">ptemplate</span></tt></a> repository contains a port of the <a class="reference external" href="http://genshi.edgewall.org/wiki/GenshiPerformance">Genshi benchmark suite</a>.
To run the benchmarks:</p>
<div class="highlight-python"><pre>$ cd tests/bench
$ python basic.py | grep -v "not installed" | sort -n -k1.40bn
$ python bigtable.py | grep -v "not installed" | sort -k1.40bn</pre>
</div>
<p>You can also run benchmarks against selected template engines by passing the
engine name (ie &#8220;ptemplate&#8221;, &#8220;ctemplate&#8221;) as an argument to the benchmark
script.</p>
<p>As of 2010.04.15, the benchmark produced the following results (sorted by
&#8216;&#8217;bigtable.py&#8217;&#8216;):</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="8%" />
<col width="16%" />
<col width="25%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Engine Name</th>
<th class="head">Version</th>
<th class="head">basic.py (ms)</th>
<th class="head">bigtable.py (ms)</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Mako</td>
<td>0.3.2</td>
<td>0.71</td>
<td>190.21</td>
<td>&nbsp;</td>
</tr>
<tr><td>Genshi_text</td>
<td>0.5.1</td>
<td>2.65</td>
<td>554.41</td>
<td>&nbsp;</td>
</tr>
<tr><td>Ptemplate</td>
<td>0.1</td>
<td>3.42</td>
<td>1188.61</td>
<td>&nbsp;</td>
</tr>
<tr><td>Ctemplate</td>
<td>0.1</td>
<td>3.64</td>
<td>1296.58</td>
<td>&nbsp;</td>
</tr>
<tr><td>Genshi</td>
<td>0.5.1</td>
<td>7.75</td>
<td>1228.97</td>
<td>template</td>
</tr>
<tr><td>Genshi</td>
<td>0.5.1</td>
<td>n/a</td>
<td>1566.21</td>
<td>tag builder</td>
</tr>
<tr><td>Django</td>
<td>1.1.1</td>
<td>6.29</td>
<td>1872.76</td>
<td>&nbsp;</td>
</tr>
<tr><td>Genshi</td>
<td>0.5.1</td>
<td>n/a</td>
<td>1996.71</td>
<td>template + tag builder</td>
</tr>
<tr><td>Kid</td>
<td>0.9.6</td>
<td>15.34</td>
<td>3508.88</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The test system was:</p>
<ul class="simple">
<li>AMD Athlon(tm) 64 Processor 3200+ (&#8220;AuthenticAMD&#8221; 686-class, 512KB L2 cache)</li>
<li>1 GB RAM</li>
<li>OpenBSD 4.7-current</li>
<li>Python 2.6.3</li>
</ul>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>There have been several other efforts to bring ctemplate-like templates to
Python. For example:</p>
<blockquote>
<ul class="simple">
<li><a class="reference external" href="http://github.com/defunkt/pystache/">pystache</a>, which implements the <a class="reference external" href="http://mustache.github.com/">Mustache</a> syntax; and</li>
<li><a class="reference external" href="http://code.google.com/p/python-ctemplate/">python-ctemplate</a>, which wraps ctemplate&#8217;s C++ interface.</li>
</ul>
</blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">ptemplate</span></tt> &#8212; lightweight, data-driven templating</a><ul>
<li><a class="reference internal" href="#installing-ptemplate">Installing <tt class="docutils literal"><span class="pre">ptemplate</span></tt></a></li>
<li><a class="reference internal" href="#a-quick-tour-of-ptemplate-s-features">A quick tour of <tt class="docutils literal"><span class="pre">ptemplate</span></tt>&#8216;s features</a></li>
<li><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li><a class="reference internal" href="#ctemplate-support">ctemplate support</a></li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#ptemplate-formatter-extended-string-formatter"><tt class="docutils literal"><span class="pre">ptemplate.formatter</span></tt> &#8211; extended string formatter</a></li>
<li><a class="reference internal" href="#ptemplate-template-advanced-string-templating"><tt class="docutils literal"><span class="pre">ptemplate.template</span></tt> &#8211; advanced string templating</a></li>
<li><a class="reference internal" href="#ptemplate-ctemplate-ctemplate-like-interface"><tt class="docutils literal"><span class="pre">ptemplate.ctemplate</span></tt> &#8211; ctemplate-like interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-benchmark">Running the benchmark</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">ptemplate v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Copyright (c) 2010 Will Maier &lt;willmaier@ml1.net&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>