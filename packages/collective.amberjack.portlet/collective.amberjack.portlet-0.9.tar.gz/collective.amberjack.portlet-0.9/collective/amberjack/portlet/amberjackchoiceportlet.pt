<dl class="portlet portletAmberjackChoicePortlet"
    i18n:domain="collective.amberjack.portlet">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <span tal:condition="not:view/user_title"
              i18n:translate="title_choice_run_the_demo">Choose and run a tour</span>
        <span tal:condition="view/user_title"
              tal:content="view/user_title"/>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd"
        tal:define="portal_url context/@@plone_portal_state/portal_url">
      <img style="float:right"
           tal:attributes="src string:${portal_url}/++resource++bulb.png" />
      <ol>
        <li tal:repeat="tour view/tours">
          <tal:loop define="tour_invalid python:tour['object'].steps[0].validate(context, request)">
            <a tal:condition="not:tour_invalid"
               tal:attributes="href tour/url;
                               class python:tour_invalid and 'tour_inactive' or ''"
               tal:content="tour/title" />
            <span tal:condition="tour_invalid"
                  tal:attributes="title python:tour_invalid[0]"
                  tal:content="tour/title" />
            <span class="completed_tour" tal:condition="view/completed">
              <img tal:attributes="src string:${portal_url}/++resource++completed_tour.gif" />
            </span>
          </tal:loop>
        </li>
      </ol>
    </dd>

    <span class="portletBottomLeft"></span>
    <span class="portletBottomRight"></span>

</dl>
