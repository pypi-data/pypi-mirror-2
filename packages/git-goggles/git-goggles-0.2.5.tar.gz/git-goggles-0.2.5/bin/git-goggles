#!/usr/bin/env python

import sys
import os

from gitgoggles.codereview import get_status, complete_review, start_review, update_branches
from gitgoggles.progress import enable_progress

if __name__ == "__main__":
    if not os.path.exists('.git'):
        print 'Not within a git repository.'
        sys.exit(1)

    if len(sys.argv) == 1:
        enable_progress()
        get_status()
    elif len(sys.argv) >= 2:
        if sys.argv[1] == 'codereview':
            if len(sys.argv) == 2:
                start_review()
            else:
                complete_review()
        elif sys.argv[1] == 'update':
            update_branches()
        else:
            print 'usage: git goggles [codereview|codereview complete|update]'
