.\" Man page generated from reStructeredText.
.
.TH GROUPS.CONF 5 "2011-06-09" "1.5.1" "ClusterShell User Manual"
.SH NAME
groups.conf \- Configuration file for ClusterShell external node groups
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH DESCRIPTION
.sp
The ClusterShell library obtains node groups configuration options from the
system\-wide configuration file \fI/etc/clustershell/groups.conf\fP.
.sp
The configuration file has a format in the style of RFC 822 composed
of several sections which may be present in any order. Sections are:
.INDENT 0.0
.TP
.B Main
.
General options definition
.TP
.B \fIGroup_source\fP
.sp
External commands definition for group source \fIGroup_source\fP (map, all, list and reverse)
.UNINDENT
.SS [Main]
.sp
Configuration parameters of the \fBMain\fP section are described below.
.INDENT 0.0
.TP
.B default
.
Specify the default group source used by the NodeSet parser when the
user does not specify explicitly the group source (eg. "@io").
.UNINDENT
.SS \fIGroup_source\fP
.sp
Configuration parameters of each group source section are described below.
.INDENT 0.0
.TP
.B map
.
Specify the external shell command used to resolve a group name into a
nodeset, list of nodes or list of nodeset (separated by space characters or
by carriage returns). The variable \fI$GROUP\fP is replaced before executing the
command.
.TP
.B all
.
Optional external shell command that should return a nodeset, list of
nodes or list of nodeset of all nodes for this group source. If not
specified, the library will try to resolve all nodes by using the \fBlist\fP
external command in the same group source followed by \fBmap\fP for each group.
.TP
.B list
.
Optional external shell command that should return the list of all groups
for this group source (separated by space characters or by carriage
returns).
.TP
.B reverse
.
Optional external shell command used to find the group(s) of a single
node. The variable $NODE is previously replaced. If this upcall is not
specified, the reverse operation is computed in memory by the library from
the \fIlist\fP and \fImap\fP external calls. Also, if the number of nodes to
reverse is greater than the number of available groups, the \fIreverse\fP
external command is avoided automatically.
.UNINDENT
.sp
Each external command might return a non\-zero return code when the operation
is not doable. But if the call return zero, for instance, for a non\-existing
group, the user will not receive any error when trying to resolve such unknown
group.  The desired behaviour is up to the system administrator.
.SH RESOURCE USAGE
.sp
All external command results are cached in memory to avoid multiple calls.
.SH EXAMPLES
.sp
Simple configuration file for local groups and slurm partitions binding.
.SS \fIgroups.conf\fP
.nf
[Main]
default: local

[local]
map:  awk \-F: \(aq/^$GROUP:/ {print $2}\(aq /etc/clustershell/groups
list: awk \-F: \(aq/^w/ {print $1}\(aq /etc/clustershell/groups

[slurm]
map: sinfo \-h \-o "%N" \-p $GROUP
all: sinfo \-h \-o "%N"
list: sinfo \-h \-o "%P"
reverse: sinfo \-h \-N \-o "%P" \-n $NODE
.fi
.sp
.SH FILES
.INDENT 0.0
.TP
.B \fI/etc/clustershell/groups.conf\fP
.sp
System\-wide external node groups configuration file.
.UNINDENT
.SH SEE ALSO
.sp
\fBclush\fP(1), \fBclubak\fP(1), \fBnodeset\fP(1)
.sp
\fI\%http://clustershell.sourceforge.net/\fP
.SH AUTHOR
Stephane Thiell, CEA DAM  <stephane.thiell@cea.fr>
.SH COPYRIGHT
CeCILL-C V1
.\" Generated by docutils manpage writer.
.\" 
.
