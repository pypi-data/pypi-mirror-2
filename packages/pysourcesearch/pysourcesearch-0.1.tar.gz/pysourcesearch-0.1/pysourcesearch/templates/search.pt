<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Application</title>
<meta name="keywords" content="python web application" />
<meta name="description" content="repoze.bfg web application" />
<link href="${request.application_url}/static/default.css" rel="stylesheet" type="text/css" />
</head>
<body tal:define="searchterm python: request.params.get('q') ">
<!-- start header -->
<div id="logo">
  <h2><a href="${request.application_url}"><code>PySourceSearch</code>, a <code>repoze.bfg</code> application</a></h2>
</div>
<div id="header">
  <div id="menu">
		<p>Examples searches: "def mymethod", "class MyClass", "afile.py", "some text"</p>
  </div>
</div>
<!-- end header -->
<div id="wrapper">
  <!-- start page -->
  <div id="page">
    <!-- start content -->
    <div id="content">
		  <form method="get" action="${request.application_url}">
		    <fieldset>
		      <input class="large" size="25" type="text" id="q" name="q" value=""  tal:attributes="value searchterm"/>
		      <input type="submit" id="x" value="Search" />
					<span>Package:</span>
					<select name="package">
						<tal:repeat tal:repeat="package packages">
							<tal:con tal:condition="python: package == selected_package">
								<option tal:attributes="value package;" selected="selected" tal:content="package"></option>
							</tal:con>
							<tal:con tal:condition="python: package != selected_package">
								<option tal:attributes="value package;" tal:content="package"></option>
							</tal:con>
						</tal:repeat>
					</select>
		    </fieldset>
		  </form>
			<div class="paging" tal:condition="python: numdocs > 0">
				page : 
				<tal:rep tal:repeat="page python: paging.pages">
					 <a tal:attributes="href string:${request.application_url}?${query}&amp;page=${page}" tal:content="page" tal:omit-tag="page == paging.page">1</a> 
				</tal:rep>
				<div class="summary">
					<span tal:content="numdocs" tal:omit-tag=""></span> total matching files found.
				</div>
			</div>
			<ul tal:condition="python: numdocs > 0">
				<tal:repeat tal:repeat="docid python: results[paging.start:paging.end]">
				<li tal:attributes="class python: repeat['docid'].odd and 'odd' or 'even'">
					<tal:def tal:define="metadata python: get_metadata(docid);">
						<a tal:attributes="href string:${request.application_url}/view/${docid}?${query}"><b tal:content="python: metadata['relative_path']"></b>: <pre tal:content="python: metadata['preview']"></pre></a>
					</tal:def>
				</li>
				</tal:repeat>
			</ul>
    </div>
    <!-- end content -->
		<div class="paging" tal:condition="python: numdocs > 0">
			page : 
			<tal:rep tal:repeat="page python: paging.pages">
				 <a tal:attributes="href string:${request.application_url}?${query}&amp;page=${page}" tal:content="page" tal:omit-tag="page == paging.page">1</a> 
			</tal:rep>
			<div class="summary">
				<span tal:content="numdocs" tal:omit-tag=""></span> total matching files found.
			</div>
		</div>
    <div style="clear: both;">&nbsp;</div>
  </div>
</div>
<!-- end page -->
<!-- start footer -->
<div id="footer">
  <p id="legal">( c ) 2008. All Rights Reserved. Template design
  by <a href="http://www.freecsstemplates.org/">Free CSS
  Templates</a>.</p>
</div>
<!-- end footer -->
</body>
</html>
