<html metal:use-macro="views/errorpage/errorpage">
  <body>
   <metal:block metal:fill-slot="title">
     Страница требует авторизации
   </metal:block>
   <metal:block metal:fill-slot="text">
        <p>Страница, к которой вы обратились, требует авторизации.  Если вы незарегистрированы на нашем сайте, вам стоит
        прочитать 
	<a href="#" 
		tal:on-error="python:'краткое руководство по регистрации.'" 
		tal:attributes="href context/@@article/registration/@@absolute_url" 
		class="more">краткое руководство по регистрации.</a></p>

        <form action="."  method="post" style="border: 2px solid green; padding: 5px; margin: 20px 100px 20px 100px;"
		      tal:attributes="action request/URL" > 
		      <p>Если у вас есть openid-идентификатор, введите его в форму ниже, выберете провайдера и нажмите 
		      кнопку "Войти через OpenID".</p>
          <b>OpenID:</b>
          <input type="text" name="openid" 
		        tal:attributes="value request/openid | nothing"/>
	          <b>@</b><select name="provider" size="1">
	          <option value="">Не выбран</option>
              <option value="AOL" tal:attributes="selected python:request.get('provider',None)=='AOL' or nothing">AOL</option>
              <option value="Blogger" tal:attributes="selected python:request.get('provider',None)=='Blogger' or nothing">Blogger</option>
              <option value="Flickr" tal:attributes="selected python:request.get('provider',None)=='Flickr' or nothing">Flickr</option>
              <option value="LiveDoor" tal:attributes="selected python:request.get('provider',None)=='LiveDoor' or nothing">LiveDoor</option>
              <option value="LiveJournal" tal:attributes="selected python:request.get('provider',None)=='LiveJournal' or nothing">LiveJournal</option>
              <option value="SmugMug" tal:attributes="selected python:request.get('provider',None)=='SmugMug' or nothing">SmugMug</option>
              <option value="Technorati" tal:attributes="selected python:request.get('provider',None)=='Technorati' or nothing">Technorati</option>
              <option value="Vox" tal:attributes="selected python:request.get('provider',None)=='Vox' or nothing">Vox</option>
              <option value="Yahoo" tal:attributes="selected python:request.get('provider',None)=='Yahoo' or nothing">Yahoo</option>
              <option value="WordPress" tal:attributes="selected python:request.get('provider',None)=='WordPress' or nothing">WordPress</option>
              <option value="Yandex" tal:attributes="selected python:request.get('provider',None)=='Yandex' or nothing">Yandex</option>
	        </select>
          <input type="submit" value="Войти через OpenID" class="button" /><br>
          <input type="hidden" name="returnurl" value="" tal:attributes="value view/returnurl" tal:on-error="python:''"/>
          <input type="checkbox" name="save"/> запомнить меня
          <p>После нажатия на кнопку вы будете переадресованы на страницу вашего openid-провайдера,
           который подтвердит ваш допуск.</p>
        </form>

        <form action="."  method="post" style="border: 2px solid green; padding: 5px; margin: 20px 100px 20px 100px;"
		      tal:attributes="action request/URL" > 
		      <p>Если у вас есть учетная запись на нашем сайте, то введите ваш логин и пароль, затем нажмите кнопку "Войти"<p>
          <b>Login:</b>
          <input type="text" name="login" 
		        tal:attributes="value request/login | nothing"/>
          <input type="password" name="password"  />
          <input type="submit" value="Войти" class="button" /><br>
          <input type="checkbox" name="save"/> запомнить меня
          <input type="hidden" name="returnurl" value="" tal:attributes="value view/returnurl" tal:on-error="python:''"/>
          <p tal:on-error="python:''"> Если вы не помните ваш пароль, то
                прочитайте о том <a href="#" tal:attributes="href
                context/@@article/restorepasswd" class="more">как
                восстановить пароль</a></p>
        </form>

        <div style="font-size: 12pt; font-weight: bold; background-color: #c0c0c0; color: #000000; margin: 5px;
                    border: solid 2px red; padding: 5px; text-align: center; display: block;"
	          tal:define="msg request/++nsinterface++ng.app.openid.interfaces.IOpenIDErrorMessage"
            tal:condition="msg/haserror">
            <b><tal:block content="msg/title"/></b>
            <hr width="50%" align="center"/>
            <tal:block content="msg/message"/>
        </div> 

        <center>
	        <form action="" method="post"><input type="submit" name="dologin" value="Вход для персонала"></form>
        </center>

   </metal:block>
  </body>
</html>
