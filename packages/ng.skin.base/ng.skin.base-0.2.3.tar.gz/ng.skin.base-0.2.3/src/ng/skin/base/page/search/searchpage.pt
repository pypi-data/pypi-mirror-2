<html metal:use-macro="views/@@standard_macros/page">
  <body metal:fill-slot="body"  tal:omit-tag="">
    <tal:block condition="python:'common' in request.form" 
      define="rext  context/@@requestext; p python:rext.setParameters(exclude=['urlpath'])">
      <h1 class="abstract"> Поиск по слову: <tal:block content="request/form/common"/> </h1>
      <div class="trace">
        <tal:block condition="context/++nsinterface++ng.adapter.path.interfaces.IPath/titledpath"> 
          <tal:block tal:condition="request/form/urlpath | nothing">
            Обратите внимание: поиск производится в текущем каталоге 
            <i>"<tal:block content="context/++nsinterface++ng.adapter.path.interfaces.IPath/titledpath"/>"</i>,
            если хотите повторить поиск от корня
            <a tal:attributes="href python:'@@searchpage.html?' + rext.query()"
            >нажмите здесь</a>
          </tal:block>  		  
          <tal:block tal:condition="not:request/form/urlpath | nothing">
            Обратите внимание: поиск производится от корня, если хотите ограничить поиск текущим каталогом
            <i>"<tal:block content="context/++nsinterface++ng.adapter.path.interfaces.IPath/titledpath"/>"</i>,
            <a tal:attributes="href python:'@@searchpage.html?urlpath=1&' + rext.query()"
            >нажмите здесь</a>
          </tal:block>  		  
        </tal:block>  		  
        <tal:block condition="not:context/++nsinterface++ng.adapter.path.interfaces.IPath/titledpath"> 
          Вы начали поиск от корня сайта, если вы спуститесь в один из подкаталогов, то сможете
          ограничить поиск только им.
        </tal:block>  		  
      </div>
		</tal:block> 

    <tal:block condition="python: 'common' in request.form and not request.form['common'].strip()">
      <div class="warning">Запрос пустой</div>
    </tal:block>

    <tal:block condition="python: 'common' not in request.form or request.form['common'].strip()">
      <tal:block tal:define="pager view/pager/@@pager; p python:pager.setPagerParameters(context=context)">

        <tal:block condition="python:'common' not in request.form">
          <h1 class="abstract">Обращение к Wiki: <tal:block content="view/nextkeyword"/> </h1>
          <div class="trace" tal:condition="python:pager.len > 1">Если вы попали на эту страницу, значит вики содержит
          более одной страницы, на которую стоит ссылка. Ниже приведен список всех найденных страниц.
          </div>
        </tal:block>


        <metal:block use-macro="views/ng_skin_macros/values">
          <metal:block fill-slot="title">Найдено:</metal:block>
        </metal:block>      

        <div class="abstract" tal:condition="python:pager.len == 0">
          <div class="warning">К сожалению, ничего подходящего не удалось найти.</div>
          <p>Искать на Google:   
              <form action="http://www.google.com/search"><input type="submit" value="Google"/>
              <input type="hidden" name="q" tal:attributes="value view/nextkeyword"></form> </p>
          <p>Искать на Wikipedia:
              <form action="http://ru.wikipedia.org/wiki/Special:Search"><input type="submit" value="Wikipedia"/><input type="hidden" name="search" tal:attributes="value view/nextkeyword"></form>
          </p>
        </div>
      </tal:block>
    </tal:block>
  </body>
</html>
                    
