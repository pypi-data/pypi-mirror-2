{% extends "base.html" %}

{% load i18n entity_permissions %}

{% block extracss %}
<link type="text/css" href="{{ STATIC_URL }}css/samlmetajs.css" rel="Stylesheet" />
<link type="text/css" href="{{ STATIC_URL }}css/terms-of-use.css" rel="Stylesheet" />
{% endblock %}

{% block content %}
{% canedit entity %}{% include "entity/menu.html" %}{% endcanedit %}
<section class="mainContent">

  <hgroup>
    <h1>{% trans "Edit metadata" %}</h1>
    <h2>{{ entity.name }}</h2>
  </hgroup>

  <div class="accordion">

    <h3{% ifequal activate "text" %} class="active"{% endifequal %}>
      <a href="#">{% trans "By text editing ..." %}</a></h3>
    <div>{{ text_html|safe }}</div>

    <h3{% ifequal activate "upload" %} class="active"{% endifequal %}>
      <a href="#">{% trans "By uploading a file ..." %}</a></h3>
    <div>{{ file_html|safe }}</div>

    <h3{% ifequal activate "remote" %} class="active"{% endifequal %}>
      <a href="#">{% trans "By fetching a remote URL ..." %}</a></h3>
    <div>{{ remote_html|safe }}</div>

  </div>
</section>
{% endblock %}

{% block extrajs %}
{% if needs_google_maps %}
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
{% endif %}
<script type="text/javascript" src="{{ STATIC_URL }}/js/SAMLmetaJS/samlmeta.js"></script>
{% for plugin in samlmetajs_plugins %}
<script type="text/javascript" src="{{ STATIC_URL }}/js/SAMLmetaJS/samlmeta.plugin.{{ plugin }}.js"></script>
{% endfor %}
<script type="text/javascript" src="{{ STATIC_URL }}/js/SAMLmetaJS/samlmeta.xml.js"></script>

<script type="text/javascript">
(function($) {
    $(document).ready(function(){
        $(".accordion").accordion({active: ".active", autoHeight: false});
        $("textarea#id_metadata_text").SAMLmetaJS();
        $("form#text_edit_form").submit(
            function () {
                $("a[href='#rawmetadata']").click();
                return true;
            }
        );
    });
})(jQuery);
</script>
<script type="text/javascript" src="{{ STATIC_URL }}js/terms-of-use.js"></script>
{% endblock %}
