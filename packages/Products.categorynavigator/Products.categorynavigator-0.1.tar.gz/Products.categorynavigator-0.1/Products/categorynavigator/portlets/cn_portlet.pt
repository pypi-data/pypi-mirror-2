<div metal:define-macro="portlet" tal:omit-tag="">

    <tal:block>

        <dl id="category-selector" class="portlet">

            <dt class="portletHeader">Maatregelen</dt>

            <dd class="portletItemSingle odd" tal:define="selectedCategories request/Subject | nothing;
                                                          portal context/@@plone_portal_state/portal;">
                <div tal:condition="view/vtcExists">
                    <ul>
                         <li class="cn-category-title" tal:repeat="vtcCat view/getVTCategories">
                                 <span tal:content="vtcCat/id">
                                     category
                                 </span>
                                 <ul>
                                     <li class="nc-category" tal:repeat="cat vtcCat/keywords">
                                         <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString(selectedCategories, subtracting=cat) or portal.absolute_url() + view.generateQueryString(selectedCategories, adding=cat)">
                                             <span tal:condition="python:selectedCategories is not None and cat in selectedCategories" tal:omit-tag="">
                                                 &gt;
                                             </span>
                                             <span tal:condition="python:selectedCategories is None or cat not in selectedCategories" tal:omit-tag="">
                                                    +
                                             </span>
                                             <span tal:content="cat">
                                                 category
                                             </span>
                                         </a>
                                     </li>
                                 </ul>
                         </li>
                    </ul>
                 </div>
                 
                 <div tal:condition="not: view/vtcExists">
                    <ul>
                         <li class="cn-category-title" tal:repeat="cat view/getSiteCategoriesAsList">
                            <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString(selectedCategories, subtracting=cat) or portal.absolute_url() + view.generateQueryString(selectedCategories, adding=cat)">
                                <span tal:condition="python:selectedCategories is not None and cat in selectedCategories" tal:omit-tag="">
                                    &gt;
                                </span>
                                <span tal:condition="python:selectedCategories is None or cat not in selectedCategories" tal:omit-tag="">
                                       +
                                </span>
                                <span tal:content="cat">
                                    category
                                </span>
                             </a>
                         </li>
                    </ul>
                 </div>
            </dd>

        </dl>

    </tal:block>

</div>