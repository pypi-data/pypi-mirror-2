
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Getting Started with Py4J &mdash; Py4J</title>
    <link rel="stylesheet" href="_static/py4jdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  'true'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Py4J" href="index.html" />
    <link rel="next" title="3. Advanced Topics" href="advanced_topics.html" />
    <link rel="prev" title="1. Installing Py4J" href="install.html" /> 
  </head>
  <body>
  	<div class="page">
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 5px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced_topics.html" title="3. Advanced Topics"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="1. Installing Py4J"
             accesskey="P">previous</a> |</li>
    <li><a href="index.html">Home</a> |</li>
	<li><a href="download.html">Download</a> |</li>
	<li><a href="contents.html">Documentation</a> |</li>
	<li><a href="http://py4j.wordpress.com">Blog</a> |</li>
	<li><a href="https://sourceforge.net/apps/trac/py4j/wiki">Trac</a> |</li>
	<li><a href="about.html">About</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="contents.html">On This Page</a></h3>
            <ul>
<li><a class="reference internal" href="#">2. Getting Started with Py4J</a><ul>
<li><a class="reference internal" href="#writing-the-java-program">2.1. Writing the Java Program</a></li>
<li><a class="reference internal" href="#writing-the-python-program">2.2. Writing the Python Program</a></li>
<li><a class="reference internal" href="#where-to-go-from-here">2.3. Where to go from here</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="install.html"
                                  title="previous chapter">1. Installing Py4J</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="advanced_topics.html"
                                  title="next chapter">3. Advanced Topics</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/getting_started.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started-with-py4j">
<h1>2. Getting Started with Py4J<a class="headerlink" href="#getting-started-with-py4j" title="Permalink to this headline">¶</a></h1>
<p>This short tutorial assumes that you have already <a class="reference internal" href="install.html#install-instructions"><em>installed</em></a> Py4J and that you are using
the latest version. In this tutorial, you will write a simple Stack class in Java and then, you will write a Python
program that accesses the stack.</p>
<p>You will also see how Java lists can be manipulated as Python lists.</p>
<div class="section" id="writing-the-java-program">
<h2>2.1. Writing the Java Program<a class="headerlink" href="#writing-the-java-program" title="Permalink to this headline">¶</a></h2>
<p>The first step is to write a short Java program. Here you will create a Stack class that offers two basic services and
two advanced services:</p>
<ol class="arabic simple">
<li>Push an element at the top of the stack.</li>
<li>Pop the element at the top of the stack.</li>
<li>Get the list that contains the stack.</li>
<li>Push all elements contained in a list.</li>
</ol>
<p>Here is the code of the stack:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="n">py4j</span><span class="o">.</span><span class="na">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.LinkedList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stack</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">internalList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">String</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">internalList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">element</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">pop</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">internalList</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">getInternalList</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">internalList</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">pushAll</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">element</span> <span class="o">:</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To make the stack available to a Python program, you need something that will allow Python programs to:</p>
<ol class="arabic simple">
<li>Access the JVM running your program.</li>
<li>Access the objects that you created in the JVM.</li>
</ol>
<p>These features are provided by two objects. The first object is a <a class="reference external" href="_static/javadoc/index.html?py4j/GatewayServer.html">GatewayServer</a> instance: it allows Python programs to communicate with the JVM through a
local network socket. The second object is called an <em>entry point</em> and it can be any object (e.g., a Facade, a singleton, a list, etc.).</p>
<p>The <a class="reference external" href="_static/javadoc/index.html?py4j/GatewayServer.html">GatewayServer</a> provided by Py4J can be used as is but you can
also configure it and specify a network address and port, if the defaults (localhost, 25333) do not work for you. The
<tt class="docutils literal"><span class="pre">GatewayServer</span></tt> constructor takes an object (the entry point) as a parameter.</p>
<p>Here is an example of an example of an entry point that would allow a Python program to access a pre-configured stack:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="n">py4j</span><span class="o">.</span><span class="na">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">py4j.GatewayServer</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StackEntryPoint</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">Stack</span> <span class="n">stack</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">StackEntryPoint</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">stack</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">();</span>
      <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&quot;Initial Item&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Stack</span> <span class="nf">getStack</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">stack</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">GatewayServer</span> <span class="n">gatewayServer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GatewayServer</span><span class="o">(</span><span class="k">new</span> <span class="n">StackEntryPoint</span><span class="o">());</span>
        <span class="n">gatewayServer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Gateway Server Started&quot;</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>There are a few important lines in this code. First, you declare a class that will provide an access to a pre-configured stack:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="n">Stack</span> <span class="nf">getStack</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">stack</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then, you create a main method. This main method could be located in another class. The first thing you do in the main
method is to initialize a <a class="reference external" href="_static/javadoc/index.html?py4j/GatewayServer.html">GatewayServer</a> and link it to an
entry point.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">GatewayServer</span> <span class="n">gatewayServer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GatewayServer</span><span class="o">(</span><span class="k">new</span> <span class="n">StackEntryPoint</span><span class="o">());</span>
</pre></div>
</div>
<p>Finally, you need to start the gateway so it can accept incoming Python requests:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">gatewayServer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</pre></div>
</div>
<p>You are now ready to try your Java program. Just execute the StackGateway class in your favorite development environment
and check that you see the message <tt class="docutils literal"><span class="pre">Gateway</span> <span class="pre">Server</span> <span class="pre">Started</span></tt></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When running your application, you may get a <tt class="docutils literal"><span class="pre">java.net.BindException:</span> <span class="pre">Address</span> <span class="pre">already</span> <span class="pre">in</span> <span class="pre">use</span></tt> exception. There are
two common causes: either you are already running another instance of your program or another program on your
computer is listening to the port 25333. To change the port, replace this line:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">GatewayServer</span> <span class="n">gatewayServer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GatewayServer</span><span class="o">(</span><span class="k">new</span> <span class="n">StackEntryPoint</span><span class="o">());</span>
</pre></div>
</div>
<p>by this line (use any port number):</p>
<div class="last highlight-java"><div class="highlight"><pre><span class="n">GatewayServer</span> <span class="n">gatewayServer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GatewayServer</span><span class="o">(</span><span class="k">new</span> <span class="n">StackEntryPoint</span><span class="o">(),</span> <span class="mi">25334</span><span class="o">);</span>
</pre></div>
</div>
</div>
<p>You are now done. Because your program will wait for connections, it will never exit. To terminate your program, you
have to kill it (e.g., Ctrl-C). If you initialize the GatewayServer in another method, you can also call
<tt class="docutils literal"><span class="pre">gatewayServer.shutdown()</span></tt>.</p>
</div>
<div class="section" id="writing-the-python-program">
<h2>2.2. Writing the Python Program<a class="headerlink" href="#writing-the-python-program" title="Permalink to this headline">¶</a></h2>
<p>You will now write the python program that will access your Java program. Start a Python interpreter and make sure that
Py4J is in your PYTHONPATH.</p>
<p>The first step is to import the necessary Py4J class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">py4j.java_gateway</span> <span class="kn">import</span> <span class="n">JavaGateway</span>
</pre></div>
</div>
<p>Next, initialize a <a class="reference internal" href="py4j_java_gateway.html#api-javagateway"><em>JavaGateway</em></a>. The default parameters are usually sufficient for common cases.
When you create a <a class="reference internal" href="py4j_java_gateway.html#api-javagateway"><em>JavaGateway</em></a>, Python tries to connect to a JVM with a gateway (localhost on
port 25333).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gateway</span> <span class="o">=</span> <span class="n">JavaGateway</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you receive the following error: <tt class="docutils literal"><span class="pre">socket.error:</span> <span class="pre">[Errno</span> <span class="pre">111]</span> <span class="pre">Connection</span> <span class="pre">refused</span></tt>, it means that there is no JVM
waiting for a connection. Check that your Java program is still running, or if you did not start it, now would be a good
time to do so :-)</p>
</div>
<p>From the gateway object, we can access the entry point by referring to its <tt class="docutils literal"><span class="pre">entry_point</span></tt> member:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span> <span class="o">=</span> <span class="n">gateway</span><span class="o">.</span><span class="n">entry_point</span><span class="o">.</span><span class="n">getStack</span><span class="p">()</span>
</pre></div>
</div>
<p>The stack variable now contains a stack. Try to push and pop a few elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;First </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&#39;item&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;Second item&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">u&#39;Second item&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">u&#39;First item&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">u&#39;Initial Item&#39;</span>
</pre></div>
</div>
<p>Now the stack is supposed to be empty. Here is what happens if you try to pop it again.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n-Identifier">&lt;module&gt;</span>
  File <span class="nb">&quot;py4j/java_gateway.py&quot;</span>, line <span class="m">161</span>, in <span class="n-Identifier">__call__</span>
    <span class="n">return_value</span> <span class="o">=</span> <span class="n">get_return_value</span><span class="p">(</span><span class="n">answer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gateway_client</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
  File <span class="nb">&quot;py4j/java_gateway.py&quot;</span>, line <span class="m">74</span>, in <span class="n-Identifier">get_return_value</span>
    <span class="k">raise</span> <span class="n">Py4JError</span><span class="p">(</span><span class="s">&#39;An error occurred while calling </span><span class="si">%s%s%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">target_id</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
<span class="nc">py4j.java_gateway.Py4JError</span>: <span class="n-Identifier">An error occurred while calling o0.pop. Trace:</span>
<span class="go">java.lang.IndexOutOfBoundsException: Index: 0, Size: 0</span>
<span class="go">    at java.util.LinkedList.entry(LinkedList.java:365)</span>
<span class="go">    at java.util.LinkedList.remove(LinkedList.java:357)</span>
<span class="go">    at py4j.examples.Stack.pop(Stack.java:42)</span>
<span class="go">    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span>
<span class="go">    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</span>
<span class="go">    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</span>
<span class="go">    at java.lang.reflect.Method.invoke(Method.java:597)</span>
<span class="go">    at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:117)</span>
<span class="go">    at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:392)</span>
<span class="go">    at py4j.Gateway.invoke(Gateway.java:239)</span>
<span class="go">    at py4j.AbstractCommand.invokeMethod(AbstractCommand.java:120)</span>
<span class="go">    at py4j.CallCommand.execute(CallCommand.java:77)</span>
<span class="go">    at py4j.GatewayConnection.run(GatewayConnection.java:158)</span>
<span class="go">    at java.lang.Thread.run(Thread.java:619)</span>
</pre></div>
</div>
<p>You get a <a class="reference internal" href="py4j_java_gateway.html#api-py4jerror"><em>Py4JError</em></a> because there was an exception on the JVM side. In addition, you can see the
type of exception that was thrown on the Java side and its stack trace.</p>
<p>Now, you will experiment with lists. Add another element and get the internal list of the stack:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s">&#39;First item&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">internal_list</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">getInternalList</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">internal_list</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">internal_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">u&#39;First item&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">internal_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Second item&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">internal_list</span>
<span class="go">[u&#39;First item&#39;, u&#39;Second item&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">getInternalList</span><span class="p">()</span>
<span class="go">[u&#39;First item&#39;, u&#39;Second item&#39;]</span>
</pre></div>
</div>
<p>As you can see, lists created on the JVM act like Python lists: you can use the <tt class="docutils literal"><span class="pre">[]</span></tt> operator and the usual list
methods like <tt class="docutils literal"><span class="pre">len</span></tt> and <tt class="docutils literal"><span class="pre">append</span></tt>. Notice that when you change the list on the Python side, it is also changed on the
Java side. Now try to slice the list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_list</span> <span class="o">=</span> <span class="n">internal_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_list</span>
<span class="go">[u&#39;First item&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Third item&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_list</span>
<span class="go">[u&#39;First item&#39;, u&#39;Third item&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">internal_list</span>
<span class="go">[u&#39;First item&#39;, u&#39;Second item&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">getInternalList</span><span class="p">()</span>
<span class="go">[u&#39;First item&#39;, u&#39;Second item&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">pushAll</span><span class="p">(</span><span class="n">sliced_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">getInternalList</span><span class="p">()</span>
<span class="go">[u&#39;Third item&#39;, u&#39;First item&#39;, u&#39;First item&#39;, u&#39;Second item&#39;]</span>
</pre></div>
</div>
<p>Slices act like real Python slices: they are a copy of the original list, no more, no less. This is why the original
list is not modified when you modify the slice. When you create a slice, Py4J first creates the slice on the JVM side so
you are really accessing a Java list contained in the JVM.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the keen Java programmers among you, note that the slice operation is <strong>NOT</strong> implemented with the <tt class="docutils literal"><span class="pre">subList</span></tt>
method in Java, because <tt class="docutils literal"><span class="pre">subList</span></tt> returns a view, not a copy, of the list: when the original list changes, the view
generally becomes invalid so this is not a suitable replacement for a slice.</p>
</div>
<p>In the previous example, you also tried to pass a list as a parameter of the pushAll method. See what happens if you try
to pass a pure Python list that was not returned by the JVM:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">pushAll</span><span class="p">([</span><span class="s">&#39;Fourth item&#39;</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n-Identifier">&lt;module&gt;</span>
  File <span class="nb">&quot;py4j/java_gateway.py&quot;</span>, line <span class="m">158</span>, in <span class="n-Identifier">__call__</span>
    <span class="n">args_command</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">get_command_part</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
  File <span class="nb">&quot;py4j/java_gateway.py&quot;</span>, line <span class="m">68</span>, in <span class="n-Identifier">get_command_part</span>
    <span class="n">command_part</span> <span class="o">=</span> <span class="n">REFERENCE_TYPE</span> <span class="o">+</span> <span class="n">parameter</span><span class="o">.</span><span class="n">get_object_id</span><span class="p">()</span>
<span class="nc">AttributeError</span>: <span class="n-Identifier">&#39;list&#39; object has no attribute &#39;get_object_id&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">getInternalList</span><span class="p">()</span>
<span class="go">[u&#39;Third item&#39;, u&#39;First item&#39;, u&#39;First item&#39;, u&#39;Second item&#39;]</span>
</pre></div>
</div>
<p>As of version 0.4, Py4J does not support the conversion from pure Python lists to Java list. This is a feature that will
likely be implemented future versions.</p>
<p>Python has powerful introspection abilities that are slowly being replicated by Py4J. For example, a JavaGateway
allow you to list all the members available in an object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gateway</span><span class="o">.</span><span class="n">help</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span>
<span class="go">Help on class Stack in package py4j.examples:</span>

<span class="go">Stack {</span>
<span class="go">|</span>
<span class="go">|  Methods defined here:</span>
<span class="go">|</span>
<span class="go">|  getInternalList() : List</span>
<span class="go">|</span>
<span class="go">|  pop() : String</span>
<span class="go">|</span>
<span class="go">|  push(String) : void</span>
<span class="go">|</span>
<span class="go">|  pushAll(List) : void</span>
<span class="go">|</span>
<span class="go">|  ------------------------------------------------------------</span>
<span class="go">|  Fields defined here:</span>
<span class="go">|</span>
<span class="go">|  ------------------------------------------------------------</span>
<span class="go">|  Internal classes defined here:</span>
<span class="go">|</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Finally, you do not need an entry point to create and access objects. You can use the <tt class="docutils literal"><span class="pre">jvm</span></tt> member to call
constructors and static members:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">java_list</span> <span class="o">=</span> <span class="n">gateway</span><span class="o">.</span><span class="n">jvm</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">ArrayList</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">java_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">214</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">java_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gateway</span><span class="o">.</span><span class="n">jvm</span><span class="o">.</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Collections</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">java_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">java_list</span>
<span class="go">[120, 214]</span>
</pre></div>
</div>
</div>
<div class="section" id="where-to-go-from-here">
<h2>2.3. Where to go from here<a class="headerlink" href="#where-to-go-from-here" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You can read the <a class="reference internal" href="advanced_topics.html"><em>Advanced Topics</em></a> to learn more about collections, callbacks and the Py4J
memory and threading model.</li>
<li>You can explore the <a class="reference internal" href="py4j_python.html"><em>Py4J Python API</em></a> or the <a class="reference internal" href="py4j_java.html"><em>Py4J Java API</em></a>.</li>
<li>Look at the <a class="reference internal" href="faq.html"><em>FAQ</em></a>.</li>
</ul>
</div>
</div>


          </div>
		  		
				<div class="helpbar">
					<h3>Questions/Feedback?</h3>
					<ul>
						<li>Try the <a href="faq.html">FAQ</a> -- It answers many questions.</li>
						<li>Search for information in the <a href="http://sourceforge.net/mailarchive/forum.php?forum_name=py4j-users">archives of the py4j-users mailing list</a>, or <a href="https://lists.sourceforge.net/lists/listinfo/py4j-users">post a question</a>.</li>
						<li>Check out the <a href="http://sourceforge.net/apps/trac/py4j/wiki/HowTos">user-contributed how-tos</a> or contribute one yourself.</li>
						<li>If you notice errors with this documentation, <a href="http://sourceforge.net/apps/trac/py4j/newticket">open a ticket</a> and let us know. Please, only open a ticket for feedback or improvements on the docs. To get help, use the links above!</li>
					</ul>
				</div>
				<script type="text/javascript">  var disqus_developer = 0; </script> 
				<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/py4j/embed.js"></script><noscript><a href="http://disqus.com/forums/py4j/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
				
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 5px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="advanced_topics.html" title="3. Advanced Topics"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="1. Installing Py4J"
             >previous</a> |</li>
    <li><a href="index.html">Home</a> |</li>
	<li><a href="download.html">Download</a> |</li>
	<li><a href="contents.html">Documentation</a> |</li>
	<li><a href="http://py4j.wordpress.com">Blog</a> |</li>
	<li><a href="https://sourceforge.net/apps/trac/py4j/wiki">Trac</a> |</li>
	<li><a href="about.html">About</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009-2010, Barthélémy Dagenais.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </div>
  
  
  <script type="text/javascript">
      //<![CDATA[
      (function(){
          var links = document.getElementsByTagName('a');
          var query = '?';
          for (var i = 0; i < links.length; i++) {
              if (links[i].href.indexOf('#disqus_thread') >= 0) {
                  query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
              }
          }
          document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/py4j/get_num_replies.js' + query + '"></' + 'script>');
      })();
      //]]>
  </script>
  
  </body>
  

</html>