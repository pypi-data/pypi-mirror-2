
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Kivy language &mdash; Kivy v1.0.1-dev documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1-dev',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/kivy.js"></script>
    <link rel="top" title="Kivy v1.0.1-dev documentation" href="index.html" />
    <link rel="up" title="Kivy framework" href="api-kivy.html" />
    <link rel="next" title="Asynchronous data loader" href="api-kivy.loader.html" />
    <link rel="prev" title="Gesture recognition" href="api-kivy.gesture.html" /> 
  </head>
  <body>

	<div id="topbar">
		<div id="logo">
			<a href="http://kivy.org/docs/">
				<img src="_static/kivy-logo.png" alt="Logo"/>
			</a>
		</div>
		<div id="menu">
			<ul class="navigation">
				<li><a href="http://kivy.org/">&laquo; Back to kivy.org</a></li>
				<li><a href="index.html">Home</a></li>
				<li><a href="index.html#user-s-guide">User's Guide</a></li>
				<li><a href="guide-index.html">Programming Guide</a></li>
				<li><a href="api-index.html">API Reference</a></li>
				<li><a href="faq.html">FAQ</a></li>
				<li>
					<form class="search" action="search.html" method="get">
						&nbsp;
						<input type="hidden" name="check_keywords" value="yes" />
						<input type="hidden" name="area" value="default" />
						<input type="text" class="text" name="q" />
					</form>
				</li>
			</ul>
		</div>
		<div id="toggleheader"></div>
	</div>

    <div id="wrapper">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
		  <h3><a href="index.html">Table Of Contents</a></h3>
		  <ul>
<li><a class="reference internal" href="#">Kivy language</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#syntax-of-a-kv-file">Syntax of a kv file</a></li>
<li><a class="reference internal" href="#value-expression-and-reserved-keyword">Value expression and reserved keyword</a></li>
<li><a class="reference internal" href="#relation-between-values-and-properties">Relation between values and properties</a></li>
<li><a class="reference internal" href="#graphical-instructions">Graphical instructions</a></li>
</ul>
</li>
</ul>

		  <h3>Related Topics</h3>
		  <ul>
			  <li>Previous: <a href="api-kivy.gesture.html" title="previous chapter">Gesture recognition</a></li>
			  <li>Next: <a href="api-kivy.loader.html" title="next chapter">Asynchronous data loader</a></li>
		  </ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-kivy.lang">
<span id="kivy-language"></span><h1>Kivy language<a class="headerlink" href="#module-kivy.lang" title="Permalink to this headline">¶</a></h1>
<p>Kivy language is a language dedicated for describing user interface and
interactions. You could compare this language to QML of Qt
(<a class="reference external" href="http://qt.nokia.com">http://qt.nokia.com</a>), but we are including new concept like the rules
definitions, templating and so on.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The language permit you to create:</p>
<blockquote>
<dl class="docutils">
<dt>Rule</dt>
<dd>The rule is like CSS rules. You create a rule to match a specific class
or widget in your tree. You can automatically create interactions or
adding graphicals instructions to a specific widget (like all the
widgets with the attribute cls=test).</dd>
<dt>Root widget</dt>
<dd>You can use the language to create your user interface. A kv file can
contain only one root widget.</dd>
<dt>Template</dt>
<dd><p class="first">This will be used to create part of your application, like the list
content. If you want to design the look of an entry in a list (icon in
the left, text in the right), you will use Template for that.</p>
<p class="last">For the moment, templating are not yet designed in the language, we are
still working on it. Check the issue #17
(<a class="reference external" href="https://github.com/tito/kivy/issues#issue/17">https://github.com/tito/kivy/issues#issue/17</a>)</p>
</dd>
</dl>
</blockquote>
</div>
<div class="section" id="syntax-of-a-kv-file">
<h2>Syntax of a kv file<a class="headerlink" href="#syntax-of-a-kv-file" title="Permalink to this headline">¶</a></h2>
<p>A kivy language file must be ended by the .kv extension.</p>
<p>The content of the file must always start with the kivy header, where <cite>version</cite>
must be replaced with the kivy language version you&#8217;re using. For now, use
1.0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#:kivy `version`</span>

<span class="sb">`content`</span>
</pre></div>
</div>
<p>The <cite>content</cite> can contain rules, root widget and template:</p>
<div class="highlight-python"><pre># syntax of a rule
&lt;Rule1,Rule2&gt;:
    .. definitions ..

&lt;Rule3&gt;:
    .. definitions ..

# syntax for creating a root widget
RootClassName:
    .. definitions ..</pre>
</div>
<p>Whatever is it&#8217;s an rule, root widget or template, the definition should look
like this:</p>
<div class="highlight-python"><pre>&lt;ClassName&gt;:
    prop1: value1
    prop2: value2

    canvas:
        CanvasInstruction1:
            canvasprop1: value1
        CanvasInstruction2:
            canvasprop2: value2

    AnotherClass:
        prop3: value1</pre>
</div>
<p><cite>prop1</cite> and <cite>prop2</cite> are the properties of <cite>ClassName</cite> and <cite>prop3</cite> is the
property of <cite>AnotherClass</cite>. If the property doesn&#8217;t exist in the class, an
<a class="reference internal" href="api-kivy.properties.html#kivy.properties.ObjectProperty" title="kivy.properties.ObjectProperty"><tt class="xref py py-class docutils literal"><span class="pre">ObjectProperty</span></tt></a> will be automatically created and added
to the instance.</p>
<p><cite>AnotherClass</cite> will be created and added as a child of <cite>ClassName</cite> instance.</p>
<ul class="simple">
<li>The indentation is important, and must be 4 spaces. Tabs are not allowed.</li>
<li>The value of a property must be single line. (we may change this in a future</li>
</ul>
<p>version.)
- The <cite>canvas</cite> property is special: you can put graphics class inside it to
create your graphical representation of the current class.</p>
<p>Here is an example of a kv file that contain a root widget:</p>
<div class="highlight-python"><pre>#:kivy 1.0

Button:
    text: 'Hello world'</pre>
</div>
</div>
<div class="section" id="value-expression-and-reserved-keyword">
<h2>Value expression and reserved keyword<a class="headerlink" href="#value-expression-and-reserved-keyword" title="Permalink to this headline">¶</a></h2>
<p>The value is a python expression. This expression can be static or dynamic,
that&#8217;s mean the value can use the values of other properties using reserved
keywords.</p>
<blockquote>
<dl class="docutils">
<dt>self</dt>
<dd><p class="first">The keyword self reference the &#8220;current widget instance&#8221;:</p>
<div class="last highlight-python"><pre>Button:
    text: 'My state is %s' % self.state</pre>
</div>
</dd>
<dt>root</dt>
<dd><p class="first">This keyword is available only in rules definition, and represent the
root widget of the rule (the first instance of the rule):</p>
<div class="last highlight-python"><pre>&lt;Widget&gt;:
    custom: 'Hello world'
    Button:
        text: root.custom</pre>
</div>
</dd>
</dl>
</blockquote>
<p>Also, if a class definition contain an id, you can use it as a keyword:</p>
<div class="highlight-python"><pre>&lt;Widget&gt;:
    Button:
        id: 'btn1'
    Button:
        text: 'The state of btn1 is %s' % btn1.state</pre>
</div>
<p>Please note that the id will be not available in the Widget instance: the <cite>id</cite>
attribute will be not used.</p>
</div>
<div class="section" id="relation-between-values-and-properties">
<h2>Relation between values and properties<a class="headerlink" href="#relation-between-values-and-properties" title="Permalink to this headline">¶</a></h2>
<p>When you use kv language, we are doing magical stuff to automatically get things
work. You must know that <a class="reference internal" href="api-kivy.properties.html"><em>Properties</em></a> implement the observer
pattern: you can bind your own function to be called when the value of a
property change.</p>
<p>Kv language detect properties in your <cite>value</cite>, and create callback to
automatically update the property from your expression.</p>
<p>Simple example of using a property:</p>
<div class="highlight-python"><pre>Button:
    text: str(self.state)</pre>
</div>
<p>In this example, we are detecting <cite>self.state</cite> as a dynamic value. Since the
<a class="reference internal" href="api-kivy.uix.button.html#kivy.uix.button.Button.state" title="kivy.uix.button.Button.state"><tt class="xref py py-data docutils literal"><span class="pre">state</span></tt></a> of the button can change at every moment,
we are binding this value expression to the state property of the Button.
Everytime the button state changed, the text property will be updated.</p>
<p>Since the value is a python expression, you could do something more interesting
like:</p>
<div class="highlight-python"><pre>Button:
    text: 'Plop world' if self.state == 'normal' else 'Release me!'</pre>
</div>
<p>The Button text change with the state of the button. By default, the button text
will be &#8216;Plop world&#8217;, and when the button is pressed, the text will change to
&#8216;Release me!&#8217;</p>
</div>
<div class="section" id="graphical-instructions">
<h2>Graphical instructions<a class="headerlink" href="#graphical-instructions" title="Permalink to this headline">¶</a></h2>
<p>The graphical instructions is a special part of the kv language. This concern
the &#8216;canvas&#8217; property definition:</p>
<div class="highlight-python"><pre>Widget:
    canvas:
        Color:
            rgb: (1, 1, 1)
        Rectangle:
            size: self.size
            pos: self.pos</pre>
</div>
<p>All the classes added inside the canvas property are inherith from the
<tt class="xref py py-class docutils literal"><span class="pre">Instruction</span></tt> class. You cannot put any Widget class
inside the canvas property.</p>
<p>If you want to do theming, you&#8217;ll have the same problem as CSS: you don&#8217;t know
which rule have been executed before. For our case, the rule are executed in
processing order.</p>
<p>If you want to change of a Button is rendered, you can create your own kv, and
put something like this:</p>
<div class="highlight-python"><pre>&lt;Button&gt;
    canvas:
        Color:
            rgb: (1, 0, 0)
        Rectangle:
            pos: self.pos
            size: self.size
        Rectangle:
            pos: self.pos
            size: self.texture_size
            texture: self.texture</pre>
</div>
<p>It will result a button with a red background, and the label texture in the
bottom left.... in addition to all the precedent rules.
You can clear all the previous instructions by using the <cite>Clear</cite> command:</p>
<div class="highlight-python"><pre>&lt;Button&gt;
    canvas:
        Clear
        Color:
            rgb: (1, 0, 0)
        Rectangle:
            pos: self.pos
            size: self.size
        Rectangle:
            pos: self.pos
            size: self.texture_size
            texture: self.texture</pre>
</div>
<p>Then, only your rules will be taken.</p>
<dl class="data">
<dt id="kivy.lang.Builder">
<tt class="descclassname">kivy.lang.</tt><tt class="descname">Builder</tt><a class="headerlink" href="#kivy.lang.Builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Main instance of a <a class="reference internal" href="#kivy.lang.BuilderBase" title="kivy.lang.BuilderBase"><tt class="xref py py-class docutils literal"><span class="pre">BuilderBase</span></tt></a>.</p>
</dd></dl>

<dl class="class">
<dt id="kivy.lang.BuilderBase">
<em class="property">class </em><tt class="descclassname">kivy.lang.</tt><tt class="descname">BuilderBase</tt><a class="headerlink" href="#kivy.lang.BuilderBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Kv object are able to load Kv file or string, return the root object of
the file, and inject rules in the rules database.</p>
<dl class="method">
<dt id="kivy.lang.BuilderBase.apply">
<tt class="descname">apply</tt><big>(</big><em>widget</em><big>)</big><a class="headerlink" href="#kivy.lang.BuilderBase.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all the Kivy rules matching the widget on the widget.</p>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.BuilderBase.load_file">
<tt class="descname">load_file</tt><big>(</big><em>filename</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kivy.lang.BuilderBase.load_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a file into the Language Builder</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><dl class="first last docutils">
<dt><cite>rulesonly</cite>: bool, default to False</dt>
<dd><p class="first last">If True, the Builder will raise an exception if you have a root
widget inside the definition</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.BuilderBase.load_string">
<tt class="descname">load_string</tt><big>(</big><em>string</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kivy.lang.BuilderBase.load_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a string into the Language Builder</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters :</th><td class="field-body"><dl class="first last docutils">
<dt><cite>rulesonly</cite>: bool, default to False</dt>
<dd><p class="first last">If True, the Builder will raise an exception if you have a root
widget inside the definition</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.BuilderBase.match">
<tt class="descname">match</tt><big>(</big><em>widget</em><big>)</big><a class="headerlink" href="#kivy.lang.BuilderBase.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of the rules matching the widget</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="kivy.lang.Parser">
<em class="property">class </em><tt class="descclassname">kivy.lang.</tt><tt class="descname">Parser</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#kivy.lang.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Create a Parser object to parse a Kivy file or Kivy content.</p>
<dl class="method">
<dt id="kivy.lang.Parser.load_resource">
<tt class="descname">load_resource</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#kivy.lang.Parser.load_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an external resource</p>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.Parser.parse">
<tt class="descname">parse</tt><big>(</big><em>content</em><big>)</big><a class="headerlink" href="#kivy.lang.Parser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the content of a Parser file, and return a list
of root objects.</p>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.Parser.parse_level">
<tt class="descname">parse_level</tt><big>(</big><em>level</em>, <em>lines</em><big>)</big><a class="headerlink" href="#kivy.lang.Parser.parse_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the current level (level * 4) indentation</p>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.Parser.parse_version">
<tt class="descname">parse_version</tt><big>(</big><em>line</em><big>)</big><a class="headerlink" href="#kivy.lang.Parser.parse_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the version line.
The version line is always #:kivy &lt;version&gt;</p>
</dd></dl>

<dl class="method">
<dt id="kivy.lang.Parser.strip_comments">
<tt class="descname">strip_comments</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#kivy.lang.Parser.strip_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all comments from lines inplace.
Comments need to be on a single line and not at the end of a line.
I.e., a line&#8217;s first non-whitespace character needs to be a #.</p>
</dd></dl>

</dd></dl>

</div>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
	<!--
    <div class="footer">
      &copy; Copyright 2010, kivy-dev.
      Last updated on Feb 06, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2.
</div>
-->
  </body>
</html>