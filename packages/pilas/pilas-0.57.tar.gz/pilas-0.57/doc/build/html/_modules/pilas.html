

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pilas &mdash; Documentación de Pilas Engine</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.57',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="Documentación de Pilas Engine" href="../index.html" />
    <link rel="up" title="Código de módulo" href="index.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/pilas-logo.png" alt="Logo"/>
          </a></p>
        <h1><a href="../index.html">Documentación de Pilas Engine</a></h1>
        <div class="rel">
          <a href="../py-modindex.html" title="Índice de módulo Python"
             >módulos</a> |
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a>
           | <a href='http://www.pilas-engine.com.ar'>Ir a la web de pilas</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pilas</h1><div class="highlight"><pre>
<span class="c"># -*- encoding: utf-8 -*-</span>
<span class="c"># pilas engine - a video game framework.</span>
<span class="c">#</span>
<span class="c"># copyright 2010 - hugo ruscitti</span>
<span class="c"># license: lgplv3 (see http://www.gnu.org/licenses/lgpl.html)</span>
<span class="c">#</span>
<span class="c"># website - http://www.pilas-engine.com.ar</span>

<span class="n">mundo</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">bg</span> <span class="o">=</span> <span class="bp">None</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">utils</span>
<span class="kn">from</span> <span class="nn">mundo</span> <span class="kn">import</span> <span class="n">Mundo</span>
<span class="kn">import</span> <span class="nn">actores</span>
<span class="kn">import</span> <span class="nn">fondos</span>
<span class="kn">import</span> <span class="nn">habilidades</span>
<span class="kn">import</span> <span class="nn">eventos</span>
<span class="kn">import</span> <span class="nn">sonidos</span>
<span class="kn">import</span> <span class="nn">colores</span>
<span class="kn">import</span> <span class="nn">atajos</span>
<span class="kn">import</span> <span class="nn">escenas</span>
<span class="kn">import</span> <span class="nn">ejemplos</span>
<span class="kn">import</span> <span class="nn">interfaz</span>

<span class="n">__doc__</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">Módulo pilas</span>
<span class="s">============</span>

<span class="s">Pilas es una biblioteca para facilitar el desarrollo</span>
<span class="s">de videojuegos. Es útil para programadores</span>
<span class="s">principiantes o para el desarrollo de juegos casuales.</span>

<span class="s">Este módulo contiene las funciones principales</span>
<span class="s">para iniciar y ejecutar la biblioteca.</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">esta_en_sesion_interactiva</span><span class="p">():</span>
    <span class="n">utils</span><span class="o">.</span><span class="n">cargar_autocompletado</span><span class="p">()</span>

<div class="viewcode-block" id="iniciar"><a class="viewcode-back" href="../referencia.html#pilas.iniciar">[docs]</a><span class="k">def</span> <span class="nf">iniciar</span><span class="p">(</span><span class="n">ancho</span><span class="o">=</span><span class="mi">640</span><span class="p">,</span> <span class="n">alto</span><span class="o">=</span><span class="mi">480</span><span class="p">,</span> <span class="n">titulo</span><span class="o">=</span><span class="s">&#39;Pilas&#39;</span><span class="p">,</span> <span class="n">usar_motor</span><span class="o">=</span><span class="s">&#39;qtgl&#39;</span><span class="p">,</span> 
            <span class="n">rendimiento</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">modo</span><span class="o">=</span><span class="s">&#39;detectar&#39;</span><span class="p">,</span> <span class="n">economico</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
            <span class="n">gravedad</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">),</span> <span class="n">pantalla_completa</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inicia la ventana principal del juego con algunos detalles de funcionamiento.</span>

<span class="sd">    Ejemplo de invocación:</span>

<span class="sd">        &gt;&gt;&gt; pilas.iniciar(ancho=320, alto=240)</span>

<span class="sd">    .. image:: images/iniciar_320_240.png</span>

<span class="sd">    Parámetros:</span>

<span class="sd">    :ancho: el tamaño en pixels para la ventana.</span>
<span class="sd">    :alto: el tamaño en pixels para la ventana.</span>
<span class="sd">    :titulo: el titulo a mostrar en la ventana.</span>
<span class="sd">    :usar_motor: el motor multimedia a utilizar, puede ser &#39;qt&#39; o &#39;qtgl&#39;.</span>
<span class="sd">    :rendimiento: cantidad de cuadros por segundo a mostrar.</span>
<span class="sd">    :modo: si se utiliza modo interactivo o no.</span>
<span class="sd">    :economico: si tiene que evitar consumir muchos recursos de procesador</span>
<span class="sd">    :gravedad: el vector de aceleracion para la simulacion de fisica.</span>
<span class="sd">    :pantalla_completa: si debe usar pantalla completa o no.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">global</span> <span class="n">mundo</span>

    <span class="n">motor</span> <span class="o">=</span> <span class="n">__crear_motor</span><span class="p">(</span><span class="n">usar_motor</span><span class="p">)</span>
    <span class="n">mundo</span> <span class="o">=</span> <span class="n">Mundo</span><span class="p">(</span><span class="n">motor</span><span class="p">,</span> <span class="n">ancho</span><span class="p">,</span> <span class="n">alto</span><span class="p">,</span> <span class="n">titulo</span><span class="p">,</span> <span class="n">rendimiento</span><span class="p">,</span> <span class="n">economico</span><span class="p">,</span> <span class="n">gravedad</span><span class="p">,</span> <span class="n">pantalla_completa</span><span class="p">)</span>
    <span class="n">escenas</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="n">colores</span><span class="o">.</span><span class="n">grisclaro</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="ejecutar"><a class="viewcode-back" href="../referencia.html#pilas.ejecutar">[docs]</a><span class="k">def</span> <span class="nf">ejecutar</span><span class="p">(</span><span class="n">ignorar_errores</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pone en funcionamiento las actualizaciones y dibujado.</span>
<span class="sd">    </span>
<span class="sd">    Esta función es necesaria cuando se crea un juego</span>
<span class="sd">    en modo ``no-interactivo``.&quot;&quot;&quot;</span>
    <span class="n">mundo</span><span class="o">.</span><span class="n">ejecutar_bucle_principal</span><span class="p">(</span><span class="n">ignorar_errores</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="terminar"><a class="viewcode-back" href="../referencia.html#pilas.terminar">[docs]</a><span class="k">def</span> <span class="nf">terminar</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Finaliza la ejecución de pilas y cierra la ventana principal.&quot;&quot;&quot;</span>
    <span class="n">mundo</span><span class="o">.</span><span class="n">terminar</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ver"><a class="viewcode-back" href="../referencia.html#pilas.ver">[docs]</a><span class="k">def</span> <span class="nf">ver</span><span class="p">(</span><span class="n">objeto</span><span class="p">,</span> <span class="n">imprimir</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">retornar</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Imprime en pantalla el codigo fuente asociado a un objeto o elemento de pilas.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">inspect</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">codigo</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">objeto</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="n">codigo</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">objeto</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">imprimir</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">codigo</span>

    <span class="k">if</span> <span class="n">retornar</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">codigo</span>
</div>
<div class="viewcode-block" id="version"><a class="viewcode-back" href="../referencia.html#pilas.version">[docs]</a><span class="k">def</span> <span class="nf">version</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Retorna el número de version de pilas.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pilasversion</span>

    <span class="k">return</span> <span class="n">pilasversion</span><span class="o">.</span><span class="n">VERSION</span>
</div>
<span class="k">def</span> <span class="nf">__crear_motor</span><span class="p">(</span><span class="n">usar_motor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Genera instancia del motor multimedia en base a un nombre.</span>
<span class="sd">    </span>
<span class="sd">    Esta es una función interna y no debe ser ejecutada</span>
<span class="sd">    excepto por el mismo motor pilas.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">usar_motor</span> <span class="o">==</span> <span class="s">&#39;qt&#39;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">motores</span> <span class="kn">import</span> <span class="n">motor_qt</span>
        <span class="n">motor</span> <span class="o">=</span> <span class="n">motor_qt</span><span class="o">.</span><span class="n">Qt</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">usar_motor</span> <span class="o">==</span> <span class="s">&#39;qtgl&#39;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">motores</span> <span class="kn">import</span> <span class="n">motor_qt</span>
        <span class="n">motor</span> <span class="o">=</span> <span class="n">motor_qt</span><span class="o">.</span><span class="n">QtGL</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;El motor multimedia seleccionado (</span><span class="si">%s</span><span class="s">) no esta disponible&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">usar_motor</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;Las opciones de motores que puedes probar son &#39;qt&#39; y &#39;qtgl&#39;.&quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">motor</span>

<div class="viewcode-block" id="reiniciar"><a class="viewcode-back" href="../referencia.html#pilas.reiniciar">[docs]</a><span class="k">def</span> <span class="nf">reiniciar</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Elimina todos los actores y vuelve al estado inicial.&quot;&quot;&quot;</span>
    <span class="n">actores</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">eliminar_a_todos</span><span class="p">()</span>
    <span class="n">mundo</span><span class="o">.</span><span class="n">reiniciar</span><span class="p">()</span>
</div>
<span class="n">anterior_texto</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="avisar"><a class="viewcode-back" href="../referencia.html#pilas.avisar">[docs]</a><span class="k">def</span> <span class="nf">avisar</span><span class="p">(</span><span class="n">mensaje</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Emite un mensaje en la ventana principal.</span>

<span class="sd">    Este mensaje aparecerá en la parte inferior de la pantalla, por</span>
<span class="sd">    ejemplo:</span>

<span class="sd">        &gt;&gt;&gt; pilas.avisar(&quot;Use la tecla &lt;esc&gt; para terminar el programa&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">anterior_texto</span>
    <span class="n">izquierda</span><span class="p">,</span> <span class="n">derecha</span><span class="p">,</span> <span class="n">arriba</span><span class="p">,</span> <span class="n">abajo</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">obtener_bordes</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">anterior_texto</span><span class="p">:</span>
        <span class="n">anterior_texto</span><span class="o">.</span><span class="n">eliminar</span><span class="p">()</span>

    <span class="n">texto</span> <span class="o">=</span> <span class="n">actores</span><span class="o">.</span><span class="n">Texto</span><span class="p">(</span><span class="n">mensaje</span><span class="p">)</span>
    <span class="n">texto</span><span class="o">.</span><span class="n">magnitud</span> <span class="o">=</span> <span class="mi">17</span>
    <span class="n">texto</span><span class="o">.</span><span class="n">centro</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;centro&quot;</span><span class="p">,</span> <span class="s">&quot;centro&quot;</span><span class="p">)</span>
    <span class="n">texto</span><span class="o">.</span><span class="n">izquierda</span> <span class="o">=</span> <span class="n">izquierda</span> <span class="o">+</span> <span class="mi">10</span>
    <span class="n">texto</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">colores</span><span class="o">.</span><span class="n">blanco</span>
    <span class="n">texto</span><span class="o">.</span><span class="n">abajo</span> <span class="o">=</span> <span class="n">abajo</span> <span class="o">+</span> <span class="mi">10</span>
    <span class="n">anterior_texto</span> <span class="o">=</span> <span class="n">texto</span>
</div>
<div class="viewcode-block" id="abrir_cargador"><a class="viewcode-back" href="../referencia.html#pilas.abrir_cargador">[docs]</a><span class="k">def</span> <span class="nf">abrir_cargador</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Abre un cargador de ejemplos con varios códigos de prueba.</span>

<span class="sd">    Ejemplo:</span>

<span class="sd">        &gt;&gt;&gt; pilas.abrir_cargador()</span>

<span class="sd">    El cargador de ejemplos se ve de esta forma:</span>

<span class="sd">    .. image:: images/cargador.png</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">cargador</span>
    <span class="n">cargador</span><span class="o">.</span><span class="n">ejecutar</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[]</span></div>
</pre></div>

          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Contenidos</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../presentacion.html">Presentación</a></li>
<li class="toctree-l1"><a class="reference internal" href="../instalar.html">Instalación</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../empezando.html">Empezando, los primeros pasos con pilas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grupos.html">Grupos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../colisiones.html">Colisiones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fisica.html">Física</a></li>
<li class="toctree-l1"><a class="reference internal" href="../imagen.html">Manejo de imágenes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sonidos.html">Cargar sonidos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dibujado_simple_en_pantalla.html">Dibujado simple en pantalla</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dibujado_simple_en_pantalla.html#usando-la-tortuga-para-dibujar">Usando la Tortuga para dibujar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dibujado_simple_en_pantalla.html#usando-una-pizarra">Usando una Pizarra</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dibujado_avanzado_con_superficies.html">Dibujado avanzado con Superficies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tareas.html">Manejo de tiempo con tareas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolacion.html">Interpolaciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controlando_la_pantalla.html">Controlando la pantalla</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comportamientos.html">Comportamientos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controles.html">Controles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../escenas.html">Escenas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ejemplos.html">Ejemplos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaz_de_usuario.html">Interfaz de usuario</a></li>
<li class="toctree-l1"><a class="reference internal" href="../menu.html">Como crear menúes para tu juegos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mapas_y_plataformas.html">Mapas y plataformas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dialogos.html">Diálogos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camara.html">Manejo de Cámara</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motores.html">Motores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventos.html">Señales, callbacks y eventos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../texto.html">Textos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../habilidades.html">Habilidades</a></li>
<li class="toctree-l1"><a class="reference internal" href="../depurando.html">Depurando y buscando detalles</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencia.html">Referencia completa</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../desarrolladores.html">Guía para desarrolladores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preguntas_avanzadas.html">Guía de preguntas avanzadas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../como_funciona_pilas_por_dentro.html">Cómo funciona pilas por dentro</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Búsqueda</h3>
          <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Ir a" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Introduzca los términos de búsqueda o un módulo, clase o nombre de función.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="../py-modindex.html" title="Índice de módulo Python"
             >módulos</a> |
          <a href="../genindex.html" title="Índice General"
             >índice</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011, Hugo Ruscitti.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>