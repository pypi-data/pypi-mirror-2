
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Caveats &mdash; django-guardian v1.0.0.beta1 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0.beta1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="django-guardian v1.0.0.beta1 documentation" href="../index.html" />
    <link rel="up" title="User Guide" href="index.html" />
    <link rel="next" title="API Reference" href="../api/index.html" />
    <link rel="prev" title="Admin integration" href="admin-integration.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api/index.html" title="API Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="admin-integration.html" title="Admin integration"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">django-guardian v1.0.0.beta1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">User Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="caveats">
<span id="id1"></span><h1>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h1>
<div class="section" id="orphaned-object-permissions">
<h2>Orphaned object permissions<a class="headerlink" href="#orphaned-object-permissions" title="Permalink to this headline">¶</a></h2>
<p>Permissions, including so called <em>per object permissions</em>, are sometimes tricky
to manage. One case is how we can manage permissions that are no longer used.
Normally, there should be no problems, however with some particular setup it is
possible to reuse primary keys of database models which were used in the past
once. We will not answer how bad such situation can be - instead we will try to
cover how we can deal with this.</p>
<p>Let&#8217;s imagine our table has primary key to the filesystem path. We have a record
with pk equal to <tt class="docutils literal"><span class="pre">/home/www/joe.config</span></tt>. User <em>jane</em> has read access to
joe&#8217;s configuration and we store that information in database by creating
guardian&#8217;s object permissions. Now, <em>joe</em> user removes account from our site and
another user creates account with <em>joe</em> as username. The problem is that if we
haven&#8217;t removed object permissions explicitly in the process of first <em>joe</em>
account removal, <em>jane</em> still has read permissions for <em>joe&#8217;s</em> configuration
file - but this is another user.</p>
<p>There is no easy way to deal with orphaned permissions as they are not foreign
keyed with objects directly. Even if they would, there are some database engines
- or <em>ON DELETE</em> rules - which restricts removal of related objects.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">It is <strong>extremely</strong> important to remove <a class="reference internal" href="../api/guardian.models.html#std:model-UserObjectPermission"><tt class="xref std std-model docutils literal"><span class="pre">UserObjectPermission</span></tt></a> and
<a class="reference internal" href="../api/guardian.models.html#std:model-GroupObjectPermission"><tt class="xref std std-model docutils literal"><span class="pre">GroupObjectPermission</span></tt></a> as we delete objects for which permissions
are defined.</p>
</div>
<p>Guardian comes with utility function which tries to help to remove orphaned
object permissions. Remember - those are only helpers. Applications should
remove those object permissions explicitly.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="../api/guardian.utils.html#guardian.utils.clean_orphan_obj_perms" title="guardian.utils.clean_orphan_obj_perms"><tt class="xref py py-func docutils literal"><span class="pre">guardian.utils.clean_orphan_obj_perms()</span></tt></a></li>
<li><a class="reference internal" href="../api/guardian.management.commands.html#std:command-clean_orphan_obj_perms"><tt class="xref std std-command docutils literal"><span class="pre">clean_orphan_obj_perms</span></tt></a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Caveats</a><ul>
<li><a class="reference internal" href="#orphaned-object-permissions">Orphaned object permissions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="admin-integration.html"
                        title="previous chapter">Admin integration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../api/index.html"
                        title="next chapter">API Reference</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/userguide/caveats.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../api/index.html" title="API Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="admin-integration.html" title="Admin integration"
             >previous</a> |</li>
        <li><a href="../index.html">django-guardian v1.0.0.beta1 documentation</a> &raquo;</li>
          <li><a href="index.html" >User Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Lukasz Balcerzak.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>