<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
	  xmlns:i18n="http://xml.zope.org/namespaces/i18n">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>${project} - versione ${appId}</title>
<meta name="keywords" content="python web application dvd padydvd movie" />
<meta name="description" content="Manage my DVD" />

<link rel="icon" type="image/gif"
      href="${request.application_url}/static/images/favicon.gif" />

<link href="${request.application_url}/static/styles/decogrids-12.css" rel="stylesheet" type="text/css" />
<link href="${request.application_url}/static/styles/default.css" rel="stylesheet" type="text/css" />
<link href="${request.application_url}/static/styles/jquery-ui.css" rel="stylesheet" type="text/css" />

<script src="${request.application_url}/static/javascript/jquery-1.4.4.min.js" type="text/javascript" ></script>
<script src="${request.application_url}/static/javascript/jquery-ui.min.js" type="text/javascript" ></script>
<script src="${request.application_url}/static/javascript/papydvd.js" type="text/javascript" ></script>

</head>
<body>

<div class="invisible" id="models">

	<div class="dialog movieDialog">
		<form method="post" action="${request.application_url}/"
		      enctype="multipart/form-data">
		    <input type="hidden" name="movie_id" value="" />
			<div class="field">
				<label for="">Titolo</label>
				<img class="required" title="Obbliatorio" alt="Obbligatorio" src="${request.application_url}/static/images/required.gif" /><br/>
				<input class="textField" type="text" name="title" value="" />
			</div>
			<div class="field">
				<label for="">Codice</label>
				<img class="required" title="Obbliatorio" alt="Obbligatorio" src="${request.application_url}/static/images/required.gif" /><br/>
				<input type="text" name="primary_number" value="" maxlength="5" size="5" /> /
				<input type="text" name="secondary_number" value="" maxlength="2" size="2"/>
			</div>			
			<div class="field">
				<label for="">Genere</label><br/>
				<select name="genre_id">
					<option class="emptySelection" value=""></option>
					<option tal:repeat="genre view.all_genres"
					        value="${genre.id}">${genre.name}</option>
				</select>
				<a href="" class="mini newGenreCommand">Aggiungi nuovo</a>
			</div>
			<div class="field">
				<label for="">Anno</label><br/>
				<input type="text" name="year"
				       maxlength="4" size="4" value="${view.this_year}" />
			</div>
			<div class="field">
				<label for="">Regista</label><br/>
				<select name="director_id">
					<option class="emptySelection" value=""></option>
					<option tal:repeat="director view.all_directors"
					        value="${director.id}">${director.name}</option>
				</select>
				<a href="" class="mini newDirectorCommand">Aggiungi nuovo</a>
			</div>
			<div class="field">
				<label for="">Copertina</label><br/>
				<input type="file" name="cover" />
			</div>
			<div class="visualClear">&nbsp;</div>
			<div class="commands">
				<input type="submit" name="" value="" />
			</div>
		</form>
	</div>
	
	<div class="dialog genreDialog">
		<form method="post" action="${request.application_url}/addGenre"
		      enctype="multipart/form-data">
			<div class="field">
				<label for="">Nome</label>
				<img class="required" title="Obbliatorio" alt="Obbligatorio" src="${request.application_url}/static/images/required.gif" /><br/>
				<input class="textField" type="text" name="name" value="" />
			</div>
			<div class="field">
				<label for="">Descrizione</label><br/>
				<textarea class="textField" name="description"></textarea>
			</div>
			<div class="visualClear">&nbsp;</div>
			<div class="commands">
				<input type="submit" name="addGenre" value="Aggiungi" />
			</div>
		</form>
	</div>

	<div class="dialog directorDialog">
		<form method="post" action="${request.application_url}/addDirector"
		      enctype="multipart/form-data">
			<div class="field">
				<label for="">Nome</label>
				<img class="required" title="Obbliatorio" alt="Obbligatorio" src="${request.application_url}/static/images/required.gif" /><br/>
				<input class="textField" type="text" name="name" value="" />
			</div>
			<div class="visualClear">&nbsp;</div>
			<div class="commands">
				<input type="submit" name="addDirector" value="Aggiungi" />
			</div>
		</form>
	</div>

	<div class="dialog confirmDialog">
		<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
		Sei sicuro di voler cancellare il Film?</p>
	</div>

</div>
<!-- end of models -->



<div id="left-column">
	<div class="first-photo">
		<img src="${request.application_url}/image?id=1" />
	</div>
	<div class="second-photo">
		<img src="${request.application_url}/image?id=2" />
	</div>
	<div class="third-photo">
		<img src="${request.application_url}/image?id=3" />
	</div>
</div>

<div id="right-column">
	<div class="first-photo">
		<img src="${request.application_url}/image?id=4" />
	</div>
	<div class="second-photo">
		<img src="${request.application_url}/image?id=5" />
	</div>
	<div class="third-photo">
		<img src="${request.application_url}/image?id=6" />
	</div>
</div>



<div id="main-container" class="mainContainer">

	<div class="grid-background">
		<div id="logo">
			<img alt="PapyDVD" src="${request.application_url}/static/images/logo.png" />
		</div>
		
		<div class="row lastMovie">
			<div class="cell width-12 position-0" tal:condition="last_movie">
				<span tal:omit-tag="">L'ultimo film aggiunto Ã¨</span>
				&quot;<a class="editMovieCommand" href="${request.application_url}/editMovie?movie_id=${last_movie.movie_id}">${last_movie.title}</a>&quot;
			</div>		
			<div class="cell width-12 position-0" tal:condition="not last_movie">
				Ancora nessun film in archivio
			</div>
		</div>
		<div class="row bnt button" >
			<div class="cell width-12 position-0">
				<a id="addMovieCommand"
				   class="mainCommand" href="">Aggiungi nuovo Film</a>
			</div>
		</div>
		<!--div class="row bnt button" >
			<div class="cell width-12 position-0">
				<a id="listDirectorsCommand"
				   class="mainCommand" href="">Mostra Registi</a>
			</div>
		</div>
		<div class="row bnt button" >
			<div class="cell width-12 position-0">
				<a id="listGenresCommand"
				   class="mainCommand" href="">Mostra Generi</a>
			</div>
		</div>
		<div class="row center">
			<div class="cell width-12 position-0">
				<label for="search">Cerca</label>
				<input name="search" id="search" />
			</div>
		</div-->
		<div class="row">
			<div class="cell width-12 position-0">
				<div id="movieList">
					<table tal:condition="last_movie">
						<thead>
							<tr><th>&nbsp;</th><th>Id</th><th>Titolo</th><th>Genere</th><th>Anno</th><th>Regista</th></tr>
						</thead>
						<tbody>
							<tal:row repeat="movie view.getAllMovies()">
								<tr tal:define="even repeat.movie.even"
								    class="${even and 'even' or 'odd'}">
									<td class="movieCommands">
										<a href="${request.application_url}/deleteMovie?movie_id=${movie.movie_id}"
										   class="deleteCommand" title="Elimina questo film">
										   	<img src="${request.application_url}/static/images/delete.png" />
										</a>
										<a href="${request.application_url}/editMovie?movie_id=${movie.movie_id}"
										   class="editMovieCommand" title="Modifica questo film">
										   	<img src="${request.application_url}/static/images/edit.png" />
										</a>
									</td>
									<td>${movie.primary_number}<tal:secondary condition="movie.secondary_number">/${movie.secondary_number}</tal:secondary>
									</td>
									<td>${movie.title}</td>
									<td>${movie.genre and movie.genre.name or '&nbsp;'}</td>
									<td>${movie.year}</td>
									<td tal:condition="movie.director">${movie.director.name}</td>
									<td tal:condition="not movie.director">&nbsp;</td>
								</tr>
							</tal:row>
						</tbody>
					</table>
					<p tal:condition="not last_movie">
						Nessun film
					</p>
				</div>
			</div>
		</div>
	</div>
</div>

</body>
</html>
