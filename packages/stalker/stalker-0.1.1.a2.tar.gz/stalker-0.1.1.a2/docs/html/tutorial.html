

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; Stalker v0.1.1.a2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1.1.a2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Stalker v0.1.1.a2 documentation" href="index.html" />
    <link rel="next" title="Design" href="design.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design.html" title="Design"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Stalker v0.1.1.a2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Using Stalker is all about interacting with a database by using the Stalker
Object Model. Stalker uses the powerfull <a class="reference external" href="http://www.sqlalchemy.org/docs/orm/tutorial.html">SQLAlchemy ORM</a>.</p>
<p>This tutorial section let you familiarise with the Stalker Python API and
Stalker Object Model (SOM). If you used SQLAlchemy before you will feel at
home and if you aren&#8217;t you will see that it is fun dealing with databases with
SOM.</p>
</div>
<div class="section" id="part-i-basics">
<h2>Part I - Basics<a class="headerlink" href="#part-i-basics" title="Permalink to this headline">¶</a></h2>
<p>Lets say that we just installed Stalker (as you are right now) and want to use
Stalker in our first project.</p>
<p>The first thing we are going to learn about is how to connect to the database
so we can enter information about our studio and the projects.</p>
<p>We are going to use a helper script to connect to the default database. Use the
following command to connect to the database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker</span> <span class="kn">import</span> <span class="n">db</span>
<span class="n">db</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
</pre></div>
</div>
<p>This will create an in-memory SQLite3 database, which is useless other than
testing purposes. To be able to get more out of Stalker we should give a proper
database information. The most basic setup is to use a file based SQLite3
database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s">&quot;sqlite:///M:</span><span class="se">\\</span><span class="s">studio.db&quot;</span><span class="p">)</span> <span class="c"># assumed Windows</span>
</pre></div>
</div>
<dl class="docutils">
<dt>This command will do the following:</dt>
<dd><ol class="first last arabic simple">
<li>setup the database connection, by creating an <a class="reference external" href="http://www.sqlalchemy.org/docs/core/engines.html">engine</a></li>
<li>create the SQLite3 database file if doesn&#8217;t exist</li>
<li>create a <a class="reference external" href="http://www.sqlalchemy.org/docs/orm/session.html">session</a> instance</li>
<li>do the <a class="reference external" href="http://www.sqlalchemy.org/docs/orm/mapper_config.html">mapping</a></li>
</ol>
</dd>
</dl>
<p>Lets continue by creating a <em>User</em> for ourselfs in the database. The first
thing we need to do is to import the <a class="reference internal" href="generated/stalker.core.models.user.User.html#stalker.core.models.user.User" title="stalker.core.models.user.User"><tt class="xref py py-class docutils literal"><span class="pre">User</span></tt></a>
class in to the current namespace:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.user</span> <span class="kn">import</span> <span class="n">User</span>
</pre></div>
</div>
<p>then create the <a class="reference internal" href="generated/stalker.core.models.user.User.html#stalker.core.models.user.User" title="stalker.core.models.user.User"><tt class="xref py py-class docutils literal"><span class="pre">User</span></tt></a> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myUser</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">first_name</span><span class="o">=</span><span class="s">&quot;Erkan Ozgur&quot;</span><span class="p">,</span>
              <span class="n">last_name</span><span class="o">=</span><span class="s">&quot;Yilmaz&quot;</span><span class="p">,</span>
              <span class="n">login_name</span><span class="o">=</span><span class="s">&quot;eoyilmaz&quot;</span><span class="p">,</span>
              <span class="n">email</span><span class="o">=</span><span class="s">&quot;eoyilmaz@gmail.com&quot;</span><span class="p">,</span>
              <span class="n">password</span><span class="o">=</span><span class="s">&quot;secret&quot;</span><span class="p">,</span>
              <span class="n">description</span><span class="o">=</span><span class="s">&quot;This is me&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Our studio possibly has <strong>Departments</strong>. Lets add a new
<a class="reference internal" href="generated/stalker.core.models.department.Department.html#stalker.core.models.department.Department" title="stalker.core.models.department.Department"><tt class="xref py py-class docutils literal"><span class="pre">Department</span></tt></a> object to define your
department:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">satlker.core.models.department</span> <span class="kn">import</span> <span class="n">Department</span>
<span class="n">tds_department</span> <span class="o">=</span> <span class="n">Department</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;TDs&quot;</span><span class="p">,</span>
                            <span class="n">description</span><span class="o">=</span><span class="s">&quot;This is the TDs department&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now add your user to the department:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tds_department</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myUser</span><span class="p">)</span>
</pre></div>
</div>
<p>We have created succesfully a <a class="reference internal" href="generated/stalker.core.models.user.User.html#stalker.core.models.user.User" title="stalker.core.models.user.User"><tt class="xref py py-class docutils literal"><span class="pre">User</span></tt></a> and a
<a class="reference internal" href="generated/stalker.core.models.department.Department.html#stalker.core.models.department.Department" title="stalker.core.models.department.Department"><tt class="xref py py-class docutils literal"><span class="pre">Department</span></tt></a> and we assigned the user as
one of the member of the <strong>TDs Department</strong>.</p>
<p>For now, because we didn&#8217;t tell Stalker to commit the changes, no data has been
saved to the database yet. But it doesn&#8217;t keep us using Stalker, as if these
information are in the database already. Lets show this by querying all the
departments, then getting the first one and gettings its first members name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">all_departments</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Department</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="n">all_members_of_dep</span> <span class="o">=</span> <span class="n">all_departments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">members</span>
<span class="k">print</span> <span class="n">all_members</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">first_name</span>
</pre></div>
</div>
<p>this should print out &#8220;Erkan Ozgur&#8221;. So even though we didn&#8217;t commit the data
to the database, Stalker lets us use the <tt class="docutils literal"><span class="pre">db.query</span></tt> to get objects out of the
database.</p>
<p>So lets send all these data to database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">myUser</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tds_department</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>Now all the data is persisted in the database.</p>
</div>
<div class="section" id="part-ii-creating-simple-data">
<h2>Part II - Creating Simple Data<a class="headerlink" href="#part-ii-creating-simple-data" title="Permalink to this headline">¶</a></h2>
<p>Lets say that we have this new project comming and you want to start using
Stalker with it. So create a <a class="reference internal" href="generated/stalker.core.models.project.Project.html#stalker.core.models.project.Project" title="stalker.core.models.project.Project"><tt class="xref py py-class docutils literal"><span class="pre">Project</span></tt></a>
object to hold data about it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.project</span> <span class="kn">import</span> <span class="n">Project</span>
<span class="n">new_project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Fancy Commercial&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Lets enter more information about this new project:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">stalker.core.models.imageFormat</span> <span class="kn">import</span> <span class="n">ImageFormat</span>

<span class="n">new_project</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;The commercial is about this fancy product. The</span>
<span class="s">                             client want us to have a shinny look with their</span>
<span class="s">                             product bla bla bla...&quot;&quot;&quot;</span>
<span class="n">new_project</span><span class="o">.</span><span class="n">image_format</span> <span class="o">=</span> <span class="n">ImageFormat</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;HD 1080&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1920</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1080</span><span class="p">)</span>
<span class="n">new_project</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">new_project</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="n">new_project</span><span class="o">.</span><span class="n">lead</span> <span class="o">=</span> <span class="n">myUser</span>
</pre></div>
</div>
<p>Grouping your projects by their types is one of the best thing that lets you
filter them later. Think about querying &#8220;Commercials&#8221; and distinguishing them
from the &#8220;Movie&#8221; projects or &#8220;Print&#8221; projects. To accomplish this you can use a
<a class="reference internal" href="generated/stalker.core.models.types.ProjectType.html#stalker.core.models.types.ProjectType" title="stalker.core.models.types.ProjectType"><tt class="xref py py-class docutils literal"><span class="pre">ProjectType</span></tt></a> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.types</span> <span class="kn">import</span> <span class="n">ProjectType</span>

<span class="n">commercial_project_type</span> <span class="o">=</span> <span class="n">ProjectType</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Commercial&quot;</span><span class="p">)</span>
<span class="n">new_project</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">commercial_project_type</span>
</pre></div>
</div>
<p>To save all the data to the database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_project</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>Eventhough we have created multiple objects (new_project,
commercial_project_type) we&#8217;ve just added the <tt class="docutils literal"><span class="pre">new_project</span></tt> object, don&#8217;t
worry Stalker is smart enough to add all the connected objects to the database.</p>
<p>A Project generally contains <a class="reference internal" href="generated/stalker.core.models.sequence.Sequence.html#stalker.core.models.sequence.Sequence" title="stalker.core.models.sequence.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a>s, so lets create one:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.sequence</span> <span class="kn">import</span> <span class="n">Sequence</span>
<span class="n">seq1</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Sequence 1&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;SEQ1&quot;</span><span class="p">)</span>

<span class="c"># add it to the project</span>
<span class="n">new_project</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seq1</span><span class="p">)</span>
</pre></div>
</div>
<p>And a Sequence generally has <a class="reference internal" href="generated/stalker.core.models.shot.Shot.html#stalker.core.models.shot.Shot" title="stalker.core.models.shot.Shot"><tt class="xref py py-class docutils literal"><span class="pre">Shot</span></tt></a>s:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.shot</span> <span class="kn">import</span> <span class="n">Shot</span>

<span class="n">sh001</span> <span class="o">=</span> <span class="n">Shot</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Shot 1&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;SH001&quot;</span><span class="p">)</span>
<span class="n">sh002</span> <span class="o">=</span> <span class="n">Shot</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Shot 2&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;SH002&quot;</span><span class="p">)</span>
<span class="n">sh003</span> <span class="o">=</span> <span class="n">Shot</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Shot 3&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;SH003&quot;</span><span class="p">)</span>

<span class="c"># assign them to the sequence</span>
<span class="n">seq1</span><span class="o">.</span><span class="n">shots</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sh001</span><span class="p">,</span> <span class="n">sh002</span><span class="p">,</span> <span class="n">sh003</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="part-iii-pipeline">
<h2>Part III - Pipeline<a class="headerlink" href="#part-iii-pipeline" title="Permalink to this headline">¶</a></h2>
<p>Until now, we skipped a lot of stuff here to take little steps every time.
Eventough we have created users, departments, projects, sequences and shots,
Stalker still doesn&#8217;t know much about our studio. For example, it doesn&#8217;t have
any information about the pipeline that we are following and what steps we do
to complete those shots, thus to complete the project.</p>
<p>Lets try to explain the <strong>Shot Pipeline</strong> we are following to Stalker.</p>
<p>A pipeline is a group of
<a class="reference internal" href="generated/stalker.core.models.pipelineStep.PipelineStep.html#stalker.core.models.pipelineStep.PipelineStep" title="stalker.core.models.pipelineStep.PipelineStep"><tt class="xref py py-class docutils literal"><span class="pre">PipelineStep</span></tt></a>s. And we follow these
steps for one specific <a class="reference internal" href="generated/stalker.core.models.types.AssetType.html#stalker.core.models.types.AssetType" title="stalker.core.models.types.AssetType"><tt class="xref py py-class docutils literal"><span class="pre">AssetType</span></tt></a>. So a
<strong>Shot</strong> has a different pipeline than a <strong>Character</strong> or an <strong>Environment</strong>
asset.</p>
<p>Lets create the pipeline steps we need:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.pipelineStep</span> <span class="kn">import</span> <span class="n">PipelineStep</span>

<span class="n">previs</span>      <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Previs&quot;</span>     <span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;PREVIS&quot;</span><span class="p">)</span>
<span class="n">matchmove</span>   <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Match Move&quot;</span> <span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;MM&quot;</span><span class="p">)</span>
<span class="n">anim</span>        <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Animation&quot;</span>  <span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;ANIM&quot;</span><span class="p">)</span>
<span class="n">layout</span>      <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Layout&quot;</span>     <span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;LAYOUT&quot;</span><span class="p">)</span>
<span class="n">light</span>       <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Ligting&quot;</span>    <span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;LIGHT&quot;</span><span class="p">)</span>
<span class="n">comp</span>        <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Compositing&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">&quot;COMP&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and create a the Shot asset type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.types</span> <span class="kn">import</span> <span class="n">AssetType</span>

<span class="c"># the order of the PipelineSteps are not important</span>
<span class="n">shot_pSteps</span> <span class="o">=</span> <span class="p">[</span><span class="n">previs</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="n">anim</span><span class="p">,</span> <span class="n">layout</span><span class="p">,</span> <span class="n">light</span><span class="p">,</span> <span class="n">comp</span><span class="p">]</span>

<span class="c"># create the asset type</span>
<span class="n">shot_asset_type</span> <span class="o">=</span> <span class="n">AssetType</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Shot&quot;</span><span class="p">,</span> <span class="n">steps</span><span class="o">=</span><span class="n">shot_pSteps</span><span class="p">)</span>

<span class="c"># and set our shot objects asset_type to shot_asset_type</span>
<span class="c">#</span>
<span class="c"># instead of writing down shot1.type = shot_asset_type</span>
<span class="c"># we are going to do something more interesting</span>
<span class="c"># (eventhough it is inefficient)</span>

<span class="k">for</span> <span class="n">shot</span> <span class="ow">in</span> <span class="n">seq1</span><span class="o">.</span><span class="n">shots</span><span class="p">:</span>
    <span class="n">shot</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">shot_asset_type</span>
</pre></div>
</div>
<p>So by doing that we informed Stalker about the steps of one kind of asset
(<em>Shot</em> in our case).</p>
</div>
<div class="section" id="part-iv-task-resource-management">
<h2>Part IV - Task &amp; Resource Management<a class="headerlink" href="#part-iv-task-resource-management" title="Permalink to this headline">¶</a></h2>
<p>Now we have a couple of Shots with couple of steps inside it but we didn&#8217;t
created any <a class="reference internal" href="generated/stalker.core.models.task.Task.html#stalker.core.models.task.Task" title="stalker.core.models.task.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a> to let somebody to finish
this job.</p>
<p>Lets assign all this stuff to our self (for now):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">stalker.core.models.task</span> <span class="kn">import</span> <span class="n">Task</span>

<span class="n">previs_task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                  <span class="n">name</span><span class="o">=</span><span class="s">&quot;Previs&quot;</span><span class="p">,</span>
                  <span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">myUser</span><span class="p">],</span>
                  <span class="n">bid</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                  <span class="n">pipeline_step</span><span class="o">=</span><span class="n">previs</span>
              <span class="p">)</span>

<span class="n">mm_task</span>     <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                  <span class="n">name</span><span class="o">=</span><span class="s">&quot;Match Move&quot;</span><span class="p">,</span>
                  <span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">myUser</span><span class="p">],</span>
                  <span class="n">bid</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">pipeline_step</span><span class="o">=</span><span class="n">matchmove</span>
              <span class="p">)</span>

<span class="n">anim_task</span>   <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                  <span class="n">name</span><span class="o">=</span><span class="s">&quot;Animation&quot;</span><span class="p">,</span>
                  <span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">myUser</span><span class="p">],</span>
                  <span class="n">bid</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">pipeline_step</span><span class="o">=</span><span class="n">anim</span>
              <span class="p">)</span>

<span class="n">layout_task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                  <span class="n">name</span><span class="o">=</span><span class="s">&quot;Layout&quot;</span><span class="p">,</span>
                  <span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">myUser</span><span class="p">],</span>
                  <span class="n">bid</span><span class="o">=</span><span class="n">timdelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">pipeline_step</span><span class="o">=</span><span class="n">layout</span>
              <span class="p">)</span>

<span class="n">light_task</span>  <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                  <span class="n">name</span><span class="o">=</span><span class="s">&quot;Lighting&quot;</span><span class="p">,</span>
                  <span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">myUser</span><span class="p">],</span>
                  <span class="n">bid</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">pipeline_step</span><span class="o">=</span><span class="n">light</span>
              <span class="p">)</span>

<span class="n">comp_task</span>   <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
                  <span class="n">name</span><span class="o">=</span><span class="s">&quot;Compositing&quot;</span><span class="p">,</span>
                  <span class="n">resources</span><span class="o">=</span><span class="p">[</span><span class="n">myUser</span><span class="p">],</span>
                  <span class="n">bid</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                  <span class="n">pipeline_step</span><span class="o">=</span><span class="n">comp</span>
              <span class="p">)</span>
</pre></div>
</div>
<p>Now we are created all the tasks, but they are not connected to our Shots yet.
Lets connect them to the <tt class="docutils literal"><span class="pre">shot001</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sh001</span><span class="o">.</span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">previs_task</span><span class="p">,</span>
               <span class="n">mm_task</span><span class="p">,</span>
               <span class="n">anim_task</span><span class="p">,</span>
               <span class="n">layout_task</span><span class="p">,</span>
               <span class="n">light_task</span><span class="p">,</span>
               <span class="n">comp_task</span><span class="p">]</span>
</pre></div>
</div>
<p>And one of the good sides of the tasks are, dependencies can be defined between
them, so Stalker nows which job should be done before the others:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># animation needs match moving and previs to be finished</span>
<span class="n">anim_task</span><span class="o">.</span><span class="n">depends</span> <span class="o">=</span> <span class="p">[</span><span class="n">mm_task</span><span class="p">,</span> <span class="n">previs_task</span><span class="p">]</span>

<span class="c"># compositing can not start before anything rendered or animated</span>
<span class="n">comp_task</span><span class="o">.</span><span class="n">depends</span> <span class="o">=</span> <span class="p">[</span><span class="n">light_task</span><span class="p">,</span> <span class="n">anim_task</span><span class="p">]</span>

<span class="c"># lighting can not be done before the layout is finished</span>
<span class="n">light_task</span><span class="o">.</span><span class="n">depends</span> <span class="o">=</span> <span class="p">[</span><span class="n">layout_task</span><span class="p">]</span>
</pre></div>
</div>
<p>Now Stalker nows the hierarchy of the tasks. Next versions of Stalker will have
a <tt class="docutils literal"><span class="pre">Scheduler</span></tt> included to solve the task timings and create data for things
like Gantt Charts.</p>
<p>Lets commit the changes again:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>If you noticed, this time we didn&#8217;t add anything to the session, cause we have
added the <tt class="docutils literal"><span class="pre">new_project</span></tt> in a previous commit, and because all the objects are
attached to the project object in some way, Stalker can track this changes and
add the missing related objects to the database.</p>
</div>
<div class="section" id="part-v-asset-management">
<h2>Part V - Asset Management<a class="headerlink" href="#part-v-asset-management" title="Permalink to this headline">¶</a></h2>
<p>Now we have created a lot of things but other then storing all the data in the
database, we didn&#8217;t do much. Stalker still doesn&#8217;t have information about a lot
of things. For example, it doesn&#8217;t know how to handle your asset versions
(<a class="reference internal" href="generated/stalker.core.models.version.Version.html#stalker.core.models.version.Version" title="stalker.core.models.version.Version"><tt class="xref py py-class docutils literal"><span class="pre">Version</span></tt></a>) namely it doesn&#8217;t know how to
store your data that you are going to create while completing this tasks.</p>
<p>A fileserver in Stalkers&#8217; term is called a
<a class="reference internal" href="generated/stalker.core.models.repository.Repository.html#stalker.core.models.repository.Repository" title="stalker.core.models.repository.Repository"><tt class="xref py py-class docutils literal"><span class="pre">Repository</span></tt></a>. Repositories stores the
information about the fileservers in your system. You can have several file
servers let say one for Commercials and other one for big Movie projects. You
can define repositories and assign projects to those repositories. Lets create
one repository for our commercial project:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.repository</span> <span class="kn">import</span> <span class="n">Repository</span>
<span class="n">repo1</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&quot;Commercial Repository&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;&quot;This is where the commercial projects are going to be</span>
<span class="s">                   stored&quot;&quot;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>A Repository object could show the root path of the repository according to
your operating system. Lets enter the paths for all the major operating
systems:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">repo1</span><span class="o">.</span><span class="n">windows_path</span> <span class="o">=</span> <span class="s">&quot;M:</span><span class="se">\\</span><span class="s">PROJECTS&quot;</span>
<span class="n">repo1</span><span class="o">.</span><span class="n">linux_path</span>   <span class="o">=</span> <span class="s">&quot;/mnt/M&quot;</span>
<span class="n">repo1</span><span class="o">.</span><span class="n">osx_path</span>     <span class="o">=</span> <span class="s">&quot;/Volumes/M&quot;</span>
</pre></div>
</div>
<p>And if you ask a repository object for the path of the repository it will
always give the correct answer accroding to your operating system:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">repo1</span><span class="o">.</span><span class="n">path</span>
<span class="c"># outputs:</span>
<span class="c"># if you are running the command on a computer with Windows it will output:</span>
<span class="c">#</span>
<span class="c"># M:\PROJECTS</span>
<span class="c">#</span>
<span class="c"># and for Linux:</span>
<span class="c"># /mnt/M</span>
<span class="c">#</span>
<span class="c"># for OSX:</span>
<span class="c"># /Volumes/M</span>
<span class="c">#</span>
</pre></div>
</div>
<p>Assigning this repository to our project or vice versa is not enough, Stalker
still doesn&#8217;t know about the project
<a class="reference internal" href="generated/stalker.core.models.structure.Structure.html#stalker.core.models.structure.Structure" title="stalker.core.models.structure.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>, or in other words it
doesn&#8217;t have information about the folder structure about your project. To
explain the project structure we can use the
<a class="reference internal" href="generated/stalker.core.models.structure.Structure.html#stalker.core.models.structure.Structure" title="stalker.core.models.structure.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stalker.core.models.structure</span> <span class="kn">import</span> <span class="n">Structure</span>

<span class="n">structure1</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&quot;Commercial Projects Structure&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">&quot;&quot;&quot;This is a project structure, which can be used for simple</span>
<span class="s">        commercial projects&quot;&quot;&quot;</span>
<span class="p">)</span>

<span class="c"># lets create the folder structure as a Jinja2 template</span>
<span class="n">project_template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">   {{ project.code }}</span>
<span class="s">   {{ project.code }}/Assets</span>
<span class="s">   {{ project.code }}/Sequences&quot;</span>

<span class="s">   {</span><span class="si">% i</span><span class="s">f project.sequences %}</span>
<span class="s">       {</span><span class="si">% f</span><span class="s">or sequence in project.sequences %}</span>
<span class="s">           {</span><span class="si">% s</span><span class="s">et seq_path = project.code + &#39;/Sequences/&#39; + sequence.code %}</span>
<span class="s">           {{ seq_path }}</span>
<span class="s">           {{ seq_path }}/Edit</span>
<span class="s">           {{ seq_path }}/Edit/AnimaticStoryboard</span>
<span class="s">           {{ seq_path }}/Edit/Export</span>
<span class="s">           {{ seq_path }}/Storyboard</span>
<span class="s">           {{ seq_path }}/Shots</span>

<span class="s">           {</span><span class="si">% i</span><span class="s">f sequence.shots %}</span>
<span class="s">               {</span><span class="si">% f</span><span class="s">or shot in sequence.shots %}</span>
<span class="s">                   {</span><span class="si">% s</span><span class="s">et shot_path = seq_path + &#39;/SHOTS/&#39; + shot.code %}</span>
<span class="s">                   {{ shot_path }}</span>
<span class="s">               {</span><span class="si">% e</span><span class="s">ndfor %}</span>
<span class="s">           {</span><span class="si">% e</span><span class="s">ndif %}</span>

<span class="s">       {</span><span class="si">% e</span><span class="s">ndfor %}</span>

<span class="s">   {</span><span class="si">% e</span><span class="s">ndif %}</span>

<span class="s">   {{ project.code }}/References</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="n">structure1</span><span class="o">.</span><span class="n">project_template</span> <span class="o">=</span> <span class="n">project_template</span>
</pre></div>
</div>
<p>Now we have entered a couple of <a class="reference external" href="http://jinja.pocoo.org/">Jinja2</a> directives as a string. This template
will be used when creating the project structure by calling
<tt class="xref py py-func docutils literal"><span class="pre">create()</span></tt>. It is safe to call the
<tt class="xref py py-func docutils literal"><span class="pre">create()</span></tt> over and over or whenever
you&#8217;ve added new data that will add some extra folders to the project
structure.</p>
<p>The above template will produce the following folders for our project:</p>
<div class="highlight-python"><pre>M:/PROJECTS/FANCY_COMMERCIAL
M:/PROJECTS/FANCY_COMMERCIAL/Assets
M:/PROJECTS/FANCY_COMMERCIAL/References
M:/PROJECTS/FANCY_COMMERCIAL/Sequences
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Edit
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Edit/AnimaticStoryboard
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Edit/Export
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Storyboard
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Shots
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Shots/SH001
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Shots/SH002
M:/PROJECTS/FANCY_COMMERCIAL/Sequences/SEQ1/Shots/SH003</pre>
</div>
<p>Imagine what else can be done here with that kind of template system. And you
can use a lot of variables inside this templates.</p>
<p>We are still not done with defining the templates. Even though Stalker now
knows what is the project structure like, it is not aware of the placements of
indivudual asset <a class="reference internal" href="generated/stalker.core.models.version.Version.html#stalker.core.models.version.Version" title="stalker.core.models.version.Version"><tt class="xref py py-class docutils literal"><span class="pre">Version</span></tt></a> files. An asset
<a class="reference internal" href="generated/stalker.core.models.version.Version.html#stalker.core.models.version.Version" title="stalker.core.models.version.Version"><tt class="xref py py-class docutils literal"><span class="pre">Version</span></tt></a> is an object holding information
about every single iteration of one asset and has a connection to files in the
repository. So before creating a new version for any kind of asset, we need to
tell Stalker where to place the related files. This can be done by using a
<a class="reference internal" href="generated/stalker.core.models.types.TypeTemplate.html#stalker.core.models.types.TypeTemplate" title="stalker.core.models.types.TypeTemplate"><tt class="xref py py-class docutils literal"><span class="pre">TypeTemplate</span></tt></a> object.</p>
<p>A <em>TypeTemplate</em> object has information about the path, the filename, and the
Type of the asset to apply this template to:</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#part-i-basics">Part I - Basics</a></li>
<li><a class="reference internal" href="#part-ii-creating-simple-data">Part II - Creating Simple Data</a></li>
<li><a class="reference internal" href="#part-iii-pipeline">Part III - Pipeline</a></li>
<li><a class="reference internal" href="#part-iv-task-resource-management">Part IV - Task &amp; Resource Management</a></li>
<li><a class="reference internal" href="#part-v-asset-management">Part V - Asset Management</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="design.html"
                        title="next chapter">Design</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design.html" title="Design"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">Stalker v0.1.1.a2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Erkan Ozgur Yilmaz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.6.
    </div>
  </body>
</html>