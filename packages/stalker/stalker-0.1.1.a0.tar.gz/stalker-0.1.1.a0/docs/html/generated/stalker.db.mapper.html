

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>stalker.db.mapper &mdash; Stalker v0.1.0.20110110 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0.20110110',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Stalker v0.1.0.20110110 documentation" href="../index.html" />
    <link rel="next" title="stalker.db.meta" href="stalker.db.meta.html" />
    <link rel="prev" title="stalker.db.auth.logout" href="stalker.db.auth.logout.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="stalker.db.meta.html" title="stalker.db.meta"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="stalker.db.auth.logout.html" title="stalker.db.auth.logout"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Stalker v0.1.0.20110110 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="stalker-db-mapper">
<h1>stalker.db.mapper<a class="headerlink" href="#stalker-db-mapper" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="stalker.db.mapper">
<tt class="descclassname">stalker.db.</tt><tt class="descname">mapper</tt><big>(</big><em>class_</em>, <em>local_table=None</em>, <em>*args</em>, <em>**params</em><big>)</big><a class="headerlink" href="#stalker.db.mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>class_</strong> &#8211; The class to be mapped.</li>
<li><strong>local_table</strong> &#8211; The table to which the class is mapped, or None if
this mapper inherits from another mapper using concrete table
inheritance.</li>
<li><strong>always_refresh</strong> &#8211; If True, all query operations for this mapped
class will overwrite all data within object instances that already
exist within the session, erasing any in-memory changes with
whatever information was loaded from the database. Usage of this
flag is highly discouraged; as an alternative, see the method
<tt class="xref py py-meth docutils literal"><span class="pre">Query.populate_existing()</span></tt>.</li>
<li><strong>allow_null_pks</strong> &#8211; This flag is deprecated - this is stated as
allow_partial_pks which defaults to True.</li>
<li><strong>allow_partial_pks</strong> &#8211; Defaults to True.  Indicates that a
composite primary key with some NULL values should be considered as
possibly existing within the database. This affects whether a
mapper will assign an incoming row to an existing identity, as well
as if <tt class="xref py py-meth docutils literal"><span class="pre">Session.merge()</span></tt> will check the database first for a
particular primary key value. A &#8220;partial primary key&#8221; can occur if
one has mapped to an OUTER JOIN, for example.</li>
<li><strong>batch</strong> &#8211; Indicates that save operations of multiple entities 
can be batched together for efficiency. setting to False indicates
that an instance will be fully saved before saving the next
instance, which includes inserting/updating all table rows
corresponding to the entity as well as calling all
<tt class="xref py py-class docutils literal"><span class="pre">MapperExtension</span></tt> methods corresponding to the save
operation.</li>
<li><strong>column_prefix</strong> &#8211; A string which will be prepended to the <cite>key</cite>
name of all <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects when creating 
column-based properties from the
given <tt class="xref py py-class docutils literal"><span class="pre">Table</span></tt>. Does not affect explicitly specified 
column-based properties</li>
<li><strong>concrete</strong> &#8211; If True, indicates this mapper should use concrete
table inheritance with its parent mapper.</li>
<li><strong>exclude_properties</strong> &#8211; A list or set of string column names to 
be excluded from mapping. As of SQLAlchemy 0.6.4, this collection
may also include <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects. Columns named or present
in this list will not be automatically mapped. Note that neither
this option nor include_properties will allow one to circumvent plan
Python inheritance - if mapped class <tt class="docutils literal"><span class="pre">B</span></tt> inherits from mapped
class <tt class="docutils literal"><span class="pre">A</span></tt>, no combination of includes or excludes will allow <tt class="docutils literal"><span class="pre">B</span></tt>
to have fewer properties than its superclass, <tt class="docutils literal"><span class="pre">A</span></tt>.</li>
<li><strong>extension</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">MapperExtension</span></tt> instance or
list of <tt class="xref py py-class docutils literal"><span class="pre">MapperExtension</span></tt>
instances which will be applied to all operations by this
<tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt>.</li>
<li><strong>include_properties</strong> &#8211; An inclusive list or set of string column
names to map. As of SQLAlchemy 0.6.4, this collection may also
include <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects in order to disambiguate between
same-named columns in a selectable (such as a
<tt class="xref py py-func docutils literal"><span class="pre">join()</span></tt>). If this list is not <tt class="xref docutils literal"><span class="pre">None</span></tt>, columns
present in the mapped table but not named or present in this list
will not be automatically mapped. See also &#8220;exclude_properties&#8221;.</li>
<li><strong>inherits</strong> &#8211; Another <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> for which 
this <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> will have an inheritance
relationship with.</li>
<li><strong>inherit_condition</strong> &#8211; For joined table inheritance, a SQL
expression (constructed
<tt class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></tt>) which will
define how the two tables are joined; defaults to a natural join
between the two tables.</li>
<li><strong>inherit_foreign_keys</strong> &#8211; When inherit_condition is used and the
condition contains no ForeignKey columns, specify the &#8220;foreign&#8221;
columns of the join condition in this list. else leave as None.</li>
<li><strong>non_primary</strong> &#8211; Construct a <tt class="xref py py-class docutils literal"><span class="pre">Mapper</span></tt> that will define only
the selection of instances, not their persistence. Any number of
non_primary mappers may be created for a particular class.</li>
<li><strong>order_by</strong> &#8211; A single <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> or list of <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt>
objects for which selection operations should use as the default
ordering for entities. Defaults to the OID/ROWID of the table if
any, or the first primary key column of the table.</li>
<li><strong>passive_updates</strong> &#8211; <p>Indicates UPDATE behavior of foreign keys 
when a primary key changes on a joined-table inheritance or other
joined table mapping.</p>
<p>When True, it is assumed that ON UPDATE CASCADE is configured on
the foreign key in the database, and that the database will handle
propagation of an UPDATE from a source column to dependent rows.
Note that with databases which enforce referential integrity (i.e.
PostgreSQL, MySQL with InnoDB tables), ON UPDATE CASCADE is
required for this operation. The relationship() will update the
value of the attribute on related items which are locally present
in the session during a flush.</p>
<p>When False, it is assumed that the database does not enforce
referential integrity and will not be issuing its own CASCADE
operation for an update. The relationship() will issue the
appropriate UPDATE statements to the database in response to the
change of a referenced key, and items locally present in the
session during a flush will also be refreshed.</p>
<p>This flag should probably be set to False if primary key changes
are expected and the database in use doesn&#8217;t support CASCADE (i.e.
SQLite, MySQL MyISAM tables).</p>
<blockquote>
Also see the passive_updates flag on <tt class="xref py py-func docutils literal"><span class="pre">relationship()</span></tt>.</blockquote>
<p>A future SQLAlchemy release will provide a &#8220;detect&#8221; feature for
this flag.</p>
</li>
<li><strong>polymorphic_on</strong> &#8211; Used with mappers in an inheritance
relationship, a <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> which will identify the class/mapper
combination to be used with a particular row. Requires the
<tt class="docutils literal"><span class="pre">polymorphic_identity</span></tt> value to be set for all mappers in the
inheritance hierarchy. The column specified by <tt class="docutils literal"><span class="pre">polymorphic_on</span></tt>
is usually a column that resides directly within the base mapper&#8217;s
mapped table; alternatively, it may be a column that is only
present within the &lt;selectable&gt; portion of the <tt class="docutils literal"><span class="pre">with_polymorphic</span></tt>
argument.</li>
<li><strong>polymorphic_identity</strong> &#8211; A value which will be stored in the
Column denoted by polymorphic_on, corresponding to the class
identity of this mapper.</li>
<li><strong>properties</strong> &#8211; A dictionary mapping the string names of object
attributes to <tt class="docutils literal"><span class="pre">MapperProperty</span></tt> instances, which define the
persistence behavior of that attribute. Note that the columns in
the mapped table are automatically converted into
<tt class="docutils literal"><span class="pre">ColumnProperty</span></tt> instances based on the <tt class="docutils literal"><span class="pre">key</span></tt> property of each
<tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> (although they can be overridden using this dictionary).</li>
<li><strong>primary_key</strong> &#8211; A list of <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> objects which define the
primary key to be used against this mapper&#8217;s selectable unit.
This is normally simply the primary key of the <tt class="docutils literal"><span class="pre">local_table</span></tt>, but
can be overridden here.</li>
<li><strong>version_id_col</strong> &#8211; A <tt class="xref py py-class docutils literal"><span class="pre">Column</span></tt> which must have an integer type
that will be used to keep a running version id of mapped entities
in the database. this is used during save operations to ensure that
no other thread or process has updated the instance during the
lifetime of the entity, else a <tt class="xref py py-class docutils literal"><span class="pre">StaleDataError</span></tt> exception is
thrown.</li>
<li><strong>version_id_generator</strong> &#8211; <p>A callable which defines the algorithm
used to generate new version ids. Defaults to an integer
generator. Can be replaced with one that generates timestamps,
uuids, etc. e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">uuid</span>

<span class="n">mapper</span><span class="p">(</span><span class="n">Cls</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> 
<span class="n">version_id_col</span><span class="o">=</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">version_uuid</span><span class="p">,</span>
<span class="n">version_id_generator</span><span class="o">=</span><span class="k">lambda</span> <span class="n">version</span><span class="p">:</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The callable receives the current version identifier as its 
single argument.</p>
</li>
<li><strong>with_polymorphic</strong> &#8211; A tuple in the form <tt class="docutils literal"><span class="pre">(&lt;classes&gt;,</span>
<span class="pre">&lt;selectable&gt;)</span></tt> indicating the default style of &#8220;polymorphic&#8221;
loading, that is, which tables are queried at once. &lt;classes&gt; is
any single or list of mappers and/or classes indicating the
inherited classes that should be loaded at once. The special value
<tt class="docutils literal"><span class="pre">'*'</span></tt> may be used to indicate all descending classes should be
loaded immediately. The second tuple argument &lt;selectable&gt;
indicates a selectable that will be used to query for multiple
classes. Normally, it is left as None, in which case this mapper
will form an outer join from the base mapper&#8217;s table to that of
all desired sub-mappers. When specified, it provides the
selectable to be used for polymorphic loading. When
with_polymorphic includes mappers which load from a &#8220;concrete&#8221;
inheriting table, the &lt;selectable&gt; argument is required, since it
usually requires more complex UNION queries.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="stalker.db.auth.logout.html"
                        title="previous chapter">stalker.db.auth.logout</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="stalker.db.meta.html"
                        title="next chapter">stalker.db.meta</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/generated/stalker.db.mapper.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="stalker.db.meta.html" title="stalker.db.meta"
             >next</a> |</li>
        <li class="right" >
          <a href="stalker.db.auth.logout.html" title="stalker.db.auth.logout"
             >previous</a> |</li>
        <li><a href="../index.html">Stalker v0.1.0.20110110 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Erkan Ozgur Yilmaz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.6.
    </div>
  </body>
</html>