

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quick start (command line interface) &mdash; Maja Machine Learning Framework v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Maja Machine Learning Framework v1.0 documentation" href="../index.html" />
    <link rel="up" title="Tutorials" href="tutorials.html" />
    <link rel="next" title="Quick start (graphical user interface)" href="quick_start_gui.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quick_start_gui.html" title="Quick start (graphical user interface)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Maja Machine Learning Framework v1.0 documentation</a> &raquo;</li>
          <li><a href="tutorials.html" accesskey="U">Tutorials</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="quick-start-command-line-interface">
<span id="quickstart"></span><h1>Quick start (command line interface)<a class="headerlink" href="#quick-start-command-line-interface" title="Permalink to this headline">Â¶</a></h1>
<p>This tutorial explains how you can let an agent learn in a certain environment using the command line interface. It assumes that you already <a class="reference internal" href="installation.html#installation"><em>installed</em></a> the MMLF successfully.</p>
<p>Lets assume you just want to test the TD Lambda agent in the Mountain Car environment. Starting this is essentially a one-liner at the command line:</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="n">run_mmlf</span> <span class="o">--</span><span class="n">config</span> <span class="n">mountain_car</span><span class="o">/</span><span class="n">world_td_lambda_exploration</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>This will start the MMLF and execute the world defined in  the file world_td_lambda_exploration.yaml</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you installed the MMLF locally you might have to write &#8221;./run_mmlf &#8211;config mountain_car/world_td_lambda_exploration.yaml&#8221; instead under unix-based OS.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If this is your very first run of the MMLF, the MMLF will create the so-called &#8220;rw-directory&#8221; for your user. This rw-directory is essentially the place where the MMLF stores the configuration of all worlds and the log files etc. Per default this directory is the .mmlf directory in your home directory (Under MS Windows $HOME equals $USERPROFILE\.). If you want to change the configuration of a world, this is the place to do it (and not /etc/mmlf). If you want to use a different directory as rw-directory, you can specify this with the option &#8220;&#8211;rwpath&#8221;, for instance run_mmlf &#8211;config mountain_car/world_td_lambda_exploration.yaml &#8211;rwpath /home/someuser/Temp/mmlfrw&#8221; would use the directory &#8220;/home/someuser/Temp/mmlfrw&#8221; as rw-directory. This directory must be specified in each invocation of the MMLf again, the MMLF does not remember this path!</p>
</div>
<p>Once the MMLF rw-directory is created, the world will be started. Some information are printed out, for instance that the agent receives information about state and action space from the environment. Then, the agent starts to perform in the environment and the environments prints out some informations about how the agent performs:</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="s">&#39;2011-02-15 11:12:39,700 FrameworkLog         INFO     Using MMLF RW area /home/jmetzen/.mmlf</span>
<span class="s">&#39;</span><span class="mi">2011</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">15</span> <span class="mi">11</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">39</span><span class="p">,</span><span class="mi">700</span> <span class="n">FrameworkLog</span>         <span class="n">INFO</span>     <span class="n">Loading</span> <span class="n">world</span> <span class="n">from</span> <span class="n">config</span> <span class="n">file</span> <span class="n">mountain_car</span><span class="o">/</span><span class="n">world_td_lambda_exploration</span><span class="o">.</span><span class="n">yaml</span><span class="o">.</span>
<span class="s">&#39;2011-02-15 11:12:40,642 AgentLog             INFO     TDLambdaAgent got new state-space:</span>
<span class="s">        StateSpace:</span>
<span class="s">                position        : ContinuousDimension(LimitType: soft, Limits: (-1.200,0.600))</span>
<span class="s">                velocity        : ContinuousDimension(LimitType: soft, Limits: (-0.070,0.070))</span>
<span class="s">&#39;</span><span class="mi">2011</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">15</span> <span class="mi">11</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="mi">646</span> <span class="n">AgentLog</span>             <span class="n">INFO</span>     <span class="n">TDLambdaAgent</span> <span class="n">got</span> <span class="k">new</span> <span class="n">action</span><span class="o">-</span><span class="n">space:</span>
        <span class="n">ActionSpace:</span>
                <span class="n">thrust</span>          <span class="p">:</span> <span class="n">DiscreteDimension</span><span class="p">(</span><span class="n">Values:</span> <span class="p">[</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;right&#39;</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">])</span>
<span class="s">&#39;2011-02-15 11:12:59,130 EnvironmentLog       INFO     No goal reached but 500 steps expired!</span>
<span class="s">&#39;</span><span class="mi">2011</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">15</span> <span class="mi">11</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="mi">181</span> <span class="n">EnvironmentLog</span>       <span class="n">INFO</span>     <span class="n">No</span> <span class="n">goal</span> <span class="n">reached</span> <span class="n">but</span> <span class="mi">500</span> <span class="n">steps</span> <span class="n">expired</span><span class="o">!</span>
<span class="s">&#39;2011-02-15 11:13:22,174 EnvironmentLog       INFO     No goal reached but 500 steps expired!</span>
<span class="s">&#39;</span><span class="mi">2011</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">15</span> <span class="mi">11</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span><span class="mi">678</span> <span class="n">EnvironmentLog</span>       <span class="n">INFO</span>     <span class="n">Goal</span> <span class="n">reached</span> <span class="n">after</span> <span class="mi">202</span> <span class="n">steps</span><span class="o">!</span>
<span class="err">&#39;</span><span class="mi">2011</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">15</span> <span class="mi">11</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span><span class="mi">797</span> <span class="n">EnvironmentLog</span>       <span class="n">INFO</span>     <span class="n">Goal</span> <span class="n">reached</span> <span class="n">after</span> <span class="mi">6</span> <span class="n">steps</span><span class="o">!</span>

<span class="o">....</span>
</pre></div>
</div>
<p>This shows that the agent wasn&#8217;t able to reach the goal during the first episodes but over time it finds its way to the goal more frequently and faster. You can observe the performance of the agent for some time and see if its performance improves. You can stop the world by CTRl^C.</p>
<p>Once you have stopped the learning, you can take a look in the MMLF RW area (the one created during your first run of the MMLF). There are now two subdirectories: config and logs. The logs directory contains information about the run you just conducted. Among other things, the length of the episodes is stored in a separated log file that can be used for later analysis of the agents performance. To learn more about this, you can take a look at the <a class="reference internal" href="../learn_more/logging.html#logging"><em>Logging</em></a> page. For now, we focus on the config directory.</p>
<p>The config directory contains configuration files for all worlds contained in the MMLF. Lets start with the world configuration file we just used to start our first MMLF run. This one is located in config/mountain_car. If we open world_td_lambda_exploration.yaml, we can see the following:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">worldPackage</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mountain_car</span>
<span class="l-Scalar-Plain">environment</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">moduleName</span> <span class="p-Indicator">:</span> <span class="s">&quot;mcar_env&quot;</span>
    <span class="l-Scalar-Plain">configDict</span><span class="p-Indicator">:</span> 
        <span class="l-Scalar-Plain">maxStepsPerEpisode</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">500</span>    
        <span class="l-Scalar-Plain">accelerationFactor</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.001</span>
        <span class="l-Scalar-Plain">maxGoalVelocity</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.07</span>
        <span class="l-Scalar-Plain">positionNoise</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.0</span>
        <span class="l-Scalar-Plain">velocityNoise</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.0</span>
<span class="l-Scalar-Plain">agent</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">moduleName</span> <span class="p-Indicator">:</span> <span class="s">&quot;td_lambda_agent&quot;</span>
    <span class="l-Scalar-Plain">configDict</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">gamma</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1.0</span>
        <span class="l-Scalar-Plain">epsilon</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.01</span>
        <span class="l-Scalar-Plain">lambda</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.95</span>
        <span class="l-Scalar-Plain">minTraceValue</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.5</span>
        <span class="l-Scalar-Plain">defaultStateDimDiscretizations</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">9</span>
        <span class="l-Scalar-Plain">defaultActionDimDiscretizations</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">7</span>
        <span class="l-Scalar-Plain">function_approximator</span> <span class="p-Indicator">:</span> 
            <span class="l-Scalar-Plain">name</span> <span class="p-Indicator">:</span> <span class="s">&#39;CMAC&#39;</span>
            <span class="l-Scalar-Plain">number_of_tilings</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">10</span>
            <span class="l-Scalar-Plain">learning_rate</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.5</span>
            <span class="l-Scalar-Plain">update_rule</span> <span class="p-Indicator">:</span> <span class="s">&#39;exaggerator&#39;</span>
            <span class="l-Scalar-Plain">default</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.0</span>
<span class="l-Scalar-Plain">monitor</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">policyLogFrequency</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">25</span>
    <span class="l-Scalar-Plain">stateActionValuesLogging</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">logFrequency</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">25</span>
        <span class="l-Scalar-Plain">stateDims</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">None</span>
        <span class="l-Scalar-Plain">actions</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">None</span>
        <span class="l-Scalar-Plain">rasterPoints</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">50</span>
    <span class="l-Scalar-Plain">functionOverStateSpaceLogging</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">logFrequency</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">25</span>
        <span class="l-Scalar-Plain">stateDims</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">None</span>
        <span class="l-Scalar-Plain">rasterPoints</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">50</span>
</pre></div>
</div>
<p>Basically, this file specifies where the python-modules for the agent and the environment are located and how the parameters of agent and environment are chosen. Furthermore, it specifies which information a module called &#8220;Monitor&#8221; will store periodically in the log directory (see <a class="reference internal" href="../learn_more/logging.html#monitor"><em>Monitor</em></a> for more details on that). The config directory contains a magnitude of world specification files, for instance world_dps.yaml in the directory mountain_car:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">worldPackage</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mountain_car</span>
<span class="l-Scalar-Plain">environment</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">moduleName</span> <span class="p-Indicator">:</span> <span class="s">&quot;mcar_env&quot;</span>
    <span class="l-Scalar-Plain">configDict</span><span class="p-Indicator">:</span> 
        <span class="l-Scalar-Plain">maxStepsPerEpisode</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">500</span>    
        <span class="l-Scalar-Plain">accelerationFactor</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.001</span>
        <span class="l-Scalar-Plain">maxGoalVelocity</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.07</span>
        <span class="l-Scalar-Plain">positionNoise</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.0</span>
        <span class="l-Scalar-Plain">velocityNoise</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.0</span>
<span class="l-Scalar-Plain">agent</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">moduleName</span> <span class="p-Indicator">:</span> <span class="s">&quot;dps_agent&quot;</span>
    <span class="l-Scalar-Plain">configDict</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">policy_search</span> <span class="p-Indicator">:</span> 
            <span class="l-Scalar-Plain">method</span><span class="p-Indicator">:</span> <span class="s">&#39;fixed_parametrization&#39;</span>
            <span class="l-Scalar-Plain">policy</span><span class="p-Indicator">:</span> 
                <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&#39;linear&#39;</span>
                <span class="l-Scalar-Plain">numOfDuplications</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
                <span class="l-Scalar-Plain">bias</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
            <span class="l-Scalar-Plain">optimizer</span><span class="p-Indicator">:</span> 
                <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="s">&#39;evolution_strategy&#39;</span>
                <span class="l-Scalar-Plain">sigma</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">1.0</span>
                <span class="l-Scalar-Plain">populationSize</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5</span>
                <span class="l-Scalar-Plain">evalsPerIndividual</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">10</span>
                <span class="l-Scalar-Plain">numChildren</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">10</span>
<span class="l-Scalar-Plain">monitor</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">policyLogFrequency</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
    <span class="l-Scalar-Plain">functionOverStateSpaceLogging</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">logFrequency</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">25</span>
        <span class="l-Scalar-Plain">stateDims</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">None</span>
        <span class="l-Scalar-Plain">rasterPoints</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">50</span>
</pre></div>
</div>
<p>As you can see, the environments in the two configuration files are identical but the agents are different. This world can be started with a similar command as the first one, namely using</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="n">run_mmlf</span>  <span class="o">--</span><span class="n">config</span> <span class="n">mountain_car</span><span class="o">/</span><span class="n">world_dps</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>This will start a different learning agent (one using a Direct Policy Search algorithm for learning) and let it learn the mountain car task.</p>
<p>If you are more interested in further experiments with the td_lambda_agent, you can stick with the old world_td_lambda_exploration.yaml but edit the agent part of it. For the purposes of this tutorial, the interesting stuff of this configuration file is the configDict of the agent since this one contains the parameter values that are used by the agent. For instance, we see that the agent uses a discount factor gamma of 1.0 and follows an epsilon-greedy policy (epsilon is 0.01). If you don&#8217;t know about the concepts of this agent, you might want to take look at the excellent book by <a class="reference external" href="http://www.cs.ualberta.ca/%7Esutton/book/ebook/the-book">Sutton and Barto</a> . You can now modify the parameters and see how the learning performance is influenced. For instance, set epsilon to &#8220;0.0&#8221; to get an agent that always acts greedily and store the file as &#8220;world_td_lambda_no_exploration.yaml&#8221;. To start the world, simply run</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="n">run_mmlf</span>  <span class="o">--</span><span class="n">config</span> <span class="n">mountain_car</span><span class="o">/</span><span class="n">world_td_lambda_exploration</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>You can now use the basic features of the MMLF. Starting other worlds is done similarly, for instance</p>
<div class="highlight-guess"><div class="highlight"><pre><span class="n">run_mmlf</span>  <span class="o">--</span><span class="n">config</span> <span class="n">single_pole_balancing</span><span class="o">/</span><span class="n">world_dps</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>will start the single-pole-balancing scenario with the DPS agent enabled.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt>Tutorial <a class="reference internal" href="quick_start_gui.html#quickstart-gui"><em>Quick start (graphical user interface)</em></a></dt>
<dd>Learn how to use the MMLF&#8217;s graphical user interface</dd>
<dt>Tutorial <a class="reference internal" href="writing_agents.html#writing-agents"><em>Writing an agent</em></a></dt>
<dd>Learn how to write your own MMLF agent</dd>
<dt>Tutorial <a class="reference internal" href="writing_environments.html#writing-environments"><em>Writing an environment</em></a></dt>
<dd>Learn how to write your own MMLF environment</dd>
<dt>Learn more about <a class="reference internal" href="../learn_more/evaluating_experiments.html#running-experiments"><em>Experiments</em></a></dt>
<dd>Learn how to do a serious benchmarking and statistical comparison of the performance of different agents/environments</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/MMLF_white.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="quick_start_gui.html"
                        title="next chapter">Quick start (graphical user interface)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/tutorials/quick_start.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quick_start_gui.html" title="Quick start (graphical user interface)"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="../index.html">Maja Machine Learning Framework v1.0 documentation</a> &raquo;</li>
          <li><a href="tutorials.html" >Tutorials</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Jan Hendrik Metzen, Mark Edgington.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>