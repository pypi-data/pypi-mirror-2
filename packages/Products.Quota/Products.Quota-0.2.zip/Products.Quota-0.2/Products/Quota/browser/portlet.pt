<dl class="portlet portletQuota"
    i18n:domain="quota">

    <dt class="portletHeader"
        i18n:translate="">
        Quota
    </dt>

    <style type="text/css"
           tal:replace="nothing">
        /* this is not valid in portlets, so i had to add the inline-style
           attributes or move that code to a external stylesheet, but that
           requires a new import step */

        .usage {
            background-color: green;
            position: relative;
            height: 5px;
            margin-bottom: 1em;
        }
        .usage span {
            height: 5px;
            display: block;
            position: absolute;
        }
        .softQuota {
            background-color: green;
        }
        .totalUsage {
            background-color: red;
        }
        .currentUsage {
            background-color: red;
        }
        .portletQuota {
            padding-right: 10px;
        }
    </style>

    <dd class="portletItem"
        tal:define="format nocall:view/format;
                    base_style string:height:5px;;display:block;;position:absolute;;">

        <div class="usage"
             style="background-color:green;position:relative;height:5px;margin-bottom:1em">
            <span class="softQuota"
                  tal:attributes="style python:base_style+'background-color:green;;width:%d%%;;' % (int(view.percent_quota))"><!-- --></span>
            <span class="totalUsage"
                  tal:attributes="style python:base_style+'background-color:red;;width:%d%%;;' % (int(view.percent_total))"><!-- --></span>
            <span class="currentUsage"
                  tal:attributes="style python:base_style+'background-color:red;;width:%d%%;;' % (int(view.percent_size))"><!-- --></span>
        </div>

        <p class="discreet"
           i18n:translate="">
                This container has a quota limit of
                <tal:value i18n:name="limit"
                           content="python:format(view.quota)" />,
                with a hard limit of
                <tal:value i18n:name="hard_limit"
                           content="python:format(view.hard_limit)" />,
                and at the moment contains
                <tal:value i18n:name="total"
                           content="python:format(view.total)" />.
        </p>

    </dd>

</dl>
