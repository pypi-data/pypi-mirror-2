<div metal:define-macro="reports_results" 
    tal:define="results view/getResults;
		error python:results=='BadAuthenticationError' or results=='MissingCredentialsError';"
    class="analytics-reports-results">
				
	<p class="error" tal:condition="error">
		An error occurred while retrieving the results of the report.  
		Please verify that you have entered the correct e-mail address and password in the 
		<a tal:attributes="href string:${context/portal_url}/portal_analytics/@@analytics-controlpanel" 
			href="">Google Analytics control panel</a>.
	</p>
	
	<tal:block condition="not:error">
		<h2 class="analytics-date-range-label">Last 30 Days</h2>
		<tal:results repeat="result results">
			<div tal:content="structure result/getVizIntroduction"></div>
			<div tal:define="height result/getVizHeight;" 
			    tal:attributes="id result/getVizID;
			        style python:(height and 'height:' + str(height) + 'px;;') or ''"></div>
			<script type="text/javascript" tal:content="result/getVizJS"></script>
			<div tal:content="structure result/getVizConclusion"></div>
		</tal:results>
	</tal:block>
</div>