

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to django-bft - documentation &mdash; django-bft v0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="django-bft v0.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="#">django-bft v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-django-bft-documentation">
<h1>Welcome to django-bft - documentation<a class="headerlink" href="#welcome-to-django-bft-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><strong>django-bft</strong> is a Django application that handles large file transfers.  The
application&#8217;s frontend has both a flash upload version as well as a javascript
upload version.</p>
<p><strong>django-bft</strong> was origianlly created for Utah State University
to fulfill a specific need of sending large files through email.</p>
<p>The site can be viewed at <a class="reference external" href="https://bft.usu.edu">https://bft.usu.edu</a></p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><strong>Web server</strong></p>
<p><strong>Apache</strong> using <strong>mod-wsgi</strong> is the prefered web server of choice and, currently,
is the only web server that has been tested with django-bft.  Web servers such as
Lighttp and Nginx may work, but have not been tested.</p>
<p><strong>Note:</strong> django-bft uses ajax to display a progress bar during upload.
As such, the Django development web server will not be able to upload files
since it is only single threaded.</p>
</li>
<li><p class="first"><strong>Database</strong></p>
<p>All databases supported by Django should work with django-bft.
(Postgres, MySQL, and Oracle)</p>
</li>
<li><p class="first"><strong>Django</strong></p>
<p>django-bft has been created using the latest version of Django (1.3).
Django 1.1x or later will probably work, but with the change in how <strong>static</strong>
files are handled, you are advised to install django-staticfiles for static file serving.</p>
<p>Refer to: <a class="reference external" href="https://github.com/jezdez/django-staticfiles">https://github.com/jezdez/django-staticfiles</a></p>
</li>
</ol>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To get this application up and running, please follow the steps below:</p>
<ol class="arabic">
<li><p class="first">Create a Django production environment using the setup of your choice.
Refer to: <a class="reference external" href="http://docs.djangoproject.com/en/dev/intro/install/">http://docs.djangoproject.com/en/dev/intro/install/</a></p>
</li>
<li><p class="first">Create a new Django Project:</p>
<div class="highlight-python"><pre>$ django-admin.py startproject &lt;projectname&gt;</pre>
</div>
</li>
<li><p class="first">Install django-bft to either your PYTHON_PATH or in a folder inside your project:</p>
<ul>
<li><p class="first">Install from pip:</p>
<div class="highlight-python"><pre>$ pip install django-bft</pre>
</div>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/django-bft/dango-bft/downloads">Download</a> and install from source:</p>
<div class="highlight-python"><pre>$ python setup.py install</pre>
</div>
</li>
<li><p class="first">Install source to local directory:</p>
<div class="highlight-python"><pre>$ python setup.py build
$ cp build/lib/bft /&lt;PROJECT_ROOT&gt;/</pre>
</div>
</li>
</ul>
</li>
<li><p class="first">Add the following to your <strong>settings.py</strong> file:</p>
<ul>
<li><p class="first">Add &#8216;bft&#8217;, &#8216;staticfiles&#8217; and &#8216;admin&#8217; to INSTALLED_APPS:</p>
<div class="highlight-python"><pre>INSTALLED_APPS = (
        ...
        'django.contrib.admin',
        'django.contrib.staticfiles',
        'bft',
)</pre>
</div>
</li>
<li><p class="first">Make sure your static file finders are configured:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">STATICFILES_FINDERS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;django.contrib.staticfiles.finders.AppDirectoriesFinder&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Add &#8216;bft.context_processors.bft&#8217; to the context processors:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;bft.context_processors.bft&#39;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">+</span> <span class="n">global_settings</span><span class="o">.</span><span class="n">TEMPLATE_CONTEXT_PROCESSORS</span>
</pre></div>
</div>
</li>
<li><p class="first">Add &#8216;bft.utils.upload_handlers.UploadProgressCachedHandler&#8217; to the file
upload handlers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FILE_UPLOAD_HANDLERS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;bft.utils.upload_handlers.UploadProgressCachedHandler&#39;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">+</span> <span class="n">global_settings</span><span class="o">.</span><span class="n">FILE_UPLOAD_HANDLERS</span>
</pre></div>
</div>
</li>
<li><p class="first">(Optional) - You might want to change the location of the
FILE_UPLOAD_TEMP_DIR.  This setting is the location of where files
will be temporarily be stored while uploading.  The default for this is
the operating systems temp directory.  If space is limited at this
directory, it is advised to change this setting.</p>
</li>
</ul>
</li>
<li><p class="first">Modify <strong>app_settings.py</strong> as needed.</p>
</li>
<li><p class="first">If reCaptcha is to be used, a public and private key will be needed.</p>
<p>Refer to: <a class="reference external" href="http://www.google.com/recaptcha">http://www.google.com/recaptcha</a></p>
<p>The python reCaptcha library is also <strong>required</strong>.  You can install it
onto your PYTHON_PATH by using pip:</p>
<div class="highlight-python"><pre>$ pip install recaptcha-client</pre>
</div>
</li>
<li><p class="first">Because this app is designed to upload very large files, enforcing size
restrictions using Django is not recomended and rarly works.  It is better
to add this enforcement on the web server layer.  You can do this on Apache
by adding the following directives to your Apache config:</p>
<div class="highlight-python"><pre>LimitRequestBody 1073741824 #The same size as specified in your app_settings.py file
ErrorDocument 413 http://&lt;SERVER_NAME&gt;/413error/</pre>
</div>
</li>
<li><p class="first">If you care about your files being secured, you will probably want to protect
the directory where files are stored using apache:</p>
<div class="highlight-python"><pre>&lt;Location /media/files&gt;
        Order allow,deny
        Deny from all
&lt;/Location&gt;</pre>
</div>
<p>You may also want to consider adding the necessary directives to redirect
non-ssl traffic over to ssl:</p>
<div class="highlight-python"><pre>RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}</pre>
</div>
</li>
<li><p class="first">Setup a cron job to handle file archiving and deletion.  An example of this
could be:</p>
<div class="highlight-python"><pre>#!/bin/sh

./manage.py deleteuploads
./manage.py deletetempfiles</pre>
</div>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to django-bft - documentation</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="#">django-bft v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Jay McEntire.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>