

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pytilities.aop.advisor &mdash; Pytilities v1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="Pytilities v1.0.0 documentation" href="../../../../" />
    <link rel="up" title="pytilities.aop" href="../../aop/" />
    <link rel="next" title="pytilities.aop.aopmeta" href="../aopmeta/" />
    <link rel="prev" title="pytilities.aop.functions" href="../functions/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../aopmeta/" title="pytilities.aop.aopmeta"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../functions/" title="pytilities.aop.functions"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../../">Pytilities v1.0.0 documentation</a> &raquo;</li>
          <li><a href="../../../" >API documentation</a> &raquo;</li>
          <li><a href="../../../pytilities/" >pytilities</a> &raquo;</li>
          <li><a href="../../aop/" accesskey="U">pytilities.aop</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pytilities.aop.advisor">
<span id="pytilities-aop-advisor"></span><h1>pytilities.aop.advisor<a class="headerlink" href="#module-pytilities.aop.advisor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pytilities.aop.advisor.Advisor">
<em class="property">class </em><tt class="descclassname">pytilities.aop.advisor.</tt><tt class="descname">Advisor</tt><a class="headerlink" href="#pytilities.aop.advisor.Advisor" title="Permalink to this definition">¶</a></dt>
<dd><p>Something that can advise objects, also manages all aspects.</p>
<p>Advice can be given to any non-builtin object. Advice is called before
calling the original function/descriptor; it can modify return value,
arguments, call the original function, or not, ... See the user guide 
on how to write advice functions.</p>
<p>There are two types of advice to be given:</p>
<ul class="simple">
<li>class advice</li>
<li>instance advice</li>
</ul>
<p>Class advice is advice given to class objects. It is executed for both
classes and instances of those classes.</p>
<p>Instance advice is advice given to instance objects. It is executed only
for instances.</p>
<p>Instance advice always wraps class advice; i.e. upon call, instance advice
is processed first.</p>
<p>A special kind of advice exists that allows you to advise any member
of a class. This advice is called * advice, it exists for class and
instance advice. It requires the advised object has AOPMeta as its
metaclass. You can give * advice by specifying &#8216;*&#8217; as the member
to advise.</p>
<p>No advice, not even * advice, can advice private/protected members. Members are
considered private/protected if their name begins with a single &#8216;_&#8217;, but
isn&#8217;t special. You can, however, advice some special attributes that are
not in advisor.unadvisables.</p>
<p>Advice can be given separately to gets, sets, dels and calls of a member.
Call advice is applied to any function returned by a get of the member it
was given to. Note that the returned function needn&#8217;t even be actual part
of the object&#8217;s dict.</p>
<p>Advice is given with aspects. An aspect is a collection of advice to member
mappings, it can be (un)applied to an object. The order in which aspects
are applied to an object is important. Aspects last applied to an object
will have their advice called first. Think of it as wrapping all previous
advice with new advice. In fact, you&#8217;d best not even care about previously
given advice. If previous advice doesn&#8217;t break the interface, information
is hidden well enough not to think about other advice, and by doing so
reduce coupling.</p>
<p>Note on static methods: with a class A, an instance a and a static method
h; A.h() is not necessarily the same as a.h() as a.h() might be given
instance advice. (this may be non-intuitive, but the converse was near
impossible to implement)</p>
<dl class="method">
<dt id="pytilities.aop.advisor.Advisor._Advisor__get_advice">
<tt class="descname">_Advisor__get_advice</tt><big>(</big><em>obj</em>, <em>member</em>, <em>access</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor._Advisor__get_advice" title="Permalink to this definition">¶</a></dt>
<dd><p>Get iter of advice for <cite>member</cite> of <cite>obj</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> (<em>class or instance</em>) &#8211; the object to advise</li>
<li><strong>member</strong> (<em>_AOPDescriptor</em>) &#8211; member of the object</li>
<li><strong>access</strong> (<em>&#8216;__get__&#8217;, &#8216;__set__&#8217;, &#8216;__delete__&#8217; or &#8216;__call__&#8217;</em>) &#8211; the type of access being done</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">advice funcs, the left is the most outer advice (i.e. the
first advice to call, the last advice given, with class advice
preceding instance advice)</p>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">iter(advice...)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor._Advisor__place_descriptors">
<tt class="descname">_Advisor__place_descriptors</tt><big>(</big><em>obj</em>, <em>members</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor._Advisor__place_descriptors" title="Permalink to this definition">¶</a></dt>
<dd><p>places aop descriptors on given members of obj</p>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor._Advisor__proceed">
<tt class="descname">_Advisor__proceed</tt><big>(</big><em>obj</em>, <em>member</em>, <em>advised</em>, <em>access</em>, <em>advices</em>, <em>index</em>, <em>args</em>, <em>kwargs</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor._Advisor__proceed" title="Permalink to this definition">¶</a></dt>
<dd><p>advised: the function that&#8217;s being advised, will be called on proceed
access: type of access required: get, set, del, call
advices: list of advice: [[advice, generator], ...]
index: currend advice in advices
args: a list of positional args
kwargs: a dictionary of keyword args</p>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.__init__">
<tt class="descname">__init__</tt><big>(</big><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.apply">
<tt class="descname">apply</tt><big>(</big><em>aspect</em>, <em>obj</em>, <em>members</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an aspect to an object.</p>
<p>If the aspect was already applied, this call does nothing.</p>
<p>Note to user: use aspect.apply(obj) instead</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>aspect</strong> (<cite>Aspect</cite>) &#8211; the aspect to apply</li>
<li><strong>obj</strong> (<em>class or instance</em>) &#8211; the object to advise</li>
<li><strong>members</strong> (<em>set of str</em>) &#8211; members that are advised by the aspect</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.is_advisable">
<tt class="descname">is_advisable</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.is_advisable" title="Permalink to this definition">¶</a></dt>
<dd><p>See if an attribute with name <cite>name</cite> is advisable.</p>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.is_applied">
<tt class="descname">is_applied</tt><big>(</big><em>aspect</em>, <em>obj</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.is_applied" title="Permalink to this definition">¶</a></dt>
<dd><p>Get if this aspect is currently applied to an object.</p>
<p>Note to user: use aspect.is_applied(obj) instead</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> (<em>class or instance</em>) &#8211; the object to advise</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if advice is currently applied to <cite>obj</cite>, False otherwise</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.process_call">
<tt class="descname">process_call</tt><big>(</big><em>obj</em>, <em>member</em>, <em>advised</em>, <em>access</em>, <em>args</em>, <em>kwargs</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.process_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a get/set/del/regular call to an attribute.</p>
<p>Class and instance advice will be applied to the call.</p>
<p>Internal function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> (<em>class, instance</em>) &#8211; the object to advise</li>
<li><strong>member</strong> (<em>str</em>) &#8211; member name of the object</li>
<li><strong>access</strong> (<em>&#8216;__get__&#8217;, &#8216;__set__&#8217;, &#8216;__delete__&#8217; or &#8216;__call__&#8217;</em>) &#8211; the type of access being done</li>
<li><strong>args</strong> &#8211; positional args of the call. Must include the self param,
if any</li>
<li><strong>kwargs</strong> &#8211; keyword args of the call</li>
<li><strong>function</strong> &#8211; when access is __call__, this function will be used as
the advised object to call on most inner proceed.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the value that should be returned to the caller</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.unapply">
<tt class="descname">unapply</tt><big>(</big><em>aspect</em>, <em>obj</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.unapply" title="Permalink to this definition">¶</a></dt>
<dd><p>Unapply an aspect of an object.</p>
<p>If the aspect wasn&#8217;t applied, do nothing.</p>
<p>Note to user: use aspect.unapply(obj) instead</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>aspect</strong> (<cite>Aspect</cite>) &#8211; the aspect to apply</li>
<li><strong>obj</strong> (<em>class or instance</em>) &#8211; the object to advise</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pytilities.aop.advisor.Advisor.unapply_all">
<tt class="descname">unapply_all</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#pytilities.aop.advisor.Advisor.unapply_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Unapply all advice given to an object.</p>
<p>aspect.unapply(obj) is called for any aspect applied to this object.
You should call this from your advised object&#8217;s dtor or del handler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj</strong> (<em>class or instance</em>) &#8211; the object to advise</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pytilities.aop.advisor.Advisor.__weakref__">
<tt class="descname">__weakref__</tt><a class="headerlink" href="#pytilities.aop.advisor.Advisor.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="attribute">
<dt id="pytilities.aop.advisor.Advisor.unadvisables">
<tt class="descname">unadvisables</tt><a class="headerlink" href="#pytilities.aop.advisor.Advisor.unadvisables" title="Permalink to this definition">¶</a></dt>
<dd><p>Names of attributes that cannot be advised</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../functions/"
                        title="previous chapter">pytilities.aop.functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../aopmeta/"
                        title="next chapter">pytilities.aop.aopmeta</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../_sources/api/pytilities/aop/advisor.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search/" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../aopmeta/" title="pytilities.aop.aopmeta"
             >next</a> |</li>
        <li class="right" >
          <a href="../functions/" title="pytilities.aop.functions"
             >previous</a> |</li>
        <li><a href="../../../../">Pytilities v1.0.0 documentation</a> &raquo;</li>
          <li><a href="../../../" >API documentation</a> &raquo;</li>
          <li><a href="../../../pytilities/" >pytilities</a> &raquo;</li>
          <li><a href="../../aop/" >pytilities.aop</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Tim Diels (limyreth).
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>