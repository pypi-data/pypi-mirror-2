<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">


 <title>CherryPyTutorial - CherryPy - Trac</title><link rel="start" href="http://www.cherrypy.org/wiki"><link rel="search" href="http://www.cherrypy.org/search"><link rel="help" href="http://www.cherrypy.org/wiki/TracGuide"><link rel="stylesheet" href="CherryPyTutorial_files/trac.css" type="text/css"><link rel="stylesheet" href="CherryPyTutorial_files/wiki.css" type="text/css"><link rel="icon" href="http://www.cherrypy.org/chrome/common/cpicon.ico" type="image/x-icon"><link rel="shortcut icon" href="http://www.cherrypy.org/chrome/common/cpicon.ico" type="image/x-icon"><link rel="alternate" href="http://www.cherrypy.org/wiki/CherryPyTutorial?format=txt" title="Plain Text" type="text/plain"><style type="text/css">
</style>
 <script type="text/javascript" src="CherryPyTutorial_files/trac.js"></script>
</head><body>

<table id="cpmenu">
<tbody><tr>
    <td>
        <a href="http://www.cherrypy.org/wiki/CherryPyDownload">Download</a>
        <a href="http://www.cherrypy.org/wiki/CherryPyInstall">Install</a>
        <a href="http://www.cherrypy.org/wiki/CherryPyTutorial">Tutorial</a>
        <a href="http://www.cherrypy.org/wiki/TableOfContents">Docs</a>
        <a href="http://www.cherrypy.org/wiki/CherryPyFaq">FAQ</a>
        <a href="http://tools.cherrypy.org/">Tools Wiki</a>
        âˆ‡
        <a href="http://www.cherrypy.org/wiki/CherryPyLicense">License</a>
        <a href="http://www.cherrypy.org/wiki/CherryPyTeam">Team</a>
        <a href="http://www.cherrypy.org/wiki/CherryPyIrcChannel">IRC</a>
        <a href="http://planet.cherrypy.org/">Planet</a>
        <a href="http://www.cherrypy.org/wiki/CherryPyInvolved">Involvement</a>
        <a href="http://www.cafepress.com/cherrypy">Shop</a>
        <a href="http://www.cherrypy.org/wiki/Publications">Book</a>
    </td>
</tr>
</tbody></table>


<div id="banner">

<div id="header"><a id="logo" href="http://www.cherrypy.org/"><img src="CherryPyTutorial_files/cplogo.jpg" alt="CherryPy" width="160" height="54"></a><hr></div>

<form id="search" action="/search" method="get">
 <div>
  <label for="proj-search">Search:</label>
  <input id="proj-search" name="q" size="10" accesskey="f" type="text">
  <input value="Search" type="submit">
  <input name="wiki" value="on" type="hidden">
  <input name="changeset" value="on" type="hidden">
  <input name="ticket" value="on" type="hidden">
 </div>
</form>



<div id="metanav" class="nav"><ul><li class="first"><a href="http://www.cherrypy.org/login">Login</a></li><li><a href="http://www.cherrypy.org/settings">Settings</a></li><li><a href="http://www.cherrypy.org/wiki/TracGuide" accesskey="6">Help/Guide</a></li><li class="last"><a href="http://www.cherrypy.org/about">About Trac</a></li></ul></div>
</div>

<div id="mainnav" class="nav"><ul><li class="active first"><a href="http://www.cherrypy.org/wiki" accesskey="1">Wiki</a></li><li><a href="http://www.cherrypy.org/timeline" accesskey="2">Timeline</a></li><li><a href="http://www.cherrypy.org/roadmap" accesskey="3">Roadmap</a></li><li><a href="http://www.cherrypy.org/browser">Browse Source</a></li><li><a href="http://www.cherrypy.org/report">View Tickets</a></li><li class="last"><a href="http://www.cherrypy.org/search" accesskey="4">Search</a></li></ul></div>
<div id="main">




<div id="ctxtnav" class="nav">
 <h2>Wiki Navigation</h2>
 <ul>
  <li><a href="http://www.cherrypy.org/wiki">Start Page</a></li>
  <li><a href="http://www.cherrypy.org/wiki/TitleIndex">Title Index</a></li>
  <li><a href="http://www.cherrypy.org/wiki/RecentChanges">Recent Changes</a></li>
  
   <li class="last"><a href="http://www.cherrypy.org/wiki/CherryPyTutorial?action=history">Page History</a></li>
  
 </ul>
 <hr>
</div>

<div id="content" class="wiki">

 
  
  
   <div class="wikipage">
    <div id="searchable"><h1 id="CherryPyTutorial"><a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> Tutorial</h1>
<p>
</p><div class="wiki-toc"><ol><li><a href="#CherryPyTutorial">CherryPy Tutorial</a><ol><li><a href="#WhatisCherryPy">What is CherryPy?</a></li><li>
<a href="#WhatCherryPyisNOT">What CherryPy is NOT?</a></li><li>
<a href="#Whatisthistutorialabout">What is this tutorial about?</a><ol><li><a href="#Knowledgerequired">Knowledge required</a></li><li>
<a href="#LearningPython">Learning Python</a></li></ol></li><li><a href="#YourfirstCherryPyapplication">Your first CherryPy application</a><ol><li><a href="#Howdoesitwork">How does it work?</a></li></ol></li><li><a href="#Concepts">Concepts</a><ol><li><ol><li><a href="#Exposingobjects">Exposing objects</a></li></ol></li><li></li></ol></li><li><a href="#Findingthecorrectobject">Finding the correct object</a></li><li>
<a href="#Normalmethods">Normal methods</a></li><li>
<a href="#Theindexmethod">The <tt>index</tt> method</a></li><li>
<a href="#ReceivingdatafromHTMLforms">Receiving data from HTML forms</a></li><li>
<a href="#Partialmatchesandthedefaultmethod">Partial matches and the default method</a></li><li>
<a href="#TheCherryPyconfigurationfile">The CherryPy configuration file</a></li><li>
<a href="#Thecherrypystructure">The cherrypy structure</a></li><li>
<a href="#Tools">Tools</a></li></ol></li><li><a href="#Conclusion">Conclusion</a></li></ol></div>

<p>
This document is for <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> 3.
</p>
<p>
(Old 2.x) translations: <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPyTutorialIta">Italian</a>, <a class="wiki" href="http://www.cherrypy.org/wiki/sp/Tutorial">Spanish</a>, <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPyTutorialFrench">French</a>
</p>
<h2 id="WhatisCherryPy">What is <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>?</h2>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 is a pythonic, object-oriented HTTP framework. It provides the 
foundation over which complex web-based applications can be written, 
with little or no knowledge of the underlying protocols. <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 allows developers to build web applications in much the same way they 
would build any other object-oriented Python program. This usually 
results in smaller source code developed in less time.
</p>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> does its best to stay out of the way between the programmer and the problem. <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 applications are usually very simple. It works out of the box; default 
behavior is sensible enough to allow use without extensive setup or 
customization. The embedded web server allows one to deploy web 
applications anywhere Python is installed. In short, <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> is as pythonic as it gets. 
</p>
<h2 id="WhatCherryPyisNOT">What <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> is NOT?</h2>
<p>
As an HTTP framework, <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 does all that is necessary to allow Python code to be executed when 
some resource (or URL) is requested by the user. However, it is not a 
templating language, such as PHP. <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> can work with several templating packages, including <a class="ext-link" href="http://www.cheetahtemplate.org/"><span class="icon"></span>Cheetah</a>, <a class="ext-link" href="http://cherrytemplate.python-hosting.com/"><span class="icon"></span>CherryTemplate</a>, and <a class="wiki" href="http://www.cherrypy.org/wiki/ChoosingATemplatingLanguage">several others</a>.
 But please note that, while useful to some extent, templating packages 
are not strictly necessary, and that pure Python code can be used to 
generate the Web pages.
</p>
<h2 id="Whatisthistutorialabout">What is this tutorial about?</h2>
<p>
This tutorial cover the basic steps for a newcomer to get to grips with <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> unique approach to web application development. After following this tutorial, the programmer will be able to understand how <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 applications work, and also to implement simple but yet powerful 
applications on her own. Some knowledge of the Python programming 
language is assumed. One does not need to be an expert to work with <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>, but a good understanding of object-oriented basics is strongly recommended. 
</p>
<h3 id="Knowledgerequired">Knowledge required</h3>
<p>
It is assumed that the user has:
</p>
<ul><li>Some knowledge of the Python programming language;
</li><li>Some experience with basic object oriented programming;
</li><li>Some knowledge of HTML, which is necessary to build the Web pages.
</li></ul><h3 id="LearningPython">Learning Python</h3>
<p>
As said above, this is not a guide to the Python language. There are 
plenty of good resources for those learning Python (just to name a few 
among the best:  <a class="ext-link" href="http://www.pasteur.fr/recherche/unites/sis/formation/python/"><span class="icon"></span>Python course in Bioinformatics</a>, <a class="ext-link" href="http://www.byteofpython.info/"><span class="icon"></span>A Byte Of Python</a> and <a class="ext-link" href="http://www.diveintopython.org/"><span class="icon"></span>Dive into Python</a>). The <a class="ext-link" href="http://www.python.org/"><span class="icon"></span>official Python website</a> lists some good resources, including an <a class="ext-link" href="http://docs.python.org/tut/tut.html"><span class="icon"></span>excellent tutorial</a>.
</p>
<h2 id="YourfirstCherryPyapplication">Your first <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> application</h2>
<p>
The standard 'Hello world!' application takes less than 10 lines of code, when written using <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>. 
</p>
<div class="code"><pre><span class="p_word">import</span> <span class="p_identifier">cherrypy</span>

<span class="p_word">class</span> <span class="p_classname">HelloWorld</span><span class="p_operator">:</span>
    <span class="p_word">def</span> <span class="p_defname">index</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
        <span class="p_word">return</span> <span class="p_string">"Hello world!"</span>
    <span class="p_identifier">index</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>

<span class="p_identifier">cherrypy</span><span class="p_operator">.</span><span class="p_identifier">quickstart</span><span class="p_operator">(</span><span class="p_identifier">HelloWorld</span><span class="p_operator">())</span>
</pre></div><p>
We assume that you already have <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPyInstall">installed CherryPy</a>. Copy this file and save it locally as <tt>hello.py</tt>, then start the application at the command prompt:
</p>
<pre class="wiki">python hello.py
</pre>
<p>
Direct your favorite web browser to <a class="ext-link" href="http://localhost:8080/"><span class="icon"></span>http://localhost:8080</a> and you should see <tt>Hello world!</tt> printed there.
</p>
<h3 id="Howdoesitwork">How does it work?</h3>
<p>
Let's take a look at the <tt>hello.py</tt>:
</p>
<ul><li>The <tt>import cherrypy</tt> statement imports the main <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> module. This is all that is required to have <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> working. Feel free to "import cherrypy" in an interactive session and see what's available! <tt>help(cherrypy)</tt> is also quite useful.
</li><li>We declare a class named <tt>HelloWorld</tt>. An instance of this class is the object that will be published by <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>. It contains a single method, named <tt>index</tt>, which will get called when the root URL for the site is requested (for example, <tt>http://localhost/</tt>). This method returns the <strong>contents</strong> of the Web page; in this case, the <tt>'Hello World!'</tt> string.
</li><li>The <tt>index.exposed = True</tt> is a necessary step to tell <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> that the <tt>index()</tt> method will be <strong>exposed</strong>.
 Only exposed methods can be called to answer a request. This feature 
allows the user to select which methods of an object will be accessible 
via the Web; non-exposed methods can't be accessed.
</li><li><tt>cherrypy.quickstart(HelloWorld())</tt> mounts an instance 
of the HelloWorld class, and starts the embedded webserver. It runs 
until explicitly interrupted, either with <tt>Ctrl-C</tt> or via a suitable signal (a simple <tt>kill</tt> on Unix will do it).
</li></ul><p>
When the application is executed, the <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> server is started with the default configuration. It will listen on <tt>localhost</tt> at port <tt>8080</tt>. These defaults can be overridden by using a configuration file (more on this later).
</p>
<p>
Finally, the web server receives the request for the URL <tt>http://localhost:8080</tt>. It searches for the best method to handle the request, starting from the <tt>HelloWorld</tt> instance. In this particular case, the root of the site is automatically mapped to the <tt>index()</tt> method (similar to the <tt>index.html</tt> that is the standard page for conventional Web servers). The HelloWorld class defines an <tt>index()</tt> method and exposes it. <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> calls <tt>HelloWorld().index()</tt>,
 and the result of the call is sent back to the browser as the contents 
of the index page for the website. All work is done automatically; the 
application programmer only needs to provide the desired content as the 
return value of the <tt>index</tt> method.
</p>
<h2 id="Concepts">Concepts</h2>
<p>
Any object that is attached to the root object is traversible via the 
internal URL-to-object mapping routine. However, it does not mean that 
the object itself is directly accessible via the Web. For this to 
happen, the object has to be <strong>exposed</strong>.
</p>
<h4 id="Exposingobjects">Exposing objects</h4>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 maps URL requests to objects and invokes the suitable callable 
automatically. The callables that can be invoked as a result of external
 requests are said to be <strong>exposed</strong>.
</p>
<p>
Objects are <strong>exposed</strong> in <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> by setting the <tt>exposed</tt>
 attribute. Most often, a method on an object is the callable that is to
 be invoked.  In this case, one can directly set the exposed attribute:
</p>
<div class="code"><pre><span class="p_word">class</span> <span class="p_classname">Root</span><span class="p_operator">:</span>
    <span class="p_word">def</span> <span class="p_defname">index</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
        <span class="p_operator">...</span>
    <span class="p_identifier">index</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>
</pre></div><p>
or use a decorator:
</p>
<div class="code"><pre>    @<span class="p_identifier">cherrypy</span><span class="p_operator">.</span><span class="p_identifier">expose</span>
    <span class="p_word">def</span> <span class="p_defname">index</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
        <span class="p_operator">...</span>
</pre></div><p>
When it is a special method, such as <tt> __call__ </tt>, that is to be invoked the exposed attribute must be set on the object itself: 
</p>
<div class="code"><pre><span class="p_word">class</span> <span class="p_classname">Node</span><span class="p_operator">:</span>
    <span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>
    <span class="p_word">def</span> <span class="p_defname">__call__</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
        <span class="p_operator">...</span>
</pre></div><h2 id="Findingthecorrectobject">Finding the correct object</h2>
<p>
For the user, a web application is just like a website with static 
files. The user types (or clicks) a URL, and gets to the desired 
webpage. A conventional webserver uses the URL to retrieve a static file
 from the filesystem. On the other hand, a web application server not 
only serves the content from static files; it can also map the URL it 
receives into some object and call it. The result is then sent back to 
the user's browser, where it is rendered into a viewable page. The 
result is a dynamic web application; for each URL, a unique object can 
be called into action.
</p>
<p>
The key to understand how to write a new web application is to understand how this mapping occurs. <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> uses a fairly straightforward mapping procedure. The root of the site is the <tt>Application.root</tt>
 object. When it receives a URL, it breaks it into its path components, 
and proceeds looking down into the site until it finds an object that is
 the 'best match' for that particular URL. For each path component it 
tries to find an object with the same name, starting from <tt>root</tt>, and going down for each component it finds, until it can't find a match. An example shows it better:
</p>
<div class="code"><pre><span class="p_identifier">root</span> <span class="p_operator">=</span> <span class="p_identifier">HelloWorld</span><span class="p_operator">()</span>
<span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">onepage</span> <span class="p_operator">=</span> <span class="p_identifier">OnePage</span><span class="p_operator">()</span>
<span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">otherpage</span> <span class="p_operator">=</span> <span class="p_identifier">OtherPage</span><span class="p_operator">()</span>
</pre></div><p>
In the example above, the URL <tt>http://localhost/onepage</tt> will point at the first object and the URL <tt>http://localhost/otherpage</tt> will point at the second one. As usual, this search is done automatically. But it goes even further:
</p>
<div class="code"><pre><span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">some</span> <span class="p_operator">=</span> <span class="p_identifier">Page</span><span class="p_operator">()</span>
<span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">some</span><span class="p_operator">.</span><span class="p_identifier">page</span> <span class="p_operator">=</span> <span class="p_identifier">Page</span><span class="p_operator">()</span>
</pre></div><p>
In this example, the URL <tt>http://localhost/some/page</tt> will be mapped to the <tt>root.some.page</tt> object. If this object is exposed (or alternatively, its <tt>index</tt> method is), it will be called for that URL.
</p>
<p>
In our HelloWorld example, adding the <tt>http://.../onepage</tt> to <tt>OnePage()</tt> mapping could be done like this:
</p>
<div class="code"><pre><span class="p_word">class</span> <span class="p_classname">OnePage</span><span class="p_operator">(</span><span class="p_identifier">object</span><span class="p_operator">):</span>
    <span class="p_word">def</span> <span class="p_defname">index</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
        <span class="p_word">return</span> <span class="p_string">"one page!"</span>
    <span class="p_identifier">index</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>
 
<span class="p_word">class</span> <span class="p_classname">HelloWorld</span><span class="p_operator">(</span><span class="p_identifier">object</span><span class="p_operator">):</span>
    <span class="p_identifier">onepage</span> <span class="p_operator">=</span> <span class="p_identifier">OnePage</span><span class="p_operator">()</span>
 
    <span class="p_word">def</span> <span class="p_defname">index</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
        <span class="p_word">return</span> <span class="p_string">"hello world"</span>
    <span class="p_identifier">index</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>
 
<span class="p_identifier">cherrypy</span><span class="p_operator">.</span><span class="p_identifier">quickstart</span><span class="p_operator">(</span><span class="p_identifier">HelloWorld</span><span class="p_operator">())</span>
</pre></div><h2 id="Normalmethods">Normal methods</h2>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> can directly call methods on the mounted objects, if it receives a URL that is directly mapped to them. For example:
</p>
<div class="code"><pre><span class="p_word">def</span> <span class="p_defname">foo</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">):</span>
    <span class="p_word">return</span> <span class="p_character">'Foo!'</span>
<span class="p_identifier">foo</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>

<span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">foo</span> <span class="p_operator">=</span> <span class="p_identifier">foo</span>
</pre></div><p>
In the example, <tt>root.foo</tt> contains a function object, named <tt>foo</tt>. When <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> receives a request for the <tt>/foo</tt> URL, it will automatically call the <tt>foo()</tt> function. Note that it can be a plain function, or a method of any object; any callable will do it.
</p>
<p>
In some advanced cases, there can be a conflict as <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> tries to decide which method it will call to handle a request. The <tt>index()</tt> method (see below) takes precedence. But if <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 finds a full match, and the last object in the match is a callable 
(which means a method, function, or any other Python object that 
supports the <tt>__call__</tt> method); and finally, if the callable itself does not contain a valid <tt>index()</tt>
 method, then the object itself will be called. These rules are 
necessary because classes in Python actually are callables; calling them
 produces a new instance. It may look confusing, but the rules are very 
simple use in practice.
</p>
<h2 id="Theindexmethod">The <tt>index</tt> method</h2>
<p>
The <tt>index</tt> method has a special role in <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>: it handles intermediate URI's that end in a slash; for example, the URI <tt>/orders/items/</tt> might map to <tt>root.orders.items.index</tt>. The <tt>index</tt> method can take additional keyword arguments if the request includes querystring or POST params; however, it <i>cannot</i> take positional arguments.
</p>
<h2 id="ReceivingdatafromHTMLforms">Receiving data from HTML forms</h2>
<p>
Any method that is called by <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> - <tt>index</tt>, or any other suitable method - can receive additional data from HTML forms using <strong>keyword arguments</strong>. For example, the following login form sends the <tt>username</tt> and the <tt>password</tt> as form arguments using the POST method:
</p>
<div class="code"><pre><span class="h_tag">&lt;form</span><span class="h_other"> </span><span class="h_attribute">action</span><span class="h_other">=</span><span class="h_doublestring">"doLogin"</span><span class="h_other"> </span><span class="h_attribute">method</span><span class="h_other">=</span><span class="h_doublestring">"post"</span><span class="h_tag">&gt;</span>
    <span class="h_tag">&lt;p&gt;</span>Username<span class="h_tag">&lt;/p&gt;</span>
    <span class="h_tag">&lt;input</span><span class="h_other"> </span><span class="h_attribute">type</span><span class="h_other">=</span><span class="h_doublestring">"text"</span><span class="h_other"> </span><span class="h_attribute">name</span><span class="h_other">=</span><span class="h_doublestring">"username"</span><span class="h_other"> </span><span class="h_attribute">value</span><span class="h_other">=</span><span class="h_doublestring">""</span><span class="h_other"> 
        </span><span class="h_attribute">size</span><span class="h_other">=</span><span class="h_doublestring">"15"</span><span class="h_other"> </span><span class="h_attribute">maxlength</span><span class="h_other">=</span><span class="h_doublestring">"40"</span><span class="h_tagend">/&gt;</span>
    <span class="h_tag">&lt;p&gt;</span>Password<span class="h_tag">&lt;/p&gt;</span>
    <span class="h_tag">&lt;input</span><span class="h_other"> </span><span class="h_attribute">type</span><span class="h_other">=</span><span class="h_doublestring">"password"</span><span class="h_other"> </span><span class="h_attribute">name</span><span class="h_other">=</span><span class="h_doublestring">"password"</span><span class="h_other"> </span><span class="h_attribute">value</span><span class="h_other">=</span><span class="h_doublestring">""</span><span class="h_other"> 
        </span><span class="h_attribute">size</span><span class="h_other">=</span><span class="h_doublestring">"10"</span><span class="h_other"> </span><span class="h_attribute">maxlength</span><span class="h_other">=</span><span class="h_doublestring">"40"</span><span class="h_tagend">/&gt;</span>
    <span class="h_tag">&lt;p&gt;&lt;input</span><span class="h_other"> </span><span class="h_attribute">type</span><span class="h_other">=</span><span class="h_doublestring">"submit"</span><span class="h_other"> </span><span class="h_attribute">value</span><span class="h_other">=</span><span class="h_doublestring">"Login"</span><span class="h_tagend">/&gt;</span><span class="h_tag">&lt;/p&gt;</span>
    <span class="h_tag">&lt;p&gt;&lt;input</span><span class="h_other"> </span><span class="h_attribute">type</span><span class="h_other">=</span><span class="h_doublestring">"reset"</span><span class="h_other"> </span><span class="h_attribute">value</span><span class="h_other">=</span><span class="h_doublestring">"Clear"</span><span class="h_tagend">/&gt;</span><span class="h_tag">&lt;/p&gt;</span>
<span class="h_tag">&lt;/form&gt;</span>
</pre></div><p>
The following code can be used to handle this URL:
</p>
<div class="code"><pre><span class="p_word">class</span> <span class="p_classname">Root</span><span class="p_operator">:</span>
    <span class="p_word">def</span> <span class="p_defname">doLogin</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">,</span> <span class="p_identifier">username</span><span class="p_operator">=</span><span class="p_word">None</span><span class="p_operator">,</span> <span class="p_identifier">password</span><span class="p_operator">=</span><span class="p_word">None</span><span class="p_operator">):</span>
        <span class="p_commentline"># check the username &amp; password</span>
        <span class="p_operator">...</span>
    <span class="p_identifier">doLogin</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>
</pre></div><p>
Both arguments have to be declared as <strong>keyword arguments</strong>.
 The default value can be used either to provide a suitable default 
value for optional arguments, or to provide means for the application to
 detect if some values were missing from the request.
</p>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 supports both the GET and POST method for HTML forms. Arguments are 
passed the same way, regardless of the original method used by the 
browser to send data to the web server.
</p>
<h2 id="Partialmatchesandthedefaultmethod">Partial matches and the default method</h2>
<p>
Partial matches can happen when a URL contains components that do not 
map to the object tree. This can happen for a number of reasons. For 
example, it may be an error; the user just typed the wrong URL. But it 
also can mean that the URL contains extra arguments.
</p>
<p>
When a partial match happens, <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> calls a <tt>default</tt> method. The <tt>default</tt> method is similar to the <tt>index</tt> method; however, it is only called as a last resort method, and it's recommended for two applications:
</p>
<ul><li>Error handling, to be called when the user types the wrong URL;
</li><li>Support for positional arguments (since <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> 2.2, positional arguments can be used with all methods except index).
</li></ul><p>
For example, assume that you have a blog-like application written in <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> that takes the year, month and day as part of the URL <tt>http://localhost/blog/2005/01/17</tt>. This URL can be handled by the following code:
</p>
<div class="code"><pre><span class="p_word">class</span> <span class="p_classname">Blog</span><span class="p_operator">:</span>
    <span class="p_word">def</span> <span class="p_defname">default</span><span class="p_operator">(</span><span class="p_identifier">self</span><span class="p_operator">,</span> <span class="p_identifier">year</span><span class="p_operator">,</span> <span class="p_identifier">month</span><span class="p_operator">,</span> <span class="p_identifier">day</span><span class="p_operator">):</span>
        <span class="p_operator">...</span>
    <span class="p_identifier">default</span><span class="p_operator">.</span><span class="p_identifier">exposed</span> <span class="p_operator">=</span> <span class="p_identifier">True</span>
<span class="p_operator">...</span>
<span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">blog</span> <span class="p_operator">=</span> <span class="p_identifier">Blog</span><span class="p_operator">()</span>
</pre></div><p>
So the URL above will be mapped as a call to:
</p>
<div class="code"><pre><span class="p_identifier">root</span><span class="p_operator">.</span><span class="p_identifier">blog</span><span class="p_operator">.</span><span class="p_identifier">default</span><span class="p_operator">(</span><span class="p_character">'2005'</span><span class="p_operator">,</span> <span class="p_character">'1'</span><span class="p_operator">,</span> <span class="p_character">'17'</span><span class="p_operator">)</span>
</pre></div><p>
In this case, there is a partial match up to the <tt>blog</tt> component. The rest of the URL can't be found in the mounted object tree. In this case, the <tt>default()</tt>
 method will be called, and the positional parameters will receive the 
remaining path components as arguments. The values are passed as 
strings; in the above mentioned example, the arguments would still need 
to be converted back into numbers, but the idea is correctly presented.
</p>
<h2 id="TheCherryPyconfigurationfile">The <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> configuration file</h2>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> uses a simple <a class="wiki" href="http://www.cherrypy.org/wiki/ConfigAPI">configuration file</a>
 format to customize some aspects of its behavior. There are actually 
two (or more) files, one for the global "site" and one for each 
"application"; but if you only have one app you can put them both in the
 same file. The configuration files can be edited with any conventional 
text editor, and can be used even by non-technical users for some simple
 customization tasks. For example:
</p>
<pre class="wiki">[global]
server.socket_port = 8000
server.thread_pool = 10
tools.sessions.on = True
tools.staticdir.root = "/home/site"

[/static]
tools.staticdir.on = True
tools.staticdir.dir = "static"
</pre>
<p>
Many of the values are self explanatory (for example, <tt>server.socket_port</tt>, which allows changing the default port at which <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> listens); others need a better understanding of <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> internals. 
</p>
<ul><li>The <tt>server.thread_pool</tt> option determines how many threads <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> starts to serve requests.
</li><li>The <tt>tools.sessions.on</tt> statement enables the session 
functionality. Sessions are necessary to implement complex Web 
applications, with user identification, for example.
</li><li>The <tt>[/static]</tt> statement specifies that static content from /home/site/static/* is served as /static/*
</li><li>The <tt>tools.staticdir.root</tt> statement specifies the directory from which the static files are served. See <a class="wiki" href="http://www.cherrypy.org/wiki/StaticContent">StaticContent</a>.
</li></ul><p>
If you're using quickstart, you can pass a single configuration filename (or dict) containing both site and app config to <tt>cherrypy.quickstart(Root(), '/', filename_or_dict)</tt>. Otherwise, you need to register global site config as <tt>cherrypy.config.update(filename_or_dict)</tt> and app config in <tt>cherrypy.tree.mount(Root(), '/', filename_or_dict)</tt>. See the <a class="wiki" href="http://www.cherrypy.org/wiki/ConfigAPI">config docs</a> for more information.
</p>
<h2 id="Thecherrypystructure">The cherrypy structure</h2>
<p>
Most of the features of <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> are available through the <tt>cherrypy</tt> module. It contains several members:
</p>
<ul><li><tt>cherrypy.engine</tt> contains the API to control the <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> engine.
</li><li><tt>cherrypy.server</tt> contains the API to control the HTTP server.
</li><li><a class="wiki" href="http://www.cherrypy.org/wiki/RequestObject">cherrypy.request</a> contains the all the information that comes with the HTTP request, after it is parsed and analyzed by <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>.
</li><li><tt>cherrypy.request.headers</tt> contains a mapping with the header options that were sent as part of the request.
</li><li><tt>cherrypy.session</tt> is a special mapping that is automatically generated and encoded by <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>;
 it can be used to store session-data in a persistent cookie. For it to 
work you have to enable the session functionality by setting 
'tools.session.on' to True in your config. 
</li><li><a class="wiki" href="http://www.cherrypy.org/wiki/ResponseObject">cherrypy.response</a> contains the data that is used to build the HTTP response. 
</li><li><tt>cherrypy.response.headers</tt> contains a mapping with the header options that will be returned by the server, before the contents get sent.
</li><li><tt>cherrypy.response.body</tt> contains the actual contents of the webpage that will be sent as a response.
</li></ul><h2 id="Tools">Tools</h2>
<p>
<a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 core is extremely light and clean. It contains only the necessary 
features to support the HTTP protocol and to call the correct object for
 each request. Additional features can be added to it using <strong>modular tools</strong>.
</p>
<p>
A tool is an object that has a chance to work on a request as it goes through the usual <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> processing chain. Several tools are provided as part of the standard <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> library, available in <tt>cherrypy.tools</tt>. Some examples are:
</p>
<ul><li>tools.decode: automatically handles Unicode data on the request,
 converting the raw strings that are sent by the browser into native 
Python strings.
</li><li>tools.encode: automatically converts the response from the 
native Python Unicode string format to some suitable encoding (Latin-1 
or UTF-8, for example).
</li><li>tools.gzip: Compresses the contents on the fly, using the <tt>gzip</tt> format. Saves bandwidth.
</li><li>tools.xmlrpc: Implements a special XML-RPC adaptation layer over the standard <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>. It takes care of translating the data on request and response (a process called 'marshalling').
</li></ul><p>
Tools provide a lot of flexibility. Different tools can be applied to 
different parts of the site, and the order of tools can be changed. The 
user can write custom tools for special applications, changing the 
behavior of <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> without the need to change its internals.
</p>
<p>
The tools for any part of the site are usually enabled in the configuration file:
</p>
<pre class="wiki">[/]
tools.encode.on = True
tools.gzip.on = True
</pre>
<p>
In this case, the application can use Unicode strings for the contents it generates; translation to <tt>utf8</tt>
 will be done automatically via the encoding tool. Also, all the content
 will be automatically compressed with gzip, saving bandwidth.
</p>
<h1 id="Conclusion">Conclusion</h1>
<p>
This tutorial only covers the basic features of <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>, but it tries to present them in a way that makes it easier for the user to discover how to use them. The <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a> distribution comes with several good tutorials; however, the best way to master <a class="wiki" href="http://www.cherrypy.org/wiki/CherryPy">CherryPy</a>
 is to use it to write your own Web applications. The embedded web 
server makes it easy for anyone not only to try, but also to deploy 
local applications, or even small Internet-enabled web sites. Try it, 
and let us know what you did with it!
</p>
<h2 class="compatibility">Older versions</h2>
<table class="wiki">
<tbody><tr><td>   </td><td> replace this  </td><td> with this 
</td></tr><tr><td>2.2</td><td>cherrypy.quickstart(HelloWorld())</td><td>cherrypy.root = HelloWorld()<br>cherrypy.server.start()
</td></tr><tr><td>   </td><td>tools.sessions </td><td>session_filter
</td></tr><tr><td>   </td><td>tools.staticdir</td><td>static_filter 
</td></tr><tr><td>2.1</td><td>simple_cookie  </td><td>simpleCookie  
</td></tr><tr><td>   </td><td>socket_port    </td><td>socketPort    
</td></tr><tr><td>   </td><td>thread_pool    </td><td>threadPool    
</td></tr><tr><td>   </td><td>session_filter </td><td>sessionFilter 
</td></tr><tr><td>   </td><td>static_filter  </td><td>staticFilter  
</td></tr><tr><td>   </td><td>headers        </td><td>headerMap     
</td></tr><tr><td>2.0</td><td>import cherrypy</td><td>from cherrypy import cpg as cherrypy
</td></tr></tbody></table>
</div>
   </div>
   
  
  <script type="text/javascript">
   addHeadingLinks(document.getElementById("searchable"));
  </script>
 
 
</div>

<script type="text/javascript">searchHighlight()</script>
<div id="altlinks"><h3>Download in other formats:</h3><ul><li class="first last"><a href="http://www.cherrypy.org/wiki/CherryPyTutorial?format=txt">Plain Text</a></li></ul></div>

</div>

<div id="footer">
 <hr>
 <a id="tracpowered" href="http://trac.edgewall.com/"><img src="CherryPyTutorial_files/trac_logo_mini.png" alt="Trac Powered" width="107" height="30"></a>
 <p class="left">
  Powered by <a href="http://www.cherrypy.org/about"><strong>Trac 0.9.4</strong></a><br>
  By <a href="http://www.edgewall.com/">Edgewall Software</a>.
 </p>
 <p class="right">
  Visit the Trac open source project at<br><a href="http://trac.edgewall.com/">http://trac.edgewall.com/</a>
 </p>
</div>


<div>
<div style="float: right;">
    <p style="margin: 0pt;"><a href="http://www.webfaction.com/"><img src="CherryPyTutorial_files/webfaction.gif" alt="Hosted by WebFaction"></a></p>
</div>
<p>Log in as guest/cpguest to create tickets</p>
</div>


 </body></html>