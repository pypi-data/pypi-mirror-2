[migrate_frontpage]
parts =
    set_related_items
done =
    copy_related_items
    show_related_items
    export_frontpage
    copy_frontpage
    import_frontpage
    migrate_btrees
    make_visible
    fix_portal_setup
    show_fieldsets
    get_obj_list

[obj_spec]
obj = 
    front-page
files =
    front-page.zexp

[export_frontpage]
<= obj_spec
recipe = collective.migrator:export_obj
instance = remote

[copy_frontpage]
<= obj_spec
recipe = collective.migrator:copy_file
source = remote
target = local
source_dir = ${remote:export}
target_dir = ${local:import}

[import_frontpage]
<= obj_spec
recipe = collective.migrator:import_obj
replace = 1
instance = local


[make_visible]
recipe = collective.migrator:ext_method
source = scripts/site_config.py
func = make_visible
output = make_visible.out
args = obj publish recursive
publish = True
recursive = 1
instance = local
obj = otherblogs

[fix_portal_setup]
recipe = collective.migrator:ext_method
source = scripts/site_config.py
func = fix_portal_setup
output = fix_portal_setup.out
args = key
key = MockMailHost
instance = local

[show_fieldsets]
recipe = collective.migrator:ext_method
source = scripts/site_config.py
func = show_fieldsets
output = show_fieldsets.out
instance = local

[get_obj_list]
recipe = collective.migrator:ext_method
source = scripts/site_config.py
func = get_obj_list
output = get_obj_list.out
instance = remote

[migrate_btrees]
recipe = collective.migrator:ext_method
source = scripts/site_config.py
func = migrate_btrees
output = btrees.txt
instance = local
args = obj
obj = Members/cfcek2

[show_related_items]
recipe = collective.migrator:ext_method
source = scripts/related_items.py
func = show_related_items
args = ptype
ptype = File
output = related_items.out
instance = remote

[set_related_items]
recipe = collective.migrator:ext_method
source = scripts/related_items.py
func = set_related_items
output = set_related_items.out
instance = local

[copy_related_items]
files = related_items.txt
recipe = collective.migrator:copy_file
source = local
target = local
source_dir = ${buildout:directory}
target_dir = ${local:extensions}


