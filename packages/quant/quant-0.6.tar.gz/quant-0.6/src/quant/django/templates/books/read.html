{% extends "registry/master.html" %}

{% block content %}

  <h2>{{domainClassName}} {{domainObjectPersonalLabel}}</h2>

  {% if view.canUpdateDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/update/" method="post">
      <input type="submit" value="Update &raquo;" />
      <br /><br />
  </form>
    {% endif %}
  <form>
  <fieldset>
  {% block fieldset_details_before %}{% endblock %}
  {% block fieldset_details %}
    <legend>
      details
    </legend>
    <ul id="attributes">
  {% block content_prepend_attributes %}{% endblock %}
  {% for namedValue in domainObjectNamedValues %}
    <li>
    <label for="id_{{ namedValue.name }}">
    {% firstof namedValue.title namedValue.name %}
    </label><br />
    <p><b>
    
    {% if namedValue.isDomainObjectRef %}
      {% if namedValue.isSimpleOption %}
      {% firstof namedValue.label "&nbsp;" %}
      {% else %}
    <a href="{{uriPrefix}}/{{namedValue.registryAttrName}}/{{namedValue.value}}/">{{namedValue.label }}</a>
      {% endif %}
    {% else %}
      {% if namedValue.isAssociateList %}
        {% if namedValue.associatedNamedValues %}
          {% for associatedNamedValue in namedValue.associatedNamedValues %}
    <a href="{{uriPrefix}}/{{associatedNamedValue.associatedObject.getRegistryAttrName}}/{{associatedNamedValue.key}}/">{{associatedNamedValue.label }}</a>
          {% endfor %}
        {% else %}
        &nbsp;
        {% endif %}
      {% else %}
      {% firstof namedValue.label "&nbsp;" %}
      {% endif %}
    {% endif %}
    </b></p>
    </li>
  {% endfor %}
    </ul>
  </fieldset>

  {% endblock %}
  {% block fieldset_details_after %}{% endblock %}
  
  <fieldset>
    <legend>
      contracts
    </legend>
    <table>
      <tr>
        <th>Contract title</th>
        <th>Contract type</th>
      </tr>
          {% for contract in domainObject.getContracts %}
      <tr>
        <td><b><a href="{{uriPrefix}}/{{contract.getRegistryAttrName}}/{{contract.id}}/">{{contract.getLabelValue }}</a></b></td>
        <td><a href="{{uriPrefix}}/contractTypes/{{contract.getContractType.getRegisterKeyValue}}/">{{contract.meta.name}}</a></td>
      </tr>
          {% endfor %}
    </table>
  </fieldset>
  <fieldset>
    <legend>
      results
    </legend>
    <table>
      <tr>
        <th>Result</th>
        <th>Image</th>
        <th>Value</th>
      </tr>
          {% for result in domainObject.results %}
      <tr>
      <td><b><a href="{{uriPrefix}}/{{result.getRegistryAttrName}}/{{result.id}}/">#{{result.id }}</a></b></td>
      <td>{{ result.image.getLabelValue }}</td>
      <td>{{ result.totalValue }}</td>
      </tr>
          {% endfor %}
    </table>
  </fieldset>
  </form>

  {% if view.canUpdateDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/update/" method="post">
    <strong>Do you wish to update this {{domainClassName}}?</strong><br />
    <p>
      <input type="submit" value="Update {{domainClassName}} &raquo;" />
    </p>
  </form>
    {% endif %}
    {% if view.canDeleteDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/delete/" method="post">
    <strong>Do you wish to delete this {{domainClassName}}?</strong><br />
    <p>
      <input type="submit" value="Delete {{domainClassName}} &raquo;" />
    </p>
  </form>
  {% endif %}

{% block read_form_after %}{% endblock %}

{% endblock %}

{% block primarysidebar %}
<div class="box">
  <h2>{{domainObjectPersonalLabel}}</h2>
  <p>
  {% if nextObject %}
  Next: <a href="../{{nextObject.getRegisterKeyValue}}/">{{nextObject.getLabelValue}}</a>
  <br />
  {% else %}
    {% if previousObject %}
  Previous: <a href="../{{previousObject.getRegisterKeyValue}}/">{{previousObject.getLabelValue}}</a>
  <br />
    {% else %}
  This is the only record in the register.
    {% endif %}
  {% endif %}
  </p>
</div>

<div class="box">
    <h2>Do you wish to create new results?</h2>
      <form action="{{uriPrefix}}/results/create/?book={{ domainObject.getRegisterKeyValue }}" method="post">
        <p>
          <input type="submit" value="Create new Result &raquo;" />
        </p>
      </form>
</div>


{% block primarysidebarextn %}{% endblock %}

{% endblock %}

  

