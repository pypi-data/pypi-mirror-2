{% extends "registry/master.html" %}

{% block content %}

  <h2>{{domainClassName}} {{domainObjectPersonalLabel}}</h2>

  {% if view.canUpdateDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/update/" method="post">
      <input type="submit" value="Update &raquo;" />
      <br /><br />
  </form>
    {% endif %}
  <form>

  <fieldset>
  {% block fieldset_details_before %}{% endblock %}
  {% block fieldset_details %}
    <legend>
      details
    </legend>
    <ul id="attributes">
  {% block content_prepend_attributes %}{% endblock %}
  {% for namedValue in domainObjectNamedValues %}
    <li>
    <label for="id_{{ namedValue.name }}">
    {% firstof namedValue.title namedValue.name %}
    </label><br />
    <p><b>
    
    {% if namedValue.isDomainObjectRef %}
      {% if namedValue.isSimpleOption %}
      {% firstof namedValue.label "&nbsp;" %}
      {% else %}
    <a href="{{uriPrefix}}/{{namedValue.registryAttrName}}/{{namedValue.value}}/">{{namedValue.label }}</a>
      {% endif %}
    {% else %}
      {% if namedValue.isAssociateList %}
        {% if namedValue.associatedNamedValues %}
          {% for associatedNamedValue in namedValue.associatedNamedValues %}
    <a href="{{uriPrefix}}/{{associatedNamedValue.associatedObject.getRegistryAttrName}}/{{associatedNamedValue.key}}/">{{associatedNamedValue.label }}</a>
          {% endfor %}
        {% else %}
        &nbsp;
        {% endif %}
      {% else %}
      {% firstof namedValue.label "&nbsp;" %}
      {% endif %}
    {% endif %}
    </b></p>
    </li>
  {% endfor %}
    </ul>
  </fieldset>
  {% endblock %}
  {% block fieldset_details_after %}{% endblock %}
  <fieldset>
    <legend>
      evaluation summary
    </legend>
    <table>
      <tr>
        <th>Total value</th>
      </tr>
      <tr>
        <td><b>{{ domainObject.totalValue }}</b></td>
     </tr>
    </table>
  </fieldset>
  <fieldset>
    <legend>
      greeks by market
    </legend>
    <table>
      <tr>
        <th>Market</th>
        <th>Delta</th>
        <th>Gamma</th>
        <th>Vega</th>
      </tr>
      {% for line in domainObject.getGreeksByMarket %}
      <tr>
        <td>{{ line.market.getLabelValue }}</td>
        <td>{{ line.delta }}</td>
        <td>{{ line.gamma }}</td>
        <td>{{ line.vega }}</td>
      </tr>
      {% endfor %}
    </table>
  </fieldset>
  <fieldset>
    <legend>
      value by contract
    </legend>
    <table>
      <tr>
        <th>Contract title</th>
        <th>Contract type</th>
        <th>Present value</th>
      </tr>
          {% for item in domainObject.getValuesByContract %}
      <tr>
      <td><a href="{{uriPrefix}}/{{item.contract.getRegistryAttrName}}/{{item.contract.id}}/">{{item.contract.getLabelValue }}</a></td>
      <td>{{item.contract.meta.name}}</td>
      <td>{{item.contractValue}}</td>
      </tr>
          {% endfor %}
    </table>
  </fieldset>
  <fieldset>
    <legend>
      lines
    </legend>
    <table>
      <tr>
        <th>Contract
        </th>
        <th>Market
        </th>
        <th>Metric name
        </th>
        <th>Metric value
        </th>
        <th>Pricer
        </th>
      </tr>
      {% for line in domainObject.lines %}
      <tr>
        <td><a href="{{uriPrefix}}/{{line.getContract.getRegistryAttrName}}/{{line.getContract.id}}/">{{line.getContract.getLabelValue}}</a></td>
        </td>
        <td>{{ line.market.getLabelValue }}
        </td>
        <td>{{ line.metricName }}
        </td>
        <td>{{ line.metricValue }}
        </td>
        <td><a href="{{uriPrefix}}/{{line.pricer.getRegistryAttrName}}/{{line.pricer.id}}/">{{line.pricer.getLabelValue}}</a></td>
        </td>
      </tr>
      {% endfor %}
    </table>
  </fieldset>
  </form>

  {% if view.canUpdateDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/update/" method="post">
    <strong>Do you wish to update this {{domainClassName}}?</strong><br />
    <p>
      <input type="submit" value="Update {{domainClassName}} &raquo;" />
    </p>
  </form>
    {% endif %}
    {% if view.canDeleteDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/delete/" method="post">
    <strong>Do you wish to delete this {{domainClassName}}?</strong><br />
    <p>
      <input type="submit" value="Delete {{domainClassName}} &raquo;" />
    </p>
  </form>
  {% endif %}

{% block read_form_after %}{% endblock %}

{% endblock %}

{% block primarysidebar %}
<div class="box">
  <h2>{{domainObjectPersonalLabel}}</h2>
  <p>
  {% if nextObject %}
  Next: <a href="../{{nextObject.getRegisterKeyValue}}/">{{nextObject.getLabelValue}}</a>
  <br />
  {% else %}
    {% if previousObject %}
  Previous: <a href="../{{previousObject.getRegisterKeyValue}}/">{{previousObject.getLabelValue}}</a>
  <br />
    {% else %}
  This is the only record in the register.
    {% endif %}
  {% endif %}
  </p>
</div>

{% block primarysidebarextn %}{% endblock %}

{% endblock %}

  

