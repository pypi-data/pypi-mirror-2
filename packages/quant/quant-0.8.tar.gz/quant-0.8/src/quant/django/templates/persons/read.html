{% extends "persons/master.html"%}

{% block title %}
  {% if isSessionPerson %}
    {{ person.getLabelValue|escape }} - Your page
  {% else %}
    {% if person %}
    {{ person.getLabelValue|escape }} - Profile
    {% else %}
    Profile - No name specified!
    {% endif %}
  {% endif %}
{% endblock %}

{% block content %}

  {% if person %}
    {% if isSessionPerson %}
    <h2>Welcome, {{ person.getFirstName|escape }}</h2>
    <p><strong>Login name:</strong> {{ person.name|escape }}</p>
    <p><strong>Registered name:</strong> {{ person.fullname|escape }}</p>
    <p><strong>Registered email:</strong> {{ person.email|escape }}</p>
    <p>
      This page gives you an overview of the projects you&rsquo;re associated with, and other useful information about your {{ systemServiceName|escape }} account.
    </p>
    {% else %}
    <h2>{{ person.getFirstName|escape }}&rsquo;s profile page</h2>
    <p>
      This is the profile page for {{ person.getLabelValue|escape }}.
    </p>
    {% endif %}

    {% if view.canUpdatePerson %}
    <strong>Do you wish to update this profile?</strong><br />
    <form action="{{uriPrefix}}/persons/{{ person.name }}/update/" method="post">
      <p>
        <input type="submit" value="Update profile" />
      </p>
    </form>
    {% if view.canDeletePerson %}
    <strong>Do you wish to delete this account?</strong><br />
    <form action="{{uriPrefix}}/persons/{{ person.name }}/delete/" method="post">
      <p>
        <input type="submit" value="Delete account" />
      </p>
    </form>
    {% endif %}
    {% endif %}
  {% else %}
    <h2>No name specified</h2>
    <p class="flash-error">
      You'll need to <a href="{{uriPrefix}}/persons/">select a user</a> in order to see a user's profile page.<br />
      <br />
      If you were looking for your profile page, please <a href="{{uriPrefix}}/login/">log in</a>.
    </p>
  {% endif %}  

{% endblock %}

