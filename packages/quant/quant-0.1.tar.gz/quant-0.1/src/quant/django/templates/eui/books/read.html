{% extends "registry/master.html" %}

{% block content %}

  <h2>{{domainClassName}} {{domainObjectPersonalLabel}}</h2>

  {% if view.canUpdateDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/update/" method="post">
      <input type="submit" value="Update &raquo;" />
      <br /><br />
  </form>
    {% endif %}
  <form>
  <fieldset>
  {% block fieldset_details_before %}{% endblock %}
  {% block fieldset_details %}
    <legend>
      details
    </legend>
    <ul id="attributes">
  {% block content_prepend_attributes %}{% endblock %}
  {% for namedValue in domainObjectNamedValues %}
    <li>
    <label for="id_{{ namedValue.name }}">
    {% firstof namedValue.title namedValue.name %}
    </label><br />
    <p><b>
    
    {% if namedValue.isDomainObjectRef %}
      {% if namedValue.isSimpleOption %}
      {% firstof namedValue.label "&nbsp;" %}
      {% else %}
    <a href="{{uriPrefix}}/{{namedValue.registryAttrName}}/{{namedValue.value}}/">{{namedValue.label }}</a>
      {% endif %}
    {% else %}
      {% if namedValue.isAssociateList %}
        {% if namedValue.associatedNamedValues %}
          {% for associatedNamedValue in namedValue.associatedNamedValues %}
    <a href="{{uriPrefix}}/{{associatedNamedValue.associatedObject.getRegistryAttrName}}/{{associatedNamedValue.key}}/">{{associatedNamedValue.label }}</a>
          {% endfor %}
        {% else %}
        &nbsp;
        {% endif %}
      {% else %}
      {% firstof namedValue.label "&nbsp;" %}
      {% endif %}
    {% endif %}
    </b></p>
    </li>
  {% endfor %}
    </ul>
  </fieldset>

  {% endblock %}
  {% block fieldset_details_after %}{% endblock %}
  <fieldset>
    <legend>
      evaluation summary
    </legend>
    <table>
      <tr>
        <th>Total value</th>
        <th>Evaluated at</th>
      </tr>
      <tr>
        <td><b>{{ domainObject.getResults.value }}</b></td>
        <td>{{ domainObject.getResults.evaluationDate}}</td>
     </tr>
    </table>
  </fieldset>
  <fieldset>
    <legend>
      value by contract
    </legend>
    <table>
      <tr>
        <th>Contract title</th>
        <th>Contract type</th>
        <th>Value</th>
      </tr>
          {% for contract in domainObject.getResults.contracts %}
      <tr>
      <td><b><a href="{{uriPrefix}}/{{contract.registryAttrName}}/{{contract.id}}/">{{contract.name }}</a></b></td>
      <td>{{contract.domainClassName}}</td>
      <td>{{contract.value}}</td>
      </tr>
          {% endfor %}
    </table>
  </fieldset>

  <fieldset>
    <legend>
      greeks by future market
    </legend>
    <table>
      <tr>
        <th>Future market</th>
        <th>Delta</th>
        <th>Gamma</th>
        <th>Vega</th>
      </tr>
      {% for item in domainObject.getResults.greeks.items %}
      <tr>
        <td>{{ item.0 }}</td>
        <td>{{ item.1.delta }}</td>
        <td>{{ item.1.gamma }}</td>
        <td>{{ item.1.vega }}</td>
      </tr>
      {% endfor %}
    </table>
  </fieldset>
  <fieldset>
    <legend>
      raw data
    </legend>
    <table>
      <tr>
        <th>Contract</th>
        <th>Future market</th>
        <th>Pricer</th>
        <th>Value</th>
        <th>Error</th>
        <th>Delta</th>
        <th>Gamma</th>
        <th>Vega</th>
      </tr>
      {% for line in domainObject.getResults.lines %}
      <tr>
        <td>{{ line.contract }}</td>
        <td>{{ line.underlying }} {{ line.deliveryPeriod }}</td>
        <td>{{ line.pricer }}</td>
        <td>{{ line.value }}</td>
        <td>{{ line.error }}</td>
        <td>{{ line.delta }}</td>
        <td>{{ line.gamma }}</td>
        <td>{{ line.vega }}</td>
      </tr>
      {% endfor %}
    </table>
  </fieldset>
  </form>

  {% if view.canUpdateDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/update/" method="post">
    <strong>Do you wish to update this {{domainClassName}}?</strong><br />
    <p>
      <input type="submit" value="Update {{domainClassName}} &raquo;" />
    </p>
  </form>
    {% endif %}
    {% if view.canDeleteDomainObject %}
  <form action="{{uriPrefix}}/{{registryPath}}/delete/" method="post">
    <strong>Do you wish to delete this {{domainClassName}}?</strong><br />
    <p>
      <input type="submit" value="Delete {{domainClassName}} &raquo;" />
    </p>
  </form>
  {% endif %}

{% block read_form_after %}{% endblock %}

{% endblock %}

{% block primarysidebar %}
<div class="box">
  <h2>{{domainObjectPersonalLabel}}</h2>
  <p>
  {% if nextObject %}
  Next: <a href="../{{nextObject.getRegisterKeyValue}}/">{{nextObject.getLabelValue}}</a>
  <br />
  {% else %}
    {% if previousObject %}
  Previous: <a href="../{{previousObject.getRegisterKeyValue}}/">{{previousObject.getLabelValue}}</a>
  <br />
    {% else %}
  This is the only record in the register.
    {% endif %}
  {% endif %}
  </p>
</div>

{% block primarysidebarextn %}{% endblock %}

{% endblock %}

  

