

import distutils.sysconfig
from slabcore import *

from os.path import join

LINKFORSHARED = distutils.sysconfig.get_config_var('LINKFORSHARED')


env = Environment( )
env.Tool('python')
env.Tool('slabroot')

srcdir = Dir('.').srcnode( ).abspath
srcincdir = join( srcdir, "../includes" )
#env.Append( CPPPATH=srcincdir, LIBPATH=['.'] )


env.Append( SHLINKFLAGS = Split(LINKFORSHARED), 
            CPPPATH=[ distutils.sysconfig.get_python_inc(), srcincdir],
            CCFLAGS=['-g','-Wall'] )
 
libsignal_lab = env.SharedLibrary( ['signal_lab.c','sl_environ.c','slab_utils.c'])


py_cslab = env.LoadableModule(  'c_signal_lab.c' )

Alias('cslab',py_cslab)
#rsf_alt = nenv.SharedLibrary( 'rsf_alt', ['rsf.c'] )
#nenv.Program( 'ctest.c' )

#rsf_alt = nenv.SharedLibrary( 'rsf_alt', ['rsf.c'] )

#nenv.Program( 'clip.c' , LIBS=['rsf_alt','signal_lab'])


env.InstallPythonModule( "signal_lab.py" )
env.InstallPythonModule( py_cslab )

#env.InstallLibrary( libsignal_lab )
#env.InstallLibrary( rsf_alt )
