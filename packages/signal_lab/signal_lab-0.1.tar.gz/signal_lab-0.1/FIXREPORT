
WED, JUNE 04, 2008
#####################################################################
ITEM Fixed: added Doxygen to the Configure
#####################################################################
Doxygen

[hegilles@wigner:smallrsf] $ scons RSFROOT=install RSFOLD=$RSFROOT core
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
os.chdir('components/core_components/doc')
doxygen Doxyfile
sh: line 1: doxygen: command not found
os.chdir('/Volumes/Users/hegilles/workspace/smallrsf')
scons: *** [components/core_components/doc/html] Error 127
scons: building terminated because of errors.


#####################################################################
ITEM Fixed included all .pyc files in 'Clean' function
#####################################################################
Cleaning: scons RSFROOT=install config && scons RSFROOT=install config -c
is the identity :) SVN tree is full of .pyc that were not removed. Anything 
that can be done about that?

Also, scons RSFROOT=install config -c rerun config before cleaning.

[hegilles@wigner:minirsf] $ scons RSFROOT=install config -c
scons: Reading SConscript files ...
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/install/bin/sfsort']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/install/bin/sfthr']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/install/bin/sfboolcmp']' to target mains,  because it needs the tools ['oldrsf']
scons: done reading SConscript files.
scons: Cleaning targets ...
Removed rsfcore/config.py
Removed components/core_components/tools/coreconfig.py
Removed components/oldrsf/tools/oldrsfconfig.py

There is a SConstruct mechanismn to avoid that, e.g.,

env = Environment() 
if not env.GetOption(’clean’): 
conf = Configure(env, custom_tests = {’CheckMyLibrary’ : CheckMyLibrary}) 
if not conf.CheckMyLibrary(): 
print ’MyLibrary is not installed!’ 
Exit(1) 
env = conf.Finish() 

I am not sure though where to include that.

#####################################################################
ITEM Fixed seperated out configure in SConfig file and put all config
related files in dir 'config-etc'
#####################################################################
Cleaning: persistent .sconsign.dblite creates configuration problems...

[hegilles@wigner:minirsf] $ ls
total 48
drwxr-xr-x   13 hegilles  hegilles   442 Jun  2 18:39 .
drwxr-xr-x    4 hegilles  hegilles   136 May 29 19:23 ..
-rw-r--r--    1 hegilles  hegilles   361 May 29 19:23 .project
-rw-r--r--    1 hegilles  hegilles   343 May 29 19:23 .pydevproject
drwxr-xr-x   10 hegilles  hegilles   340 Jun  2 17:05 .svn
-rw-r--r--    1 hegilles  hegilles  4427 Jun  2 18:38 FIXME
-rw-r--r--    1 hegilles  hegilles  1689 May 29 18:16 README
-rw-r--r--    1 hegilles  hegilles  3500 Jun  2 17:50 SConstruct
drwxr-xr-x    3 hegilles  hegilles   102 May 30 20:40 book
drwxr-xr-x    9 hegilles  hegilles   306 Jun  2 10:30 components
drwxr-xr-x    7 hegilles  hegilles   238 Jun  2 10:30 reproducibility
drwxr-xr-x   14 hegilles  hegilles   476 Jun  2 18:39 rsfcore
drwxr-xr-x    7 hegilles  hegilles   238 Jun  2 10:30 user
[hegilles@wigner:minirsf] $ scons FFTW2=/Tools/fftw-2.1.5/ FFTW3=/Tools/fftw-3.1.2/ config   
scons: Reading SConscript files ...
Checking for C++ library fdct_wrapping... no
Checking for C library fftw... yes
Checking for C library fftw3... yes
Checking for C library rsf... no
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfsort']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfthr']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfboolcmp']' to target mains,  because it needs the tools ['oldrsf']
scons: done reading SConscript files.
scons: Building targets ...
scons: done building targets.
[hegilles@wigner:minirsf] $ scons FFTW2=/Tools/fftw-2.1.5/ FFTW3=/Tools/fftw-3.1.2/ config -c
scons: Reading SConscript files ...
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfsort']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfthr']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfboolcmp']' to target mains,  because it needs the tools ['oldrsf']
scons: done reading SConscript files.
scons: Cleaning targets ...
Removed rsfcore/config.py
Removed components/core_components/tools/coreconfig.py
Removed components/fdct/tools/fdctconfig.py
Removed components/oldrsf/tools/oldrsfconfig.py
Removed .sconf_temp/conftest_0.cpp
Removed .sconf_temp/conftest_1.c
Removed .sconf_temp/conftest_1.o
Removed .sconf_temp/conftest_2.c
Removed .sconf_temp/conftest_2.o
Removed .sconf_temp/conftest_3.c
Removed .sconf_temp/sfconftest_1
Removed .sconf_temp/sfconftest_2
Removed directory .sconf_temp
Removed config.log
Removed components/fftw/tools/fftwconfig.py
Removed components/oldrsf/tools/oldrsfconfig.pyc
scons: done cleaning targets.
[hegilles@wigner:minirsf] $ ls
total 64
drwxr-xr-x   14 hegilles  hegilles   476 Jun  2 18:39 .
drwxr-xr-x    4 hegilles  hegilles   136 May 29 19:23 ..
-rw-r--r--    1 hegilles  hegilles   361 May 29 19:23 .project
-rw-r--r--    1 hegilles  hegilles   343 May 29 19:23 .pydevproject
-rw-r--r--    1 hegilles  hegilles  7888 Jun  2 18:39 .sconsign.dblite
drwxr-xr-x   10 hegilles  hegilles   340 Jun  2 17:05 .svn
-rw-r--r--    1 hegilles  hegilles  4427 Jun  2 18:38 FIXME
-rw-r--r--    1 hegilles  hegilles  1689 May 29 18:16 README
-rw-r--r--    1 hegilles  hegilles  3500 Jun  2 17:50 SConstruct
drwxr-xr-x    3 hegilles  hegilles   102 May 30 20:40 book
drwxr-xr-x    9 hegilles  hegilles   306 Jun  2 10:30 components
drwxr-xr-x    7 hegilles  hegilles   238 Jun  2 10:30 reproducibility
drwxr-xr-x   14 hegilles  hegilles   476 Jun  2 18:39 rsfcore
drwxr-xr-x    7 hegilles  hegilles   238 Jun  2 10:30 user
[hegilles@wigner:minirsf] $ scons FFTW2=/Tools/fftw-2.1.5/ FFTW3=/Tools/fftw-3.1.2/ config   
scons: Reading SConscript files ...
Checking for C++ library fdct_wrapping... no
Checking for C library fftw... no
Checking for C library fftw3... no
Checking for C library rsf... no
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfsort']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfthr']' to target mains,  because it needs the tools ['oldrsf']
WARNING: not adding main programs '['/Volumes/Users/hegilles/workspace/minirsf/bin/sfboolcmp']' to target mains,  because it needs the tools ['oldrsf']
scons: done reading SConscript files.
scons: Building targets ...
scons: `config' is up to date.
scons: done building targets.

#####################################################################
ITEM  Done surounded SConscript calls with try/except block
and seperated configure into seperate config directory.   
#####################################################################
Crash report: when a user refers to a non-existing tool, error message 
quite violent... Also, scons -h and scons ARGUMENTS config do not work 
anymore. This seems in contradiction with: "the user can do pretty 
anything in his/her folder, it is not gonna affect the core". Please 
advise.


#####################################################################
ITEM Done
#####################################################################
[hegilles@wigner:minirsf] $ scons -h
scons: Reading SConscript files ...
Exception: need to specify RSFROOT:
  File "/Volumes/Users/hegilles/workspace/minirsf/SConstruct", line 56:
    raise Exception( "need to specify RSFROOT")

#####################################################################
ITEM Done
#####################################################################
Cleaning: scons -c does not remove xxxconfig.py, only overwrite at next
scons core cmd.

[hegilles@wigner:smallrsf] $ scons RSFROOT=install RSFOLD=$RSFROOT core -c
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Cleaning targets ...
scons: done cleaning targets.
[hegilles@wigner:smallrsf] $ ls components/oldrsf/tools/
total 32
drwxr-xr-x    7 hegilles  hegilles  238 May 29 15:41 .
drwxr-xr-x    5 hegilles  hegilles  170 May 29 14:04 ..
drwxr-xr-x   10 hegilles  hegilles  340 May 29 14:33 .svn
-rw-r--r--    1 hegilles  hegilles  425 May 29 14:35 oldrsf.py
-rw-r--r--    1 hegilles  hegilles  919 May 29 14:58 oldrsf.pyc
-rw-r--r--    1 hegilles  hegilles   29 May 29 15:41 oldrsfconfig.py
-rw-r--r--    1 hegilles  hegilles  208 May 29 15:41 oldrsfconfig.pyc

#####################################################################
ITEM Done
#####################################################################
Installation: cannot compile from anywhere a user folder

[hegilles@wigner:smallrsf] $ export PYTHONPATH=~/workspace/smallrsf/install/lib/:$PYTHONPATH
[hegilles@wigner:smallrsf] $ cd user/slim/
[hegilles@wigner:slim] $ scons mains
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
scons: *** Explicit dependency `inc' not found, needed by target `sort.o'.  Stop.
scons: building terminated because of errors.

#####################################################################
ITEM Done
#####################################################################
Installation: env.sf_install_main() does not install multiple items

