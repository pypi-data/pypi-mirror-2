<html>
<head>
<title>pylons.error</title>
</head>
<body>
pylons.error
<style>
.coverage pre {float: left; margin: 0px 1em; border: none;
               padding: 0px; }
.num pre { margin: 0px }
.nocov, .nocov pre {background-color: #faa}
.cov, .cov pre {background-color: #cfc}
div.coverage div { clear: both; height: 1.1em}
</style>
<div class="stats">
Covered: 16 lines<br/>
Missed: 16 lines<br/>
Skipped 11 lines<br/>
Percent: 50 %<br/>

</div>
<div class="coverage">
<div class="cov"><span class="num"><pre> 1</pre></span><pre>&quot;&quot;&quot;Custom EvalException support</pre></div>
<div class="skip"><span class="num"><pre> 2</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 3</pre></span><pre>Provides template engine HTML error formatters for the Template tab of</pre></div>
<div class="cov"><span class="num"><pre> 4</pre></span><pre>EvalException.</pre></div>
<div class="skip"><span class="num"><pre> 5</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 6</pre></span><pre>&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 7</pre></span><pre>import sys</pre></div>
<div class="skip"><span class="num"><pre> 8</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 9</pre></span><pre>try:</pre></div>
<div class="cov"><span class="num"><pre>10</pre></span><pre>    import mako.exceptions</pre></div>
<div class="nocov"><span class="num"><pre>11</pre></span><pre>except ImportError:</pre></div>
<div class="nocov"><span class="num"><pre>12</pre></span><pre>    mako = None</pre></div>
<div class="skip"><span class="num"><pre>13</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>14</pre></span><pre>__all__ = ['handle_mako_error']</pre></div>
<div class="skip"><span class="num"><pre>15</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>16</pre></span><pre>def handle_mako_error(context, exc):</pre></div>
<div class="nocov"><span class="num"><pre>17</pre></span><pre>    try:</pre></div>
<div class="nocov"><span class="num"><pre>18</pre></span><pre>        exc.is_mako_exception = True</pre></div>
<div class="nocov"><span class="num"><pre>19</pre></span><pre>    except:</pre></div>
<div class="nocov"><span class="num"><pre>20</pre></span><pre>        pass</pre></div>
<div class="nocov"><span class="num"><pre>21</pre></span><pre>    raise exc, None, sys.exc_info()[2]</pre></div>
<div class="skip"><span class="num"><pre>22</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>23</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>24</pre></span><pre>def myghty_html_data(exc_value):</pre></div>
<div class="cov"><span class="num"><pre>25</pre></span><pre>    &quot;&quot;&quot;Format a Myghty exception as HTML&quot;&quot;&quot;</pre></div>
<div class="nocov"><span class="num"><pre>26</pre></span><pre>    if hasattr(exc_value, 'htmlformat'):</pre></div>
<div class="nocov"><span class="num"><pre>27</pre></span><pre>        return exc_value.htmlformat()[333:-14]</pre></div>
<div class="nocov"><span class="num"><pre>28</pre></span><pre>    if hasattr(exc_value, 'mtrace'):</pre></div>
<div class="nocov"><span class="num"><pre>29</pre></span><pre>        return exc_value.mtrace.htmlformat()[333:-14]</pre></div>
<div class="skip"><span class="num"><pre>30</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>31</pre></span><pre>template_error_formatters = [myghty_html_data]</pre></div>
<div class="skip"><span class="num"><pre>32</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>33</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>34</pre></span><pre>if mako:</pre></div>
<div class="cov"><span class="num"><pre>35</pre></span><pre>    def mako_html_data(exc_value):</pre></div>
<div class="cov"><span class="num"><pre>36</pre></span><pre>        &quot;&quot;&quot;Format a Mako exception as HTML&quot;&quot;&quot;</pre></div>
<div class="nocov"><span class="num"><pre>37</pre></span><pre>        if getattr(exc_value, 'is_mako_exception', False) or \</pre></div>
<div class="nocov"><span class="num"><pre>38</pre></span><pre>           isinstance(exc_value, (mako.exceptions.CompileException,</pre></div>
<div class="nocov"><span class="num"><pre>39</pre></span><pre>                                  mako.exceptions.SyntaxException)):</pre></div>
<div class="nocov"><span class="num"><pre>40</pre></span><pre>            return mako.exceptions.html_error_template().render(full=False,</pre></div>
<div class="nocov"><span class="num"><pre>41</pre></span><pre>                                                                css=False)</pre></div>
<div class="cov"><span class="num"><pre>42</pre></span><pre>    template_error_formatters.insert(0, mako_html_data)</pre></div>
<div class="skip"><span class="num"><pre>43</pre></span><pre></pre></div>
</div>
</body>
</html>
