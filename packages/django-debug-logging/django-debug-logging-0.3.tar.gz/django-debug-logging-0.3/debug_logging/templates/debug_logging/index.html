{% extends "debug_logging/base.html" %}

{% block title %}Home{% endblock %}

{% block sidebar %}
  <h3>Test Runs</h3>
  <ul>
    {% for run in all_test_runs %}
      <li><a href="{{ run.get_absolute_url }}">{{ run }}</a></li>
    {% empty %}
      <li>(none currently available)</li>
    {% endfor %}
  </ul>
{% endblock %}

{% block body %}
  <h1>Django Debug Logging</h1>
  <p>Select a test run below to review the results.</p>
  <h2>Test Runs</h2>
  <table id="test-run-summaries">
    <thead>
      <tr>
        <th>Name/Date</th><th>Avg. Time</th><th>Avg. Sql Time</th><th>Avg. Queries</th><th>Total Queries</th>
      </tr>
    </thead>
    <tbody>
      {% for run in all_test_runs %}
      <tr>
        {{ run.set_aggregates|default:"" }}
        <td><a href="{{ run.get_absolute_url }}">{{ run }}</a></td>
        <td>{{ run.avg_time|floatformat:"-2" }}</td>
        <td>{{ run.avg_sql_time|floatformat:"-2" }}</td>
        <td>{{ run.avg_sql_queries|floatformat:"-2" }}</td>
        <td>{{ run.total_sql_queries }}</td>
      </tr>
      {% empty %}
        <td colspan="5">There are no test runs available to review.</td>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}

{% block extra_js %}
  <script src="{{ STATIC_URL }}debug_logging/js/test_run.js" type="text/javascript"></script>
{% endblock %}
