<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>release-1.3.1</title>
    <meta content="text/html;charset=ISO-8859-1" name="Content-Type"/>
    <link href="../style.css" media="screen" rel="stylesheet" type="text/css"/></head>
  <body>
    <div id="navspace">
      <div><a href="http://pylib.org"><img alt="py lib" height="57" id="pyimg" src="http://codespeak.net/img/pylib.png" width="77"/></a></div>
      <div id="menubar">
        <div>
          <div><a class="menu" href="release-1.3.2.html">1.3.2 ANN</a></div></div>
        <div>
          <div><a class="menu" href="../install.html">INSTALL</a></div></div>
        <div>
          <div><a class="menu" href="../contact.html">CONTACT</a></div></div>
        <div>
          <div><a class="menu" href="../changelog.html">CHANGELOG</a></div></div>
        <div>
          <div><a class="menu" href="../faq.html">FAQ</a></div></div>
        <div>
          <div>
            <h3>py.test:</h3>
            <div><a class="menu" href="../test/index.html">Index</a></div>
            <div><a class="menu" href="../test/quickstart.html">Quickstart</a></div>
            <div><a class="menu" href="../test/features.html">Features</a></div>
            <div><a class="menu" href="../test/funcargs.html">Funcargs</a></div>
            <div><a class="menu" href="../test/plugin/index.html">Plugins</a></div>
            <div><a class="menu" href="../test/customize.html">Customize</a></div>
            <div><a class="menu" href="../test/talks.html">Tutorials</a></div><a class="menu" href="http://hudson.testrun.org">hudson-tests</a></div></div>
        <div>
          <div>
            <h3>supporting APIs:</h3>
            <div><a class="menu" href="../index.html">Index</a></div>
            <div><a class="menu" href="../path.html">py.path</a></div>
            <div><a class="menu" href="../code.html">py.code</a></div></div></div></div></div>
    <div id="contentspace">


<div class="section" id="py-test-pylib-1-3-1-new-py-test-xfail-maxfail-better-reporting">
<h1>py.test/pylib 1.3.1: new py.test.xfail, --maxfail, better reporting</h1>
<p>The pylib/py.test 1.3.1 release brings:</p>
<ul class="simple">
<li>the new imperative <tt class="docutils literal">py.test.xfail()</tt> helper in order to have a test or
setup function result in an &quot;expected failure&quot;</li>
<li>a new option <tt class="docutils literal"><span class="pre">--maxfail=NUM</span></tt> to stop the test run after some failures</li>
<li>markers/decorators are now applicable to test classes (&gt;=Python2.6)</li>
<li>improved reporting, shorter tracebacks in several cases</li>
<li>some simplified internals, more compatibility with Jython and PyPy</li>
<li>bug fixes and various refinements</li>
</ul>
<p>See the below CHANGELOG entry below for more details and
<a class="reference external" href="http://pylib.org/install.html">http://pylib.org/install.html</a> for installation instructions.</p>
<p>If you used older versions of py.test you should be able to upgrade
to 1.3.1 without changes to your test source code.</p>
<p>py.test is an automated testing tool working with Python2,
Python3, Jython and PyPy versions on all major operating systems.  It
offers a no-boilerplate testing approach and has inspired other testing
tools and enhancements in the standard Python library for more than five
years.  It has a simple and extensive plugin architecture, configurable
reporting and provides unique ways to make it fit to your testing
process and needs.</p>
<p>See <a class="reference external" href="http://pytest.org">http://pytest.org</a> for more info.</p>
<p>cheers and have fun,</p>
<p>holger krekel</p>
</div>
<div class="section" id="changes-between-1-3-0-and-1-3-1">
<h1>Changes between 1.3.0 and 1.3.1</h1>
<div class="section" id="new-features">
<h2>New features</h2>
<ul>
<li><p class="first">issue91: introduce new py.test.xfail(reason) helper
to imperatively mark a test as expected to fail. Can
be used from within setup and test functions. This is
useful especially for parametrized tests when certain
configurations are expected-to-fail.  In this case the
declarative approach with the &#64;py.test.mark.xfail cannot
be used as it would mark all configurations as xfail.</p>
</li>
<li><p class="first">issue102: introduce new --maxfail=NUM option to stop
test runs after NUM failures.  This is a generalization
of the '-x' or '--exitfirst' option which is now equivalent
to '--maxfail=1'.  Both '-x' and '--maxfail' will
now also print a line near the end indicating the Interruption.</p>
</li>
<li><p class="first">issue89: allow py.test.mark decorators to be used on classes
(class decorators were introduced with python2.6) and
also allow to have multiple markers applied at class/module level
by specifying a list.</p>
</li>
<li><p class="first">improve and refine letter reporting in the progress bar:
.  pass
f  failed test
s  skipped tests (reminder: use for dependency/platform mismatch only)
x  xfailed test (test that was expected to fail)
X  xpassed test (test that was expected to fail but passed)</p>
<p>You can use any combination of 'fsxX' with the '-r' extended
reporting option. The xfail/xpass results will show up as
skipped tests in the junitxml output - which also fixes
issue99.</p>
</li>
<li><p class="first">make py.test.cmdline.main() return the exitstatus instead of raising
SystemExit and also allow it to be called multiple times.  This of
course requires that your application and tests are properly teared
down and don't have global state.</p>
</li>
</ul>
</div>
<div class="section" id="fixes-maintenance">
<h2>Fixes / Maintenance</h2>
<ul class="simple">
<li>improved traceback presentation:
- improved and unified reporting for &quot;--tb=short&quot; option
- Errors during test module imports are much shorter, (using --tb=short style)
- raises shows shorter more relevant tracebacks
- --fulltrace now more systematically makes traces longer / inhibits cutting</li>
<li>improve support for raises and other dynamically compiled code by
manipulating python's linecache.cache instead of the previous
rather hacky way of creating custom code objects.  This makes
it seemlessly work on Jython and PyPy where it previously didn't.</li>
<li>fix issue96: make capturing more resilient against Control-C
interruptions (involved somewhat substantial refactoring
to the underlying capturing functionality to avoid race
conditions).</li>
<li>fix chaining of conditional skipif/xfail decorators - so it works now
as expected to use multiple &#64;py.test.mark.skipif(condition) decorators,
including specific reporting which of the conditions lead to skipping.</li>
<li>fix issue95: late-import zlib so that it's not required
for general py.test startup.</li>
<li>fix issue94: make reporting more robust against bogus source code
(and internally be more careful when presenting unexpected byte sequences)</li>
</ul>
</div>
</div>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7597274-3");
pageTracker._trackPageview();
} catch(err) {}</script>
</body></html>