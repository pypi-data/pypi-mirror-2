<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>faq</title>
    <meta content="text/html;charset=ISO-8859-1" name="Content-Type"/>
    <link href="style.css" media="screen" rel="stylesheet" type="text/css"/></head>
  <body>
    <div id="navspace">
      <div><a href="http://pylib.org"><img alt="py lib" height="57" id="pyimg" src="http://codespeak.net/img/pylib.png" width="77"/></a></div>
      <div id="menubar">
        <div>
          <div><a class="menu" href="announce/release-1.3.0.html">1.3.0 ANN</a></div></div>
        <div>
          <div><a class="menu" href="install.html">INSTALL</a></div></div>
        <div>
          <div><a class="menu" href="contact.html">CONTACT</a></div></div>
        <div>
          <div><a class="menu" href="changelog.html">CHANGELOG</a></div></div>
        <div>
          <div><a class="menu" href="faq.html">FAQ</a></div></div>
        <div>
          <div>
            <h3>py.test:</h3>
            <div><a class="menu" href="test/index.html">Index</a></div>
            <div><a class="menu" href="test/quickstart.html">Quickstart</a></div>
            <div><a class="menu" href="test/features.html">Features</a></div>
            <div><a class="menu" href="test/funcargs.html">Funcargs</a></div>
            <div><a class="menu" href="test/plugin/index.html">Plugins</a></div>
            <div><a class="menu" href="test/customize.html">Customize</a></div>
            <div><a class="menu" href="test/talks.html">Tutorials</a></div><a class="menu" href="http://hudson.testrun.org">hudson-tests</a></div></div>
        <div>
          <div>
            <h3>supporting APIs:</h3>
            <div><a class="menu" href="index.html">Index</a></div>
            <div><a class="menu" href="path.html">py.path</a></div>
            <div><a class="menu" href="code.html">py.code</a></div></div></div></div></div>
    <div id="contentspace">
<div class="document" id="frequently-asked-questions">
<h1 class="title">Frequently Asked Questions</h1>

<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#on-naming-nosetests-licensing-and-magic" id="id1">On naming, nosetests, licensing and magic</a><ul>
<li><a class="reference internal" href="#why-the-py-naming-why-not-pytest" id="id2">Why the <tt class="docutils literal">py</tt> naming?  Why not <tt class="docutils literal">pytest</tt>?</a></li>
<li><a class="reference internal" href="#why-the-py-test-naming" id="id3">Why the <tt class="docutils literal">py.test</tt> naming?</a></li>
<li><a class="reference internal" href="#what-s-py-test-s-relation-to-nosetests" id="id4">What's py.test's relation to <tt class="docutils literal">nosetests</tt>?</a></li>
<li><a class="reference internal" href="#what-s-this-magic-with-py-test" id="id5">What's this &quot;magic&quot; with py.test?</a></li>
<li><a class="reference internal" href="#where-does-my-py-test-come-import-from" id="id6">Where does my <tt class="docutils literal">py.test</tt> come/import from?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#function-arguments-parametrized-tests-and-setup" id="id7">function arguments, parametrized tests and setup</a><ul>
<li><a class="reference internal" href="#is-using-funcarg-versus-xunit-based-setup-a-style-question" id="id8">Is using funcarg- versus xUnit-based setup a style question?</a></li>
<li><a class="reference internal" href="#why-the-pytest-funcarg-name-for-funcarg-factories" id="id9">Why the <tt class="docutils literal">pytest_funcarg__*</tt> name for funcarg factories?</a></li>
<li><a class="reference internal" href="#can-i-yield-multiple-values-from-a-factory-function" id="id10">Can I yield multiple values from a factory function?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#py-test-interaction-with-other-packages" id="id11">py.test interaction with other packages</a><ul>
<li><a class="reference internal" href="#issues-with-py-test-multiprocess-and-setuptools" id="id12">Issues with py.test, multiprocess and setuptools?</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="on-naming-nosetests-licensing-and-magic">
<h1><a class="toc-backref" href="#id1">On naming, nosetests, licensing and magic</a></h1>
<div class="section" id="why-the-py-naming-why-not-pytest">
<h2><a class="toc-backref" href="#id2">Why the <tt class="docutils literal">py</tt> naming?  Why not <tt class="docutils literal">pytest</tt>?</a></h2>
<p>This mostly has historic reasons - the aim is
to get away from the somewhat questionable 'py' name
at some point.  These days (2010) the 'py' library
almost completely comprises APIs that are used
by the <tt class="docutils literal">py.test</tt> tool.  There also are some
other uses, e.g. of the <tt class="docutils literal">py.path.local()</tt> and
other path implementations.  So it requires some
work to factor them out and do the shift.</p>
</div>
<div class="section" id="why-the-py-test-naming">
<h2><a class="toc-backref" href="#id3">Why the <tt class="docutils literal">py.test</tt> naming?</a></h2>
<p>because of TAB-completion under Bash/Shells.  If you hit
<tt class="docutils literal"><span class="pre">py.&lt;TAB&gt;</span></tt> you'll get a list of available development
tools that all share the <tt class="docutils literal">py.</tt> prefix.  Another motivation
was to unify the package (&quot;py.test&quot;) and tool filename.</p>
</div>
<div class="section" id="what-s-py-test-s-relation-to-nosetests">
<h2><a class="toc-backref" href="#id4">What's py.test's relation to <tt class="docutils literal">nosetests</tt>?</a></h2>
<p>py.test and <a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/0.11.1/">nose</a> share basic philosophy when it comes
to running Python tests.  In fact,
with py.test-1.1.0 it is ever easier to run many test suites
that currently work with <tt class="docutils literal">nosetests</tt>.  <a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/0.11.1/">nose</a> was created
as a clone of <tt class="docutils literal">py.test</tt> when py.test was in the <tt class="docutils literal">0.8</tt> release
cycle so some of the newer <a class="reference external" href="test/features.html">features</a> introduced with py.test-1.0
and py.test-1.1 have no counterpart in <a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/0.11.1/">nose</a>.</p>
</div>
<div class="section" id="what-s-this-magic-with-py-test">
<h2><a class="toc-backref" href="#id5">What's this &quot;magic&quot; with py.test?</a></h2>
<p>issues where people have used the term &quot;magic&quot; in the past:</p>
<ul class="simple">
<li><a class="reference external" href="http://bitbucket.org/hpk42/py-trunk/src/trunk/py/__init__.py">py/__init__.py</a> uses the <a class="reference external" href="http://pypi.python.org/pypi/apipkg">apipkg</a> mechanism for lazy-importing
and full control on what API you get when importing &quot;import py&quot;.</li>
<li>when an <tt class="docutils literal">assert</tt> statement fails, py.test re-interprets the expression
to show intermediate values if a test fails.  If your expression
has side effects the intermediate values may not be the same, obfuscating
the initial error (this is also explained at the command line if it happens).
<tt class="docutils literal">py.test <span class="pre">--no-assert</span></tt> turns off assert re-intepretation.
Sidenote: it is good practise to avoid asserts with side effects.</li>
</ul>
</div>
<div class="section" id="where-does-my-py-test-come-import-from">
<h2><a class="toc-backref" href="#id6">Where does my <tt class="docutils literal">py.test</tt> come/import from?</a></h2>
<p>You can issue:</p>
<pre class="literal-block">
py.test --version
</pre>
<p>which tells you both version and import location of the tool.</p>
</div>
</div>
<div class="section" id="function-arguments-parametrized-tests-and-setup">
<h1><a class="toc-backref" href="#id7">function arguments, parametrized tests and setup</a></h1>
<div class="section" id="is-using-funcarg-versus-xunit-based-setup-a-style-question">
<h2><a class="toc-backref" href="#id8">Is using funcarg- versus xUnit-based setup a style question?</a></h2>
<p>It depends. For simple applications or for people experienced
with <a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/0.11.1/">nose</a> or unittest-style test setup using <a class="reference external" href="test/xunit_setup.html">xUnit style setup</a>
make some sense.  For larger test suites, parametrized testing
or setup of complex test resources using <a class="reference external" href="test/funcargs.html">funcargs</a> is recommended.
Moreover, funcargs are ideal for writing advanced test support
code (like e.g. the <a class="reference external" href="test/plugin/monkeypatch.html">monkeypatch</a>, the <a class="reference external" href="test/plugin/tmpdir.html">tmpdir</a> or <a class="reference external" href="test/plugin/capture.html">capture</a> funcargs)
because the support code can register setup/teardown functions
in a managed class/module/function scope.</p>
</div>
<div class="section" id="why-the-pytest-funcarg-name-for-funcarg-factories">
<span id="why-pytest-pyfuncarg-methods"></span><h2><a class="toc-backref" href="#id9">Why the <tt class="docutils literal">pytest_funcarg__*</tt> name for funcarg factories?</a></h2>
<p>When experimenting with funcargs an explicit registration mechanism
was considered.  But lacking a good use case for this indirection and
flexibility we decided to go for <a class="reference external" href="http://en.wikipedia.org/wiki/Convention_over_Configuration">Convention over Configuration</a> and
allow to directly specify the factory.  Besides removing the need
for an indirection it allows to &quot;grep&quot; for <tt class="docutils literal">pytest_funcarg__MYARG</tt>
and will safely find all factory functions for the <tt class="docutils literal">MYARG</tt> function
argument.  It helps to alleviate the de-coupling of function
argument usage and creation.</p>
</div>
<div class="section" id="can-i-yield-multiple-values-from-a-factory-function">
<h2><a class="toc-backref" href="#id10">Can I yield multiple values from a factory function?</a></h2>
<p>There are two conceptual reasons why yielding from a factory function
is not possible:</p>
<ul class="simple">
<li>Calling factories for obtaining test function arguments
is part of setting up and running a test.  At that
point it is not possible to add new test calls to
the test collection anymore.</li>
<li>If multiple factories yielded values there would
be no natural place to determine the combination
policy - in real-world examples some combinations
often should not run.</li>
</ul>
<p>Use the <a class="reference external" href="test/funcargs.html#parametrizing-tests">pytest_generate_tests</a> hook to solve both issues
and implement the <a class="reference external" href="http://tetamap.wordpress.com/2009/05/13/parametrizing-python-tests-generalized/">parametrization scheme of your choice</a>.</p>
</div>
</div>
<div class="section" id="py-test-interaction-with-other-packages">
<h1><a class="toc-backref" href="#id11">py.test interaction with other packages</a></h1>
<div class="section" id="issues-with-py-test-multiprocess-and-setuptools">
<h2><a class="toc-backref" href="#id12">Issues with py.test, multiprocess and setuptools?</a></h2>
<p>On windows the multiprocess package will instantiate sub processes
by pickling and thus implicitely re-import a lot of local modules.
Unfortuantely, setuptools-0.6.11 does not <tt class="docutils literal">if <span class="pre">__name__=='__main__'</span></tt>
protect its generated command line script.  This leads to infinite
recursion when running a test that instantiates Processes.
There are these workarounds:</p>
<ul class="simple">
<li><a class="reference external" href="http://pypi.python.org/pypi/distribute#installation-instructions">install Distribute</a> as a drop-in replacement for setuptools
and install py.test</li>
<li><a class="reference external" href="install.html#directly-use-a-checkout">directly use a checkout</a> which avoids all setuptools/Distribute
installation</li>
</ul>
<p>If those options are not available to you, you may also manually
fix the script that is created by setuptools by inserting an
<tt class="docutils literal">if __name__ == '__main__'</tt>.  Or you can create a &quot;pytest.py&quot;
script with this content and invoke that with the python version:</p>
<pre class="literal-block">
import py
if __name__ == '__main__':
    py.cmdline.pytest()
</pre>
</div>
</div>
</div>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7597274-3");
pageTracker._trackPageview();
} catch(err) {}</script>
</body></html>