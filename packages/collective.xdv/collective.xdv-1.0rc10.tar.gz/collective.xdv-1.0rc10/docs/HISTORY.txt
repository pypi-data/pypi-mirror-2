Changelog
=========

1.0rc10 - 2010-08-05
--------------------

* Use plone.subrequest.
  [elro]

* Use space as a separator for alternate themes. '|' is common in regular
  expressions.
  [elro]

* Support XDV 0.4 <theme> directive so theme is not required on settings.
  [elro]

* Fix resolution of network (http/https) urls for external includes.
  [elro]

1.0rc9 - 2010-08-05
-------------------

* Use an IBeforeTraverseEvent on the Plone site root instead of an 
  IPubAfterTraversal event to hook in the X-XDV request header. This makes
  the header work on 404 error pages.
  [optilude]

* Add collective.directoryresourcepatch to the Zope2.10 extras. This allows
  for subdirectories to be traversed by the ResourceRegistries while running
  Plone 3/Zope 2.10.
  [dunlapm]

* Require lxml>=2.2.4. The Zope2 KGS lists lxml=2.2, a version which errors on
  invalid html.
  [elro]

* Fix extra.xsl support.
  [elro]

1.0rc8 - 2010-05-24
-------------------

* Support for styling sites using virtual hosting with a subpath.
  https://bugs.launchpad.net/xdv/+bug/517244
  [elro]

* Exclusions for TinyMCE. https://bugs.launchpad.net/xdv/+bug/527807
  [elro]

1.0rc7 - 2010-05-23
-------------------

* UPGRADE NOTE: Reinstall product in the Add-ons control panel.

* Switch on XInclude processing always.
  [elro]

* Fix Windows install. For running under Plone 4 on Windows, you must specify::

    [versions]
    lxml = 2.2.4

 until a newer lxml Windows binary egg is released.
 [elro]

* Instead of the external resolver, let lxml read the network. You must now
  explicitly enable ``Read network`` in the control panel.
  [elro]

1.0rc6 - 2010-05-21
-------------------

* Fix transform caching to account for different virtual hosts of the same
  site and make cache invalidation work across ZEO clients.
  [elro]

1.0rc5 - 2010-04-21
-------------------

* Fix in-Plone content inclusion via the ``href`` mechanism, including the use
  of relative paths in hrefs.
  [optilude]

* Ensured that the absolute prefix would work even in a virtual hosting
  scenario where the aboslute path of the site root is '/'.
  [optilude]
  
* Added an event handler which will set an HTTP request header 'X-XDV'
  if XDV is enabled for the incoming domain. This can be used as a check
  in e.g. portal_css, for example with a TALES expression like
  'request/HTTP_X_XDV | nothing'. The @@xdv-check/enabled method
  now just checks for the existence of this variable too. The idea is that
  it is easier to replicate this in a pure-XSLT deployment scenario with
  collective.xdv disabled, for example by setting the same request header in
  nginx or Apache.
  [optilude]

* Made all zope paths resolve relative to the Plone site.
  [marshalium]

* Add support for resolving files with http/ftp absolute urls and zope paths.
  [marshalium]

* Make absolute_prefix prepend the Plone site path if necessary. This means
  that an absolute prefix starting with / is always relative to the Plone
  site root.
  [optilude]

* Add support for the python:// pseudo-scheme for the theme, rules and
  extrauri files. See README.txt for details.
  [optilude]

* Improve the wording in the control panel
  [optilude]

* Fix a bug whereby the cached transforms (in non-debug-mode) would leak
  across Plone sites in the same instance.
  [optilude]

* Remove the ``boilerplate`` parameter. Use ``extraurl`` instead.
  [optilude]

* Let collective.xdv depend on the new XDV egg, instead of dv.xdvserver.
  [optilude]

* Only invoke the transformation if collective.xdv is in fact installed.
  Note: you may need to re-install the product after upgrading.
  [optilude]

* Use plone.transformchain to sequence transformation activities. Among
  other things, this helps us avoid re-parsing/serialising lxml trees when
  other things in the chain prefer to work with such representations of the
  response. It also helps control the sequence of post-publication events.
  [optilude]

* Zope 2.12 / Plone 4 compatability.
  [lrowe]

1.0rc4 - 2009-10-27
-------------------

* Style error responses as well as successful responses.
  [lrowe]

* Use ZPublisher events instead of plone.postpublicationhook for compatibility
  with Zope 2.12 / Plone 4. For Zope2.10 / Plone 3.x, you must now specify
  "collective.xdv [Zope2.10]" in your buildout to bring in the package
  ZPublisherEventsBackport.
  [lrowe]

* Added support for extraurl parameter
  [mhora]

* Added alternate themes and modified transform so it can decide by a path
  regular expression which theme and rules files it will use for
  transformation
  [mhora]

* Add /manage in unstyled paths default list.
  [encolpe]
  
1.0a2 - 2009-07-12
------------------

* Catch up with changes in plone.registry's API.
  [optilude]

1.0a1 - 2009-04-17
------------------

* Initial release

