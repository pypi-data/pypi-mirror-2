# This is Authenticity's configuration file. The commented out options contain
# the default values. Uncomment and customize them before attempting to use
# Authenticity. The default configuration file does NOT work (the minimum which
# needs to be specified is LDAP/search_base or LDAP/search_format; there are no
# sensible default values for these two options).
#
# This file must be encoded using UTF-8.
#
# All the options can be overriden in the Apache configuration. See the
# examples for the options' format in that context.
#
# Some options support variables in the forms `$variable' or `${variable}. These
# get replaced at runtime with appropriate values as described below. Each
# option supports a different set of variables. Using any other variables is not
# an error but will not be replaced by an appropriate value. For example, if an
# option foo supports $bar (which is replaced by the string `Alice') but not
# $moo, then a definition of:
# foo = Why doesn't $bar $moo?
# will become `Why doesn't Alice $moo?'. The sequence `$$' will be replaced by
# a single dollar sign. In the above context, a definition of:
# foo = Why doesn't $$bar $moo?
# will become `Why doesn't $bar $moo?'. The options which does not specify any
# variables does not have this special behaviour and any use of the `$'
# character will not be interpreted (including `$$').

[General]
# The path where Authenticity's data is installed. By default, this is
# share/authenticity under Python's prefix (/usr on Debian systems.)
#
# The value of this option is an absolute path. It must not be empty
#
# data_path = /usr/share/authenticity

# The path where Authenticity serves content. For example, if the base URL is
# http://example.org/openid (i.e Authenticity serves
# http://example.org/openid/server, http://example.org/openid/id/alice etc.),
# then this option must be set to /openid.
#
# The value of this option is an absolute path (i.e. it begins with the /
# character). It must not be empty.
#
# server_path = /

# A human friendly name for the site where users authenticate (for example
# Example, Inc. or example.org).
#
# The value for this option is a generic string. It must not be empty.
#
# Supported variables:
#  $server_host - The server name where the request was received, as specified
#                 in the Host header or in the URL.
#  $server_name - The value of the ServerName directive from Apache.
#
# realm_name = $server_host

# The title of the served pages.
#
# The value for this option is a generic string. It must not be empty.
#
# Supported variables:
#  $realm_name - The value of the realm_name option.
#
# page_title = Authenticity OpenID Server

# The database used for storing the state between OpenID requests in the form of
# a URL. The following URL types are currently supported:
#  * file:   A directory which needs to be writable by the user Apache is
#            running as. The state will be kept in files under this directory.
#            For example, file:///var/lib/authenticity/stores/
#  * sqlite: A file which needs to be writables by the user Apache is running
#            as. The file will be initialized as an sqlite database. For
#            example, sqlite:///var/lib/authenticity/store.sqlite
#
# WARNING: The database will contain sensitive data. See the README.Security
# file for more information.
#
# The value for this option is a URL with a scheme of file or sqlite. It must
# not be empty.
#
# openid_store = file:///var/lib/authenticity/stores/

# The directory where templates are stored. Within it, there is a subdirectory
# for each template. The template which will be used is specified by the
# template option. See the README.Templates file for more information about
# how templates are defined. A relative path is interpreted as relative to the
# data_path.
#
# The value for this option is a path. It must not be empty.
#
# templates_directory = templates/

# The name of the template to use (i.e. the name of the subdirectory under
# templates_directory). See the README.Templates file for more information about
# how templates are defined.
#
# The value for this option is a directory name (i.e. it must not contain a /
# character and must not be equal to the special names `.' and `..'). It must
# not be empty.
#
# template = default


[Identity]
# The backend to use to retrieve user identity information. Currently, only
# the LDAP backend is implemented. See the LDAP section for options specific
# to this backend.
#
# The value for this option must be ldap. It must not be empty.
#
# backend = ldap

# The identifiers local to this OpenID provider which the users are authorized
# to use. The $username variable should be used in all identifiers, otherwise
# any user will be authorized to use the identifier in question. These are
# normally http(s) URL. By default, Authenticity serves information about
# users at $server_base/id/$username. However, these identifiers need not be
# used. If this identifier format is left out from this option, the pages will
# still be served but users will not be able to use these identifiers.
#
# The value for this option is a comma separated list of strings. It must not be
# empty.
#
# Supported variables:
#  $server_base - The base address of the server as determined by the request
#                 made to it. This contains the value of the server_path option
#                 as set in the General section.
#  $username    - The username of the user trying to authenticate.
#
# identifier_formats = $server_base/id/$username

# The LocalID advertised by the XRDS document linked from /id/$username. Please
# see the OpenID specification about the purpose of the LocalID field. The
# $username variable should be used in this field, altherwise the same
# identifier will be associated with all the users. If the option is empty, a
# LocalID element is not included in the XRDS document.
#
# The value for this option is a generic string. It can be empty.
#
# Supported variables:
#  $server_base - The base address of the server as determined by the request
#                 made to it. This contains the value of the server_path option
#                 as set in the General section.
#  $username    - The username of the user trying to authenticate.
#
# forced_local_id = $server_base/id/$username


[LDAP]
# Searching for users in a LDAP directory can be done in two ways: either by
# specifying the search_format which is a template for the distinguished names
# of the users (such as `uid=$username,ou=people,dc=example,dc=org') or by
# specifying the search_base, search_scope and search_filter options. The latter
# provide more flexibility by specifying the complete search parameters.
#
# When bind_dn and bind_password are specified, Authenticity binds using this
# information before searching for the objects associated with a user.
# Therefore, the bind_dn object must be able to at least read the distinguished
# names of the users. If bind_dn is not specified, Authenticity only binds
# anonymously and therefore the anonymous user should at least be able to
# read the distinguished names of the users.
#
# When an identity page is displayed, the information retrieved is read either
# as bind_dn or anonymously.
#
# When authenticating, if search_format is not used, the object associated with
# a user is first searched for bound as either bind_dn or anonymously; if
# search_format is used, the object associated with a user is deduced from it.
# Then, Authenticity rebinds using the object found and the user supplied
# password. The data for the simple registration extension is extracted both in
# the initial search (so either as bind_dn or anonymously) and after the user
# successfully authenticates and the two are combined (the first value found for
# an attribute is used). This personal data is sent to the OpenID consumer only
# if the user successfully authenticates AND the user accepts to send his/her
# personal data.


# A LDAP URL where the server can be contacted. The scheme can be one of ldap,
# ldaps or ldapi. The ldap and ldaps schemes need to specify a host and
# optionally a port, while the ldapi scheme needs to specify a file path.
#
# The value for this option is a LDAP URL. It cannot be empty.
#
# server_url = ldap://127.0.0.1

# The distinguished name which is used to bind before searching for an object
# matching a user. See the description in the beginning of the section for
# more information on how this user is used. If this option is not empty, the
# bind_password must also be specified.
#
# The value for this option is a LDAP distinguished name. It can be empty.
#
# bind_dn =

# The password used to bind before searching for an object. See the description
# of the bind_dn option above. You should really only set this option in the
# Apache configuration file, make that file readable only by root and make sure
# no other web application has access to the data (for example, by having
# Authenticity in its own virtual host).
#
# The value for this option is a generic string. It can be empty.
#
# bind_password =

# A template for the distinguished name of users. If this is non-empty, the
# search_base, search_scope and search_filter options are ignored. The value
# should contain the $username variable otherwise the username given by the
# user would not be used for any purpose whatsoever. For example:
# search_format = uid=$username,ou=people,dc=example,dc=org
#
# The above example is equivalent to specifying the following options:
# search_base = ou=people,dc=example,dc=org
# search_scope = one
# search_filter = (uid=$username)
#
# The value for this option is a distinguished name template which should
# contain the $username variable. It can be empty.
#
# Supported variables:
#  $username    - The username of the user trying to authenticate.
#
# search_format =

# The base for searching the directory if the search_format option is empty. If
# the search_base is used instead of search_format, search_scope and
# search_filter must also be non-empty.
#
# The value for this option is a distinguished name. It can be empty.
#
# search_base =

# The scope with which to search under search_base. This value is ignored if
# search_format is not empty. The possible values are:
#  * sub:  search_base and all objects beneath it.
#  * one:  all objects exactly one level beneath search_base.
#  * base: only search_base.
#
# The value for this option is one of sub, one or base. It can be empty.
#
# search_scope = sub

# The filter to apply when searching the directory under search_base. This value
# is ignored if search_format is not empty. This filter should contain the
# $username variable.
#
# The value for this option is a LDAP filter. It can be empty.
#
# search_filter = (uid=$username)

# The number of seconds to wait for the result from the LDAP server before
# giving up when searching. During authentication, two searches are made if
# search_format is not used and the timeout applies to each one in turn.
#
# The value for this option is a natural number. It cannot be empty.
#
# search_timeout = 3

# The following options specify which LDAP attributes are used to retrieve
# information about a user. This information can be displayed in the identity
# page and sent using the simple registration extension when a user
# authenticates. All of the attributes are optional and it is not an error
# if the specified attribute does not exist, not even in schema. The attributes
# MUST NOT contain binary data (the data is decoded as UTF-8).
#
# The value for these options are ASCII strings. They can be empty.
#
# nickname_attribute = uid
# email_attribute = mail
# fullname_attribute = cn
# birthday_attribute =
# gender_attribute =
# postcode_attribute = postalCode
# country_attribute = c
# language_attribute =
# timezone_attribute =

# The format in which dates of birth are stored in the birthday_attribute. The
# template can use the following format codes:
#  %Y - the year in YYYY notation
#  %m - the month as a number between 01 and 12.
#  %d - the day of the month between 01 and 31.
#  any other format code supported by Python's strptime; see
#  http://docs.python.org/library/datetime.html#strftime-strptime-behavior for
#  a complete list of format codes.
#
# The value for this option is a generic string which can contain format codes.
# It cannot be empty.
#
# birthday_format = %Y-%m-%d

# The following options specify the values stored in the gender_attribute for
# males and females.
#
# The values for these options are generic strings. They cannot be empty.
#
# male_gender = M
# female_gender = F
