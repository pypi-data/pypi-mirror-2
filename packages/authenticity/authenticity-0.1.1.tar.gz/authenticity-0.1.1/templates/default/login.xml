<?xml version="1.0" encoding="UTF-8"?>
<?authenticity.output-type xhtml?>
<?authenticity.content-type application/xhtml+xml?>
<?authenticity.xml_declaration on?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:py="http://genshi.edgewall.org/">
    <head>
        <title>${context.page_title} :: Login</title>
        <link rel="stylesheet" href="${context.construct_url('/style/css/login.css')}" type="text/css"/>
        ${head_elements}
    </head>
    <body>
        <table id="content">
            <tbody>
                <tr>
                    <td>
                        <h1>Authenticate to ${context.realm_name}</h1>
                        <table>
                            <tbody>
                                <tr>
                                    <td id="padlock_container">
                                        <py:choose test="request.secure">
                                            <py:when test="True">
                                                <object id="padlock" type="image/png" data="${context.construct_url('/images/padlock-green.png')}" title="The conection is secure."/>
                                            </py:when>
                                            <py:when test="False">
                                                <object id="padlock" type="image/png" data="${context.construct_url('/images/padlock-red.png')}" title="The conection is insecure."/>
                                            </py:when>
                                        </py:choose>
                                    </td>
                                    <td id="maincontent">
                                        <p class="error" py:if="error">Error: ${error}</p>
                                        <hr/>
                                        <py:choose test="id_select">
                                            <py:when test="True">
                                                <p>
                                                    The site <strong><a href="${trust_root}" title="Visit the site that would like to identify you.">${trust_root}</a></strong>
                                                    would like to authenticate you. Please select an identifier under which you would like to be known, enter your credentials
                                                    and press Login to continue or press Cancel to return to the previous page.
                                                </p>
                                            </py:when>
                                            <py:when test="False">
                                                <p>
                                                    The site <strong><a href="${trust_root}" title="Visit the site that would like to identify you.">${trust_root}</a></strong>
                                                    would like to authenticate you as <strong>${claimed_identifier}</strong>. Please enter your credentials and press Login to
                                                    continue or press Cancel to return to the previous page.
                                                </p>
                                            </py:when>
                                        </py:choose>
                                        <form action="${context.login_url()}" method="POST">
                                            <input type="hidden" name="original_request" value="${original_request}"/>
                                            <table class="form">
                                                <py:choose test="id_select">
                                                    <py:when test="True">
                                                        <tr>
                                                            <td class="name"><label for="identifier">Site-local identifier</label></td>
                                                            <td class="value">
                                                                <select id="identifier" name="identifier">
                                                                    <option py:for="id in identifier_formats" value="${id}">${id}</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                    </py:when>
                                                    <py:when test="False">
                                                        <tr>
                                                            <td class="name">Site-local identifier</td>
                                                            <td class="value">${identifier}</td>
                                                        </tr>
                                                    </py:when>
                                                </py:choose>
                                                <tr>
                                                    <td class="name"><label for="username">Username</label></td>
                                                    <td class="value"><input id="username" type="text" name="username" value="${username}"/></td>
                                                </tr>
                                                <tr>
                                                    <td class="name"><label for="password">Password</label></td>
                                                    <td class="value"><input id="password" type="password" name="password" value=""/></td>
                                                </tr>
                                                <tr py:if="sreg_requested">
                                                    <td colspan="2">
                                                        <py:choose test="send_sreg_data">
                                                            <py:when test="True">
                                                                <input id="send_sreg_data" type="checkbox" name="send_sreg_data" value="send_sreg_data" checked="checked"/>
                                                            </py:when>
                                                            <py:when test="False">
                                                                <input id="send_sreg_data" type="checkbox" name="send_sreg_data" value="send_sreg_data"/>
                                                            </py:when>
                                                        </py:choose>
                                                        <label for="send_sreg_data">
                                                            Send personal information.
                                                            <py:if test="policy_url">
                                                                Please review the data <a href="${policy_url}" title="View the data policy of ${trust_root}">policy</a> used by ${trust_root}.
                                                            </py:if>
                                                        </label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" class="submit">
                                                        <button type="submit" name="action" value="cancel">Cancel</button>
                                                        <button type="submit" name="action" value="login">Login</button>
                                                    </td>
                                                </tr>
                                            </table>
                                        </form>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td id="footer">
                        Powered by <a href="${context.authenticity_homepage}" title="Visit Authenticity's homepage.">Authenticity</a>
                        ${context.authenticity_version}
                    </td>
                </tr>
            </tfoot>
        </table>
    </body>
</html>
