<dl i18n:domain="CMFPlomino" 
    class="portlet portlet-plomino"
    tal:define="db python:view.parentdatabase();
                db_url python:db.absolute_url();
                type python:view.currenttype();
                url python:view.context.absolute_url();">
    <dt class="portletHeader"><a tal:attributes="href string:${db_url}/DatabaseDesign"
        i18n:translate="Design">Design</a></dt>
    <dd class="portletItem">
        <strong i18n:translate="Database">Database</strong>
        <ul>
        <li><a tal:attributes="href string:${db_url}/edit"
            i18n:translate="">Parameters</a></li>
        <li><a tal:attributes="href string:${db_url}/DatabaseDesign"
            i18n:translate="">Design</a></li>
        <li><a tal:attributes="href string:${db_url}/DatabaseACL"
            i18n:translate="">Access control</a></li>
        </ul>
    </dd>
    <dd class="portletItem" tal:condition="python:type=='PlominoDatabase'">
        <strong i18n:translate="">Add new...</strong>
        <ul>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoForm"
            i18n:translate="">Form</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoView"
            i18n:translate="">View</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoAgent"
            i18n:translate="">Agent</a></li>
        </ul>
    </dd>
    <dd class="portletItem" tal:condition="python:type=='PlominoForm'">
        <strong i18n:translate="">Form</strong>
        <div i18n:translate="">Add new...</div>
        <ul>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoField"
         i18n:translate="">Field</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoHidewhen"
         i18n:translate="">Hide when</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoAction"
         i18n:translate="">Action</a></li>
        </ul>
        <div i18n:translate="">or</div>
        <a tal:attributes="href string:${url}/manage_generateView"
          title="Create a view based on the current form definition"
          i18n:translate="">Generate view</a>

    </dd>
    <dd class="portletItem" tal:condition="python:type=='PlominoView'">
        <strong i18n:translate="">View</strong>
        <div i18n:translate="">Add new...</div>
         <ul>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoColumn"
            i18n:translate="">Column</a></li>
        <li><a tal:attributes="href string:${url}/createObject?type_name=PlominoAction"
            i18n:translate="">Action</a></li>
        </ul>
    </dd>
    <dd class="portletItem" tal:define="status python:db.getStatus();
                                        inprogress python:'%' in status">
        <strong i18n:translate="">Status</strong><br/>
        <tal:ready tal:condition="not:inprogress" tal:content="status" i18n:translate="">status</tal:ready>
        <tal:inprogress tal:condition="inprogress">
            <tal:block tal:define="str_status python:status[:status.index('(')];
                                   progress python:status[status.index('(')+1:-1]">
                <tal:block tal:content="str_status">status</tal:block>
                <div style="border:1px solid blue; width: 100%"><div tal:attributes="style string:width:$progress;;background-color:blue">&nbsp;</div></div>
            </tal:block>
        </tal:inprogress>
    </dd>
</dl>