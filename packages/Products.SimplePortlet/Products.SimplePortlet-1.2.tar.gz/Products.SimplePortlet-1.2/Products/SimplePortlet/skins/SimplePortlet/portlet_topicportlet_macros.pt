<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">

  <body>
    <div metal:define-macro="portlet" tal:omit-tag="">
      <dl class="portlet"
          tal:define="style portlet/getStyle;
                      topic portlet/getTopic;
					  toLocalizedTime nocall:context/toLocalizedTime;
		              data python: topic and topic.queryCatalog(REQUEST={})"
          tal:condition="python: topic and data"
          tal:attributes="class python: test(style, 'portlet '+style, 'portlet')">
        <dt class="portletHeader" tal:content="portlet/title_or_id">title</dt>
          <dd class="portletItem"
               tal:define="text python:portlet.getBody()"
               tal:condition="portlet/hasBody"
               tal:content="structure text">
            body
          </dd>
          <tal:topic tal:define="max_size portlet/getMaxResults">
	     <tal:block define="total python:len(data)">
                <tal:items repeat="brain python:data[:max_size]">
                    <dd class="portletContent"
                         tal:define="oddrow repeat/brain/odd"
                         tal:attributes="class python:test(oddrow, 'portletItem odd', 'portletItem even')">
                      <a href="#"
                         tal:define="title brain/pretty_title_or_id;
			             url python:brain.getRemoteUrl or brain.getURL"
                         tal:attributes="href url"
                         tal:content="title"/>&nbsp;
		       <tal:date tal:condition="portlet/show_date | python:1">
                           <span class="portletItemDetails"
                                tal:define="date brain/Date"
                                tal:condition="date"
                                tal:content="python: toLocalizedTime(date)" />
		       </tal:date>
                    </dd>
              </tal:items>
              <dd class="portletFooter" tal:define="url topic/absolute_url|nothing;
                              show_more_link portlet/show_more_link | python:1;
                              show_more python: (total > max_size) and show_more_link"
                  tal:attributes="style python: test(show_more, '', 'border-top: none')">
                  <a href=""
                     tal:attributes="href url"
                     tal:condition="show_more"
                     i18n:translate="box_more"
                     >
                    More &hellip;
                  </a>
                  <span class="portletBottomLeft"></span>
                  <span class="portletBottomRight"></span>
              </dd>
            </tal:block>
          </tal:topic>
      </dl>
    </div>
  </body>
</html>

