<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">
      
  <body>
    <div metal:define-macro="portlet">
      <div class="portlet">
        <h5 tal:content="python: portlet.title_or_id()">title</h5>
        <div class="portletBody">
          <div class="portletContent" 
               tal:define="text python:portlet.getBody()"
               tal:condition="portlet/hasBody"
               tal:content="structure text">
            body
          </div>
          <tal:block tal:define="channel portlet/getChannel;
                                 max_size portlet/getMaxResults;
                                 sin_tool here/sin_tool;"
                     tal:condition="python: sin_tool and channel">
            <tal:block tal:repeat="row python:sin_tool.sin(channel, max_size=max_size)">
              <div class="portletContent"
                   tal:define="oddrow repeat/row/odd"
                   tal:attributes="class python:test(oddrow, 'portletContent even', 'portletContent odd')">
                <a href="#"  
                   tal:attributes="href row/link" 
                   tal:content="structure row/title"/>&nbsp;
                <span tal:condition="python: row.get('date') or nothing" 
                        tal:content="python: here.toPortalTime(row['date'])" />
              </div>
            </tal:block>
          </tal:block>
        </div>
      </div>
    </div>
  </body>
</html>
