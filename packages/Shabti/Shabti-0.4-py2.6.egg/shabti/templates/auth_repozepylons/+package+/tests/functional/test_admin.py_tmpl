from {{package}}.tests import *

class TestAdminController(TestController):
    def test_index(self):
        """Admin (couchdbkit): check index page"""
        response = self.app.get('/admin')
        response.mustcontain('User', 'Group', 'Permission')

    def test_user_grid(self):
        """Admin (couchdbkit): check retrieve User model data"""
        response = self.app.get('/admin/User/models')
        response.mustcontain('User')

        response = self.app.get('/admin/User/models.json?jqgrid=true')
        print("RESPONSE", response.body)
        # print("RESPONSEDIR", dir(response))
        response.mustcontain('"admin", "admin@example.com", "True", "Administrators"]')

    def test_user_add(self):
        """Admin (couchdbkit): Check add to User model data"""
        response = self.app.get('/admin/User/models/new')
        response.mustcontain('<input id="User--username"')

        response = self.app.get('/admin/User/models/new.xhr')
        response.mustcontain('<input id="User--username"')

    def test_user_edit(self):
        """Admin (couchdbkit): Check edit User model data"""
        response = self.app.get('/admin/User/models/1/edit')
        response.mustcontain('<input id="User-1-username"')

        response = self.app.get('/admin/User/models/1/edit.xhr')
        response.mustcontain('<input id="User-1-username"')

# --- Added by Shabti auth_repozepylons template