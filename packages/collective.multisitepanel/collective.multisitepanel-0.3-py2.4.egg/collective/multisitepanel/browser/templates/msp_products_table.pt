<table class="multisitepanel_table">
	<colgroup span="1" class="msp_firtcolumn"></colgroup>
	<colgroup class="msp_column" tal:attributes="span python:len(view.sitesList)"></colgroup>
    <thead>
    <tr>
        <th>Product title [Package]<br />
        total:<tal:total replace="python:len(view.productsList)"></tal:total>
        </th>
        <th class="vertical" valign="bottom" tal:repeat="this_site view/sitesList">
            <em tal:repeat="letter python:this_site[0][:8]"
                tal:content="letter">
                letter
            </em>
			<a href="#"
                    tal:attributes="href python:'/'+this_site[0]">
			<img tal:attributes="src string:${context/portal_url}/arrowDown.gif;
                                        alt string:More details;
                                        title string:More details;" />
            </a>
        </th>
    </tr>
    </thead>
    <tbody>
    <tal:products repeat="product view/productsList">
        <tr tal:define="oddrow repeat/product/odd"
            tal:attributes="class python:oddrow is True and 'even' or 'odd'">
            <th>
                <span tal:content="product/title">product name</span>
                <a href="#" class="product-link"
                    tal:attributes="id python:'product-section-'+str(repeat['product'].number() -1);">
					<img tal:attributes="src string:${context/portal_url}/action_icon.gif;
					                    alt string:More details;
										title string:More details;" />
				</a>
                <br />
                <span tal:content="python: view.productCompleteId(product['id'])"
                        class="discreet">product id</span>
                
            </th>
            <td tal:repeat="siteTuple view/sitesList">
                <tal:ver define="siteName python:siteTuple[0];
                                siteApp python:siteTuple[1];
                                instVersion python:view.multisite_productInstalledVersion(siteApp,product['id']);
                                latest python:instVersion and instVersion == product['version']">
                        <img tal:condition="latest" src="/misc_/CMFPlone/confirm_icon.gif"
                              alt="Latest version" title="Latest version"
                              i18n:attributes="title" />
                        <img tal:condition="python: instVersion and not latest"
                             alt="Not latest version" title="Not latest version" 
                            tal:attributes="src string:${view/portal/absolute_url}/error_icon.gif"/>
                </tal:ver>
            </td>
        </tr>
    </tal:products>
    </tbody>
</table>