<table class="listing" id="product-table">
    <thead>
    <tr>
        <th>Product title [Package]<br />
        total:<tal:total replace="python:len(view.productsList)"></tal:total>
        </th>
        <th class="vertical" valign="bottom" tal:repeat="this_site view/sitesList">
            <span tal:attributes="title python:this_site[0]">
            <em tal:repeat="letter python:this_site[0][:8]"
                tal:content="letter">
                letter
            </em>
            </span>
        </th>
    </tr>
    </thead>
    <tbody>
    <tal:products repeat="product view/productsList">
        <tr tal:define="oddrow repeat/product/odd;
                        isProduct python:product['id'].find('.') == -1 and 'Products.' or ''"
            tal:attributes="class python:oddrow is True and 'even' or 'odd'">
            <td>
                <span tal:content="product/title">product name</span>
                <br />
                <span tal:content="string: ${isProduct}${product/id}"
                        class="discreet">product id</span>
            </td>
            <td tal:repeat="siteTuple view/sitesList">
                <tal:ver define="siteName python:siteTuple[0];
                                siteApp python:siteTuple[1];
                                instVersion python:view.multisite_productInstalledVersion(siteApp,product['id']);
                                latest python:instVersion and instVersion == product['version']">
                        <img tal:condition="latest" src="/misc_/CMFPlone/confirm_icon.gif"
                              alt="Latest version" title="Latest version"
                              i18n:attributes="title">
                        <img tal:condition="python: instVersion and not latest"
                             alt="Not latest version" title="Not latest version" 
                            tal:attributes="src string:${view/portal/absolute_url}/error_icon.gif"/>
                </tal:ver>
            </td>
        </tr>
    </tal:products>
    </tbody>
</table>