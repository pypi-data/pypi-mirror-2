		<table class="listing">
			<tr>
				<th>Product title [Package]<br />
				total:<tal:total replace="python:len(view.productsList)"></tal:total>
				</th>
				<th class="vertical" valign="bottom" tal:repeat="this_site view/sitesList">
					<em tal:repeat="letter python:this_site[0]"
						tal:content="letter">
						letter
					</em>
				</th>
			</tr>
			<tal:products repeat="product view/productsList">
				<tr tal:define="oddrow repeat/product/odd;
								isProduct python:product['id'].find('.') == -1 and 'Products.' or ''"
					tal:attributes="class python:oddrow is True and 'even' or 'odd'">
					<td>
						<span tal:content="product/title">product name</span>
						<br />
						<span tal:content="string: ${isProduct}${product/id}"
								class="discreet">product id</span>
						<a style="float:right" tal:attributes="href string: $portal_url/@@msp_products_details#${product/id}">
							<img src="/misc_/CMFPlone/info_icon.gif" alt="">
						</a>
					</td>
					<td tal:repeat="siteTuple view/sitesList">
						<tal:ver define="siteName python:siteTuple[0];
										siteApp python:siteTuple[1];
										instVersion python:view.multisite_productInstalledVersion(siteApp,product['id']);
										latest python:instVersion and instVersion == product['version']">
								<img tal:condition="latest" src="/misc_/CMFPlone/confirm_icon.gif" alt="latest-version" title="Versione aggiornata">
								<img tal:condition="python: instVersion and not latest" 
									tal:attributes="title string:Aggiornamento disponbile. Versione installata: ${instVersion};
													src string:${view/portal/absolute_url}/error_icon.gif"
									alt=""/>
						</tal:ver>
					</td>
				</tr>
			</tal:products>
		</table>
	</tal:list>
	<tal:details condition="pid"
		define="product python:view.getProductByPid(pid);
				allSites view/sitesList">
		<a class="link-parent"
			tal:attributes="href string:${context/absolute_url}/${view/__name__}">
			Torna alla lista completa
		</a>
		<h3>Dettaglio del prodotto
				<tal:filter replace="python:product['title']">nome prodotto</tal:filter>
				[<tal:id replace="python:product['id']">id prodotto</tal:id>]
				 - <tal:version replace="python:product['version']">versione prodotto</tal:version>
		</h3>
		<span tal:content="python:product['description']">descrizione</span>
		<table class="listing">
			<tr>	
				<th>Sito</th>
				<th>Versione installata</th>
			</tr>
			<tal:row repeat="this_site allSites">
				<tr tal:define="siteName python:this_site[0];
								siteApp python:this_site[1];
								instVersion python:view.multisite_productInstalledVersion(siteApp,product['id']);
								latest python:product['version'] == instVersion;
								oddrow repeat/this_site/odd;"
					tal:attributes="class python: oddrow is True and 'even' or 'odd'">
					
					<td tal:content="python:siteName">nome del sito</td>
					<td>
						<img tal:condition="latest" src="/misc_/CMFPlone/confirm_icon.gif" alt="latest-version" title="Versione aggiornata">
						<form method="post"
							tal:attributes="action string:${context/absolute_url}/${view/__name__}?pid=${product/id}"
							tal:condition="python:instVersion and not latest">
							<span class="state-private"
								tal:content="python:instVersion">versione vecchia</span>
							<input type="hidden" name="site"
								tal:attributes="value siteName">
							<input type="hidden" name="reinstall_pid"
								tal:attributes="value python:product['id']">
							<input type="submit"
								class="context"
								name="form_update"
								value="Aggiorna">
						</form>
					</td>
				</tr>
			</tal:row>
		</table>