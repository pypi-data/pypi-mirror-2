<dl id="document-toc" class="portlet toc" style="display:block;">
    <dt class="portletHeader"
        i18n:domain="plone" i18n:translate="">
            All sites
    </dt>
    <dd class="portletItem">
    </dd>
</dl>
<tal:details define="allSites view/sitesList;">
    <div id="accordion">
    <tal:sites repeat="siteTuple allSites">
        <h3><a href="#" tal:content="python:siteTuple[0]">First header</a></h3>
        <div>
        <table class="listing" style="float:left;">
            <caption i18n:translate="msp_standard_contents">Standard contents</caption>
            <tr>
                <th>Tot</th>
                <th i18n:domain="plone" i18n:translate="">Content type</th>
                <th>Id</th>
                <th i18n:translate="msp_global_allow">Global allow</th>
            </tr>
            <tal:standardType tal:repeat="content_type python:view.listStandardTypes()">
                <tr tal:define="oddrow repeat/content_type/odd;"
                    tal:attributes="class python: oddrow is True and 'even' or 'odd'">
                    <td tal:define="typeCount python: view.multisite_countContentsByTypes(siteTuple[1],content_type.getId())"
                        tal:content="typeCount">
                        number of contents
                    </td>
                    <td>
                        <img tal:attributes="src python:content_type.content_icon;
                                            title python:content_type.title;
                                            alt python:content_type.title;">
                        <span tal:content="python:content_type.title">type title</span>
                    </td>
                    <td><span tal:content="python:content_type.getId()">type id</span></td>
                    <td tal:define="globalAllowed python:content_type.globalAllow()">
                        <img tal:condition="python:globalAllowed"
                            tal:attributes="src string:${view/portal/absolute_url}/confirm_icon.gif"
                            alt="global allowed"
                            title="Content type globally addable">
                        <img tal:condition="python: not globalAllowed"
                                tal:attributes="src string:${view/portal/absolute_url}/error_icon.gif"
                                alt="not global allowed"
                                title="Content type not globally addable">
                    </td>
                </tr>
            </tal:standardType>
        </table>
		<tal:customcontents
		      define="customContentsList python:view.multisite_customContentsBySite(siteTuple[1])" 
		      condition="customContentsList">
        <table class="listing" style="float:left;margin-left:1em;">
            <caption i18n:translate="msp_custom_contents">Custom contents</caption>
            <tr>
                <th>Tot</th>
                <th i18n:domain="plone" i18n:translate="">Content type</th>
                <th>Id</th>
                <th i18n:translate="msp_package">Package</th>
                <th i18n:translate="msp_global_allow">Global allow</th>
            </tr>
            <tal:custoTypes repeat="typeTuple customContentsList">
            <tr tal:define="content_type python: typeTuple[0];
                            oddrow repeat/typeTuple/odd;
                            icon python:view.multisite_getContentTypeIcon(siteTuple[1],content_type.getId());
                            typeCount python: view.multisite_countContentsByTypes(siteTuple[1],content_type.getId())"
                tal:condition="python:typeCount >= 0"
                tal:attributes="class python: oddrow is True and 'even' or 'odd'">
                <td tal:content="typeCount">
                    number of contents
                </td>
                <td>
                    <img tal:attributes="src icon;    
                                        title python:content_type.title;"  alt=""/>
                    <span tal:content="python:content_type.title">type title</span>
                </td>
                <td><span tal:content="python:content_type.getId()">type id</span></td>
                <td><span tal:content="python:content_type.product">product name</span></td>
                <td tal:define="globalAllowed python:content_type.globalAllow()">
                    <img tal:condition="python:globalAllowed"
                        tal:attributes="src string:${view/portal/absolute_url}/confirm_icon.gif"
                        alt="global allowed"
                        title="Content type globally addable">
                    <img tal:condition="python: not globalAllowed"
                            tal:attributes="src string:${view/portal/absolute_url}/error_icon.gif"
                            alt="not global allowed"
                            title="Content type not globally addable">
                </td>
            </tr>
            </tal:custoTypes>
        </table>
		</tal:customcontents>
        </div>
        <br class="visualClear">
    </tal:sites>
    </div>
</tal:details>