<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>music21.environment &mdash; music21 Documentation</title>
    <link rel="stylesheet" href="_static/music21doc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3.7.a11',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="music21 Documentation" href="index.html" />
    <link rel="next" title="music21.expressions" href="moduleExpressions.html" />
    <link rel="prev" title="music21.editorial" href="moduleEditorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="moduleExpressions.html" title="music21.expressions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="moduleEditorial.html" title="music21.editorial"
             accesskey="P">previous</a> |</li>
        <li><a href="contents.html">music21</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">music21.environment</a><ul>
<li><a class="reference external" href="#usersettings">UserSettings</a></li>
<li><a class="reference external" href="#environment">Environment</a></li>
<li><a class="reference external" href="#preference">Preference</a></li>
<li><a class="reference external" href="#settings">Settings</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="moduleEditorial.html"
                                  title="previous chapter">music21.editorial</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="moduleExpressions.html"
                                  title="next chapter">music21.expressions</a></p>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-music21.environment">
<span id="moduleenvironment"></span><h1>music21.environment<a class="headerlink" href="#module-music21.environment" title="Permalink to this headline">¶</a></h1>
<p>The environment module describes an object for accessing and setting variables related to the user&#8217;s music21 environment. Such variables include the location of external applications such as MusicXML readers (e.g. Finale), whether music21 is allowed to download files directly (via the virtual corpus), and other settings. Additional documentation for and examples of using this module are found in <a class="reference external" href="environment.html#environment"><em>Configuring Environment Settings</em></a>.</p>
<dl class="function">
<dt id="music21.environment.get">
<tt class="descclassname">music21.environment.</tt><tt class="descname">get</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#music21.environment.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current setting of a UserSettings key. This will create a user settings file if necessary.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environment</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;lilypondBackend&#39;, &#39;pdfPath&#39;, &#39;lilypondVersion&#39;, &#39;graphicsPath&#39;, &#39;warnings&#39;, &#39;showFormat&#39;, &#39;writeFormat&#39;, &#39;lilypondPath&#39;, &#39;directoryScratch&#39;, &#39;lilypondFormat&#39;, &#39;debug&#39;, &#39;musicxmlPath&#39;, &#39;autoDownload&#39;, &#39;midiPath&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environment</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;musicxmlPath&#39;</span><span class="p">)</span>
<span class="go">&#39;/Applications/Finale Reader.app&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.environment.keys">
<tt class="descclassname">music21.environment.</tt><tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.keys" title="Permalink to this definition">¶</a></dt>
<dd>Return all valid UserSettings keys.</dd></dl>

<dl class="function">
<dt id="music21.environment.set">
<tt class="descclassname">music21.environment.</tt><tt class="descname">set</tt><big>(</big><em>key</em>, <em>value</em><big>)</big><a class="headerlink" href="#music21.environment.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Directly set a single UserSettings key, by providing a key and the appropriate value. This will create a user settings file if necessary.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environment</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;lilypondBackend&#39;, &#39;pdfPath&#39;, &#39;lilypondVersion&#39;, &#39;graphicsPath&#39;, &#39;warnings&#39;, &#39;showFormat&#39;, &#39;writeFormat&#39;, &#39;lilypondPath&#39;, &#39;directoryScratch&#39;, &#39;lilypondFormat&#39;, &#39;debug&#39;, &#39;musicxmlPath&#39;, &#39;autoDownload&#39;, &#39;midiPath&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environment</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;wer&#39;</span><span class="p">,</span> <span class="s">&#39;asdf&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="nc">EnvironmentException: no preference</span>: <span class="n-Identifier">wer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">environment</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;musicxmlPath&#39;</span><span class="p">,</span> <span class="s">&#39;/Applications/Finale Reader.app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="usersettings">
<h2>UserSettings<a class="headerlink" href="#usersettings" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.environment.UserSettings">
<em class="property">
class </em><tt class="descclassname">music21.environment.</tt><tt class="descname">UserSettings</tt><a class="headerlink" href="#music21.environment.UserSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>The UserSettings object provides a simple interface for configuring the user preferences in the <a title="music21.environment.Environment" class="reference internal" href="#music21.environment.Environment"><tt class="xref docutils literal"><span class="pre">Environment</span></tt></a> object. First, create an instance of UserSettings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">UserSettings</span><span class="p">()</span>
</pre></div>
</div>
<p>Second, view the available settings keys.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;lilypondBackend&#39;, &#39;pdfPath&#39;, &#39;lilypondVersion&#39;, &#39;graphicsPath&#39;, &#39;warnings&#39;, &#39;showFormat&#39;, &#39;writeFormat&#39;, &#39;lilypondPath&#39;, &#39;directoryScratch&#39;, &#39;lilypondFormat&#39;, &#39;debug&#39;, &#39;musicxmlPath&#39;, &#39;autoDownload&#39;, &#39;midiPath&#39;]</span>
</pre></div>
</div>
<p>Third, after finding the desired setting, supply the new value as a Python dictionary key value pair. Setting this value updates the user&#8217;s settings file. For example, to set the file path to the Application that will be used to open MusicXML files, use the &#8216;musicxmlPath&#8217; key.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="p">[</span><span class="s">&#39;musicxmlPath&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/Applications/Finale Reader.app&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us</span><span class="p">[</span><span class="s">&#39;musicxmlPath&#39;</span><span class="p">]</span>
<span class="go">u&#39;/Applications/Finale Reader.app&#39;</span>
</pre></div>
</div>
<p>Alternatively, the environment.py module provides convenience functions for setting these settings: <a title="music21.environment.keys" class="reference internal" href="#music21.environment.keys"><tt class="xref docutils literal"><span class="pre">keys()</span></tt></a>, <a title="music21.environment.get" class="reference internal" href="#music21.environment.get"><tt class="xref docutils literal"><span class="pre">get()</span></tt></a>, and <a title="music21.environment.set" class="reference internal" href="#music21.environment.set"><tt class="xref docutils literal"><span class="pre">set()</span></tt></a>.</p>
<p><strong>UserSettings</strong> <strong>methods</strong></p>
<blockquote>
<dl class="method">
<dt id="music21.environment.UserSettings.create">
<tt class="descname">create</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.UserSettings.create" title="Permalink to this definition">¶</a></dt>
<dd>If a environment configuration file does not exist, create one based on the default settings.</dd></dl>

<dl class="method">
<dt id="music21.environment.UserSettings.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.UserSettings.delete" title="Permalink to this definition">¶</a></dt>
<dd>Permanently remove the user configuration file.</dd></dl>

<dl class="method">
<dt id="music21.environment.UserSettings.getSettingsPath">
<tt class="descname">getSettingsPath</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.UserSettings.getSettingsPath" title="Permalink to this definition">¶</a></dt>
<dd>Return the path to the platform specific settings file.</dd></dl>

<dl class="method">
<dt id="music21.environment.UserSettings.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.UserSettings.keys" title="Permalink to this definition">¶</a></dt>
<dd>Return the keys found in the user&#8217;s <a title="music21.environment.Environment" class="reference internal" href="#music21.environment.Environment"><tt class="xref docutils literal"><span class="pre">Environment</span></tt></a> object.</dd></dl>

<dl class="method">
<dt id="music21.environment.UserSettings.restoreDefaults">
<tt class="descname">restoreDefaults</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.UserSettings.restoreDefaults" title="Permalink to this definition">¶</a></dt>
<dd>Restore platform specific defaults.</dd></dl>

</blockquote>
</dd></dl>

</div>
<div class="section" id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.environment.Environment">
<em class="property">
class </em><tt class="descclassname">music21.environment.</tt><tt class="descname">Environment</tt><big>(</big><em>modName=None</em><big>)</big><a class="headerlink" href="#music21.environment.Environment" title="Permalink to this definition">¶</a></dt>
<dd><p>The Environment object stores user preferences as dictionary-like object. Additionally, the Environment object provides convenience methods to music21 modules for getting temporary files, launching files with external applications, and printing debug and warning messages. Generally, each module creates a single, module-level instance of Environment, passing the module&#8217;s name during creation. For more a user-level interface for creating and editing settings, see the  <a title="music21.environment.UserSettings" class="reference internal" href="#music21.environment.UserSettings"><tt class="xref docutils literal"><span class="pre">UserSettings</span></tt></a> object.</p>
<p>Create an instance of this object. A modName argument can be provided for use in printDebug() calls.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">post</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="s">&#39;writeFormat&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Environment</strong> <strong>attributes</strong></p>
<blockquote>
<dl class="attribute">
<dt id="music21.environment.Environment.modNameParent">
<tt class="descname">modNameParent</tt><a class="headerlink" href="#music21.environment.Environment.modNameParent" title="Permalink to this definition">¶</a></dt>
<dd>A string representation of the module that contains this Environment instance.</dd></dl>

<dl class="attribute">
<dt id="music21.environment.Environment.ref">
<tt class="descname">ref</tt><a class="headerlink" href="#music21.environment.Environment.ref" title="Permalink to this definition">¶</a></dt>
<dd>The Python dictionary used to store all internal settings.</dd></dl>

</blockquote>
<p><strong>Environment</strong> <strong>methods</strong></p>
<blockquote>
<dl class="method">
<dt id="music21.environment.Environment.read">
<tt class="descname">read</tt><big>(</big><em>fp=None</em><big>)</big><a class="headerlink" href="#music21.environment.Environment.read" title="Permalink to this definition">¶</a></dt>
<dd>Load an XML preference file if and only if the file is available and has been written in the past. This means that no preference file will ever be written unless manually done so. If no preference file exists, the method returns None.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.write">
<tt class="descname">write</tt><big>(</big><em>fp=None</em><big>)</big><a class="headerlink" href="#music21.environment.Environment.write" title="Permalink to this definition">¶</a></dt>
<dd>Write an XML preference file. This must be manually called to store any changes made to the object and access preferences later. If <cite>fp</cite> is None, the default storage location will be used.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.getSettingsPath">
<tt class="descname">getSettingsPath</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.Environment.getSettingsPath" title="Permalink to this definition">¶</a></dt>
<dd>Return the path to the platform specific settings file.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.getDefaultRootTempDir">
<tt class="descname">getDefaultRootTempDir</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.Environment.getDefaultRootTempDir" title="Permalink to this definition">¶</a></dt>
<dd>Use the Python tempfile.gettempdir() to get the system specified temporary directory, and try to add a new &#8216;music21&#8217; directory, and then return this directory. This method is only called if the no scratch directory preference has been set. If not able to create a &#8216;music21&#8217; directory, the standard default is returned.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.getRootTempDir">
<tt class="descname">getRootTempDir</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.Environment.getRootTempDir" title="Permalink to this definition">¶</a></dt>
<dd>Return a directory for writing temporary files. This does not create a new directory for each use, but either uses the user-set preference or gets the system-provided directory (with a music21 subdirectory, if possible).</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.getTempFile">
<tt class="descname">getTempFile</tt><big>(</big><em>suffix=</em><big>)</big><a class="headerlink" href="#music21.environment.Environment.getTempFile" title="Permalink to this definition">¶</a></dt>
<dd>Return a file path to a temporary file with the specified suffix (file extension).</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.Environment.keys" title="Permalink to this definition">¶</a></dt>
<dd>No documentation.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.launch">
<tt class="descname">launch</tt><big>(</big><em>fmt</em>, <em>fp</em>, <em>options=</em>, <em>app=None</em><big>)</big><a class="headerlink" href="#music21.environment.Environment.launch" title="Permalink to this definition">¶</a></dt>
<dd>Opens a file with an either default or user-specified applications.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.loadDefaults">
<tt class="descname">loadDefaults</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.Environment.loadDefaults" title="Permalink to this definition">¶</a></dt>
<dd>Load defaults. All keys are derived from these defaults.</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.printDebug">
<tt class="descname">printDebug</tt><big>(</big><em>msg</em>, <em>statusLevel=1</em>, <em>format=None</em><big>)</big><a class="headerlink" href="#music21.environment.Environment.printDebug" title="Permalink to this definition">¶</a></dt>
<dd>Format one or more data elements into string, and print it to stderr. The first arg can be a list of string; lists are concatenated with common.formatStr().</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.restoreDefaults">
<tt class="descname">restoreDefaults</tt><big>(</big><big>)</big><a class="headerlink" href="#music21.environment.Environment.restoreDefaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore only defaults for all parameters. Useful for testing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">music21</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;debug&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">restoreDefaults</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;debug&#39;</span><span class="p">]</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.environment.Environment.warn">
<tt class="descname">warn</tt><big>(</big><em>msg</em>, <em>header=None</em><big>)</big><a class="headerlink" href="#music21.environment.Environment.warn" title="Permalink to this definition">¶</a></dt>
<dd>To print a warning to the user, send a list of strings to this method.</dd></dl>

</blockquote>
</dd></dl>

</div>
<div class="section" id="preference">
<h2>Preference<a class="headerlink" href="#preference" title="Permalink to this headline">¶</a></h2>
<p>Inherits from: <a title="music21.xmlnode.XMLNode" class="reference external" href="moduleXmlnode.html#music21.xmlnode.XMLNode"><tt class="xref docutils literal"><span class="pre">XMLNode</span></tt></a></p>
<dl class="class">
<dt id="music21.environment.Preference">
<em class="property">
class </em><tt class="descclassname">music21.environment.</tt><tt class="descname">Preference</tt><a class="headerlink" href="#music21.environment.Preference" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Preference</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<p>Inherits from: <a title="music21.xmlnode.XMLNodeList" class="reference external" href="moduleXmlnode.html#music21.xmlnode.XMLNodeList"><tt class="xref docutils literal"><span class="pre">XMLNodeList</span></tt></a>, <a title="music21.xmlnode.XMLNode" class="reference external" href="moduleXmlnode.html#music21.xmlnode.XMLNode"><tt class="xref docutils literal"><span class="pre">XMLNode</span></tt></a></p>
<dl class="class">
<dt id="music21.environment.Settings">
<em class="property">
class </em><tt class="descclassname">music21.environment.</tt><tt class="descname">Settings</tt><a class="headerlink" href="#music21.environment.Settings" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleExpressions.html" title="music21.expressions"
             >next</a> |</li>
        <li class="right" >
          <a href="moduleEditorial.html" title="music21.editorial"
             >previous</a> |</li>
        <li><a href="contents.html">music21</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009-2011 The music21 Project.
      Last updated on Jul 29, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>