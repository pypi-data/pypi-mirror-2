<div id="rsvp-register"
     tal:condition="view/isAvailable"
     i18n:domain="collective.salesforce.rsvp">

    <h2 i18n:translate="register">
        <a name="rsvp-register">Register</a>
    </h2>

    <div tal:condition="python: not view.isWaitlistable and not view.isUnderCapacity"
         class="portalMessage info"
         i18n:translate="message_registration_full">
        Sorry, registration is full for this event.
    </div>

    <div tal:condition="python: view.isCompleted and view.isUnderCapacity"
        class="portalMessage info"
        i18n:translate="message_registration_received">
        We've received your registration.
    </div>
    
    <div class="portalMessage info"
         tal:condition="python: view.isWaitlistable and view.isCompleted and not view.isUnderCapacity"
         i18n:translate="message_registration_waitlisted">
        We've received your registration.  You have been added to the waitlist.
    </div>
    
    <tal:form
        tal:condition="python: not view.isCompleted and view.isUnderCapacity"
        tal:replace="structure view/render_form"/>

    <tal:waitlisted_form
        tal:condition="python: view.isWaitlistable and not view.isCompleted and not view.isUnderCapacity">
        <div class="portalMessage info">
            <p i18n:translate="message_registration_full">Registration is full for this event.  You can still be added to the waitlist by filling out the information below.  You'll be contacted in the event of cancellations.</p>
        </div>
    
        <tal:form tal:replace="structure view/render_form"/>
    </tal:waitlisted_form>

</div>