#! /usr/bin/perl
##
## A code check script that summarizes errors and warnings for
## subversion externals.
##

if (! @ARGV) {
   print "external_sumary <logfile> [--aux=<repos>,...,<repos>] <svn-repository> [<svn-repository> ...]\n";
   exit(1);
}

#
# Run the svn_external_summary tool on the SVN repositories
#
if (substr($ARGV[1],0,6) ne "--aux=") {
   $cmd = "svn_external_summary alerts ";
   $i = 1;
} else {
   $cmd = "svn_external_summary " . $ARGV[1] . " alerts ";
   $i = 2;
}
while ($i <= $#ARGV) {
  $cmd = $cmd . " " . $ARGV[$i];
  $i = $i + 1;
  }

#print "CMD $cmd\n";
`$cmd > $ARGV[0]`;
$tmp = `cat $ARGV[0]`;
print "\n";
print "$tmp";
print "\n";
