<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_content"
     tal:define="errors python:request.get('errors', {});
                Batch python:modules['Products.CMFPlone'].Batch;
                b_start request/b_start | python:0;
                b_size python:20;
                portal_roles here/getGlobalPortalRoles;">

      <div class="documentEditable">

    <!-- simulating views on the groups/user pages until we have real objects. -->
    <ul class="contentViews">
      <li>
            <a href=""
               tal:attributes="href string:$here_url/prefs_deleg_groups_overview"
               i18n:domain="collective.groupdelegation"
               i18n:translate="">My groups</a>
      </li>
    </ul>

    <div class="contentActions">
      &nbsp;
    </div>

        <div class="documentContent">
        <a name="documentContent"></a>

      <div metal:use-macro="here/global_statusmessage/macros/portal_message">
        Portal status message
      </div>

      <div id="content">
        <h1 i18n:domain="collective.groupdelegation"
            i18n:translate="heading_my_groups_to_manage">Manage my groups</h1>


        <p i18n:translate="description_groups_management"
           class="discreet">
          Groups are logical collections of users, such as
          departments and business units. Groups are not directly
          related to permissions on a global level, you normally
          use Roles for that - and let certain Groups have a
          particular role.
        </p>

        <form action=""
              name="groups_add"
              method="post"
              tal:attributes="action template/getId"
              tal:define="searchstring request/searchstring | nothing;
                          groups python:here.get_delegated_groups();
                          batch python:Batch(groups, b_size, int(b_start), orphan=1)">

            <input type="hidden" name="form.submitted" value="1" />

            <input type="hidden" value="b_start" name="b_start"
                 tal:attributes="value b_start"/>

            <table class="listing" summary="Select roles for each group" i18n:attributes="summary summary_roles_for_groups;">
                <tal:block tal:condition="groups">
                    <tr>
                        <th i18n:translate="listingheader_group_name">Group name</th>
                        <th i18n:translate="listingheader_group_description">Group description</th>
                    </tr>
                    <tr>
                    </tr>
                </tal:block>


                <tal:block repeat="this_group batch">
                    <tr tal:define="oddrow repeat/this_group/odd"
                        tal:attributes="class python:test(oddrow,'odd','even')">

                    <tal:block define="roles python:['this']">

                    <td>
                        <input type="hidden" name="" tal:attributes="name string:group_${this_group/getGroupName}:list" value=""/>
                        <a href="#"
                           tal:attributes="href python:here_url+'/prefs_deleg_group_members?'+ztu.make_query(groupname=this_group.getGroupName());
                                           title python:this_group.getProperty('description','')">

                            <tal:block replace="structure portal/group.gif"/>&nbsp;
                            <tal:group tal:replace="this_group/getGroupTitleOrName|this_group/getGroupName" />
                        </a>

                    </td>
                    <td tal:content="python:this_group.getProperty('description', '')">
                    </td>

                    </tal:block>
                </tr>
                </tal:block>

            <tal:block tal:condition="not:batch">
                <tr>
                    <td i18n:translate="text_nomatches" style="text-align:center;">No matches</td>
                </tr>
            </tal:block>
            </table>

          <div metal:use-macro="here/batch_macros/macros/navigation" />

        </form>
    </div>
</div>

</div>

</div>

</body>
</html>

