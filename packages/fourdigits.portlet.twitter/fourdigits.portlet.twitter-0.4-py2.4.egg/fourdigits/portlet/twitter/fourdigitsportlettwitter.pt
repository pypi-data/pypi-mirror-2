<dl class="portlet portletTwitterPortlet"
  i18n:domain="fourdigits.portlet.twitter"
  tal:define="tweets view/twittermessages|nothing">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <tal:block replace="view/title" />
        <span class="portletTopRight"></span>
    </dt>

    <tal:block tal:condition="tweets">
        <tal:tweets tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime"
                    tal:repeat="obj tweets">
            <dd class="portletItem" tal:define="oddrow repeat/obj/odd"
              tal:attributes="class python:oddrow and 'portletItem even' or 'portletItem odd'">
                <tal:block tal:condition="exists: obj/picture">
                    <div class="tweetPicture">
                        <img tal:attributes="src obj/picture"/>
                    </div>
                </tal:block>

                <div class="tweetText">
                  <span class="tweetUsername">
                    <a href="#"
                       target="_blank"
                       tal:attributes="href obj/author_url"
                       tal:content="obj/username">User</a>
                  </span>
                  <span class="tweetSeparator">:</span>
                  <span class="tweetBody"
                        tal:content="structure python: view.expand(obj.text)">Text</span>
                </div>

                <span class="portletItemDetails tweetDate">
                    <tal:date content="python:toLocalizedTime(obj.created_at, long_format=1)">
                      May 5
                    </tal:date>
                </span>
            </dd>
        </tal:tweets>
    </tal:block>
</dl>
