***************
*** 34,55 ****
          #TODO - get better way of discovering the path to the video file
          path = obj.absolute_url_path().replace('/Zope2/','/') # in case of ftp upload remove the /Zope2 path prefix
          if config.plonesite_address:
              plonesite = urlparse(config.plonesite_address)
          else:
              plonesite = urlparse(obj.absolute_url())
-         url_format = "%s://%s:%s@%s%s/@@streaming_RPC"
  
          cb_url = url_format % ( plonesite[0], #protocol
                                  config.plonesite_login,
-                                                config.plonesite_password,
-                                                plonesite[1], #netloc
                                  urllib.quote(path)) #path (for this video)
  
-         transcodeInput=dict(path = ( plonesite[0] + "://" + \
-                                      plonesite[1] + path + \
                                       '/download/video_file/' + \
                                       obj.video_file.getFilename().replace(' ','+') ),
-                             type=obj.video_file.getContentType())
  
          trans = transaction.get()
          for transcodeProfile in transcodeProfiles:
--- 35,70 ----
          #TODO - get better way of discovering the path to the video file
          path = obj.absolute_url_path().replace('/Zope2/','/') # in case of ftp upload remove the /Zope2 path prefix
          if config.plonesite_address:
+             print 'transcoding.py_1 config.plonesite_address', config.plonesite_address
              plonesite = urlparse(config.plonesite_address)
          else:
              plonesite = urlparse(obj.absolute_url())
+ 
+         if config.plonesite_instancename:
+             instance_name = '/' + config.plonesite_instancename
+         else:
+             instance_name = ''
+ 
+         print 'transcoding.py_2 config.plonesite_instancename', config.plonesite_instancename
+         print 'transcoding.py_3 instance_name', instance_name
+ 
+         url_format = "%s://%s:%s@%s%s%s/@@streaming_RPC"
  
          cb_url = url_format % ( plonesite[0], #protocol
                                  config.plonesite_login,
+                                 config.plonesite_password,
+                                 plonesite[1], #netloc
+                                 instance_name,
                                  urllib.quote(path)) #path (for this video)
  
+         transcodeInput=dict(path = ( plonesite[0]  + \
+                                      "://"         + \
+                                      plonesite[1]  + \
+                                      instance_name + \
+                                      path          + \
                                       '/download/video_file/' + \
                                       obj.video_file.getFilename().replace(' ','+') ),
+                                      type=obj.video_file.getContentType())
  
          trans = transaction.get()
          for transcodeProfile in transcodeProfiles:
