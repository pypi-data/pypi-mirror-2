#!/usr/bin/env python

import sys
import gtk
import pygtk
import gnomeapplet
import workcycle

pygtk.require('2.0')

def applet_factory(applet, iid):
    workcycle.WorkcycleApplet(applet, iid)
    return True
    
def run_panel():
    gnomeapplet.bonobo_factory(
        "OAFIID:GNOME_WorkcycleApplet_Factory",
        workcycle.WorkcycleApplet.__gtype__,
        "Workcycle Applet",
        "0",
        applet_factory)
    
def run_window():
    main_window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    main_window.set_title("")
    main_window.connect("destroy", gtk.main_quit)
    applet = gnomeapplet.Applet()
    applet_factory(applet, None)
    applet.reparent(main_window)
    main_window.show_all()
    gtk.main()
    sys.exit()
    
   

if __name__ == '__main__':
    if len(sys.argv) > 1 and sys.argv[1] == '-d':
        run_window()
    else:
        run_panel()
