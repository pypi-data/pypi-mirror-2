<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<div metal:fill-slot="main">
    <tal:main-macro metal:define-macro="main" 
         tal:define="kssClassesView context/@@kss_field_decorator_view;
                     getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                     templateId template/getId;
		     here_url context/@@plone_context_state/object_url;">

        <div tal:replace="structure provider:plone.abovecontenttitle" />

        <div class="vevent">
      <div class="pageWrapper">
        <h1 class="documentFirstHeading summary"> 
            <metal:field use-macro="python:here.widget('title', mode='view')">
            Title
            </metal:field>
        </h1>

	<p class="documentDescription">
            <metal:field use-macro="python:here.widget('description', mode='view')">
            Description
            </metal:field>
        </p>
	
        <div class="eventDetails vcard">
	<span tal:define="
			future python:here.end() > DateTime();
			pec string:pastEventTable;
			fec string:futureEventTable;
			eventclass python:future and fec or pec"
			tal:omit-tag="">
        <div class="eventTable" tal:attributes="class string:${eventclass}"  summary="Event details" i18n:attributes="summary summary_event_details;">
		         <div tal:define="showTime python:here.start().TimeMinutes() != '00:00' and here.end().TimeMinutes() != '00:00'" tal:omit-tag=""> 
			 <tal:differentday tal:condition="python:not here.start().Date() == here.end().Date()">
				<div class="" tal:attributes="class python:future and 'futureEventDateFrom' or 'pastEventDateFrom'">
					<div class="eventDayInfo" tal:content="python:here.start().day()">02</div>
					<div class="eventMonthInfo" tal:content="python:here.start().strftime('%b').capitalize()">Jun</div>
				        <div class="eventYearInfo" tal:content="python:here.start().strftime('%Y').capitalize()">2010</div>
				</div>
				<div class="" tal:attributes="class python:future and 'futureEventDateUntil' or 'pastEventDateUntil'">
					<div class="eventDayInfo" tal:content="python:here.end().day()">02</div>
					<div class="eventMonthInfo" tal:content="python:here.end().strftime('%b').capitalize()">Jun</div>
				        <div class="eventYearInfo" tal:content="python:here.end().strftime('%Y').capitalize()">2010</div>
				</div>
                         </tal:differentday>

                        <tal:sameday tal:condition="python:here.start().Date() == here.end().Date()"
                                     tal:define="ampm python:site_properties.getProperty('localLongTimeFormat').find('%p') >= 0">
				<div class="" tal:attributes="class python:future and 'futureEventDateFrom' or 'pastEventDateFrom'">
                                        <div class="eventDayInfo" tal:content="python:here.start().day()">02</div>
                                        <div class="eventMonthInfo" tal:content="python:here.start().strftime('%b').capitalize()">Jun</div>
				        <div class="eventYearInfo" tal:content="python:here.start().strftime('%Y').capitalize()">2010</div>
				</div>                            
                        </tal:sameday>
			<div class="event_time" tal:condition="showTime">
				<span class="event-hour" tal:content="python:here.start().strftime('%H:%M')">
					10:00
				</span> <span tal:replace="python:portal_state.language() == 'es' and ' a ' or ' to '">to </span>
				<span class="event-hour" tal:content="python:here.end().strftime('%H:%M')">
					11:00
				</span>
			</div>
			</div> <!-- closing showtime definition  -->

                	<div class="location" tal:condition="here/location">
				<span tal:replace="python:portal_state.language() == 'es' and 'local:' or 'location:'">location:</span>
                        	<metal:field use-macro="python:here.widget('location', mode='view')">
                        		Location
                        	</metal:field>
                    	</div>
		<div class="event-buttons" tal:condition="python: future">
	             	<div class="event-addToCal">
				<div class="info">
					<span class="event-button-title">Add event</span><br/>
                        		<a href="#"
                        		   tal:attributes="href string:$here_url/vcs_view"
                        		   title="Download this event in vCal format"
                        		   i18n:attributes="title title_add_to_vcal;">
                        		    <span i18n:translate="label_add_to_vcal">vCal</span></a>, 
                        		<a href="#"
                        		   tal:attributes="href string:$here_url/ics_view"
                        		   title="Download this event in iCal format"
                        		   i18n:attributes="title title_add_to_ical;">
                        		    <span i18n:translate="label_add_to_ical">iCal</span></a>
				</div>
                  	</div>

			<div class="event-contact">
				<div tal:define="contact_email here/contact_email;
                		                 contact_name python:context.contact_name() or None;"
                		    		 tal:condition="python:contact_name or contact_email" class="info">
					<span class="event-button-title">
                		        	<a id="parent-fieldname-contactEmail"
                		        	   tal:condition="contact_email"
                		        	   tal:replace="structure python: here.spamProtect(mailaddress=contact_email, mailname=contact_name, cssclass='email fn')"
          					/>
                		        <span class="fn"
                		              tal:condition="not: contact_email"
                		              tal:content="contact_name" 
					/>
					</span>
					<br />
                			<div tal:condition="here/contact_phone" class="tel">
                			        <metal:field use-macro="python:here.widget('contactPhone', mode='view')">
                			        Phone number
                			        </metal:field>
                			</div>
                		</div>
			</div>
		</div>
        </div>
	</span>	
        </div>
	
      <div tal:replace="structure provider:plone.abovecontentbody" />

	<div class="addthis_toolbox addthis_default_style"
					  tal:attributes="addthis:url here/absolute_url;
						       addthis:title here/title | here/Title;
						       addthis:description here/description">
					  <a class="addthis_button_facebook"></a>
					  <a class="addthis_button_twitter"></a>
					  <a class="addthis_button_stumbleupon"></a>
					  <a class="addthis_button_more"></a>
        </div>
	
        <metal:field use-macro="python:here.widget('text', mode='view')">
        Body text
        </metal:field>

        <p tal:condition="here/event_url|nothing">
            <a class="url"
               href="event_url"
               i18n:translate="event_more_information"
               tal:define="field python:context.getField('eventUrl');"                    
                        id="parent-fieldname-eventUrl"
                        tal:attributes="href here/event_url">
               More information about this event&hellip;</a>
        </p>
        <div class="visualClear"><!-- --></div>
        </div>
	 <span>       
       <div tal:replace="structure provider:plone.belowcontenttitle" />
       </span>
	
        <div tal:replace="structure provider:plone.belowcontentbody" />
        </div>
	<script type="text/javascript">
         var addthis_config = {"data_track_clickback":true};
         //var addthis_share = {templates: { twitter: '{{title}}: {{url}} via @laboral' }}
        </script>
        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=intk"></script>
    </tal:main-macro>
</div>

</body>
</html>
