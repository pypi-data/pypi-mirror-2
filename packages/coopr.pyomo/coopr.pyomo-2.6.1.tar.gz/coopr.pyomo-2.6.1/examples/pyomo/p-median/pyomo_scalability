#! /usr/bin/env python

dir="/home/wehart/src/acro-pico/bin/"
num=9
iters=15

import commands
import re

data1={}
print ""
print "N*M, User Time"
for data in range(1,num):
    total=0.0
    for i in range(0,iters):
        cmd = dir+"timer "+dir+"pyomo --instance-only pmedian.py pmedian.test"+`data`+".dat"
        out = commands.getoutput(cmd)
        out = out.split("\n")[1]
        total += eval(re.split('[ ]+',out)[1])
    print 25*(4**(data-1)),total/(iters-1)
    data1[data]=total/(iters-1)

data2={}
print ""
print "N*M, User Time (Garbage Collection Disabled)"
for data in range(1,num):
    total=0.0
    for i in range(0,iters):
        cmd = dir+"timer "+dir+"pyomo --disable-gc --instance-only pmedian.py pmedian.test"+`data`+".dat"
        out = commands.getoutput(cmd)
        out = out.split("\n")[1]
        total += eval(re.split('[ ]+',out)[1])
    print 25*(4**(data-1)),total/(iters-1)
    data2[data]=total/(iters-1)

print ""
print "N*M,User Time,User Time (Garbage Collection Disabled)"
for data in range(1,num):
    val = 25*(4**(data-1))
    print "%d,%f,%f" % (val, data1[data], data2[data])
