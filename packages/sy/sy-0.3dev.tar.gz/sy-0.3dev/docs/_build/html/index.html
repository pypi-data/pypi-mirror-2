
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sy &mdash; sy v1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="sy v1 documentation" href="#" />
    <link rel="next" title="Files and directories" href="path.html" />
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-18758335-2']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="path.html" title="Files and directories"
             accesskey="N">next</a> |</li>
        <li><a href="#">sy v1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="sy">
<h1>sy<a class="headerlink" href="#sy" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="path.html">Files and directories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="path.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="path.html#module-sy.path">sy.path content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cmd.html">Running commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cmd.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmd.html#module-sy.cmd">sy.cmd content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="prompt.html">Prompt user for information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="prompt.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="prompt.html#module-sy.prompt">sy.prompt content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities &amp; Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#module-sy.util">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html#module-sy.log">Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="net.html">Networking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="net.html#sending-email">Sending email</a></li>
<li class="toctree-l2"><a class="reference internal" href="net.html#downloading-files">Downloading files</a></li>
<li class="toctree-l2"><a class="reference internal" href="net.html#module-sy.net.ip">IP tools - sy.net.ip</a></li>
<li class="toctree-l2"><a class="reference internal" href="net.html#interfaces-sy-net-intf">Interfaces - sy.net.intf</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This library is a set of easy to use modules to help with automation of
system administration tasks:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sy.path</span><span class="o">,</span> <span class="nn">sy.net.intf</span><span class="o">,</span> <span class="nn">sy.net.ip</span><span class="o">,</span> <span class="nn">sy.cmd</span>

<span class="c"># Replace lines in &#39;/etc/hosts&#39; that match nis.*</span>
<span class="n">sy</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">replace_lines</span><span class="p">(</span><span class="s">&#39;/etc/hosts&#39;</span><span class="p">,</span> <span class="s">&#39;nis.*&#39;</span><span class="p">,</span> <span class="s">&#39;10.2.3.1 ldap&#39;</span><span class="p">)</span>
<span class="mi">1</span>

<span class="c"># Fetch information about the interface hme0</span>
<span class="n">hme0</span> <span class="o">=</span> <span class="n">sy</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">intf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;hme0&#39;</span><span class="p">)</span>

<span class="c"># Get the IP of hme0</span>
<span class="n">hme0</span><span class="o">.</span><span class="n">ipaddress</span>
<span class="s">&#39;192.168.2.2&#39;</span>

<span class="c"># Check if hme0 is up</span>
<span class="n">hme0</span><span class="o">.</span><span class="n">is_up</span>
<span class="bp">True</span>

<span class="c"># Find files named &#39;*.pl&#39; but time out after 10 seconds</span>
<span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">sy</span><span class="o">.</span><span class="n">cmd</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="s">&#39;find /mnt -name {}&#39;</span><span class="p">,</span> <span class="s">&#39;*.pl&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c"># Check if port 22 is answering on bart</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">sy</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">ip</span><span class="o">.</span><span class="n">port_is_open</span><span class="p">(</span><span class="s">&#39;bart&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">):</span>
   <span class="n">sy</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&#39;Ssh is down on bart&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The library is heavily inspired by <a class="reference external" href="http://werkzeug.pocoo.org/">Werkzeug</a> which is a great WSGI utility
collection.</p>
</div>
<div class="section" id="developing">
<h2>Developing<a class="headerlink" href="#developing" title="Permalink to this headline">¶</a></h2>
<p>The repository path for <tt class="docutils literal"><span class="pre">sy</span></tt> is located at
<a class="reference external" href="http://github.com/pauldiacon/sy">http://github.com/pauldiacon/sy</a>. Clone with <a class="reference external" href="http://git-scm.com">git</a> by typing:</p>
<div class="highlight-python"><pre>$ git clone http://github.com/pauldiacon/sy.git</pre>
</div>
<p>The requirements for developing are listed in <tt class="docutils literal"><span class="pre">dev-reqs.pip</span></tt> that
can be install with <a class="reference external" href="http://pip.openplans.org/">pip</a> with:</p>
<div class="highlight-python"><pre>$ pip install -r dev-reqs.pip</pre>
</div>
<p>The library currently targets python 2.4.4 - 2.6.</p>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>To run the test suite use <a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/0.11.2/">nose</a>:</p>
<div class="highlight-python"><pre>$ nosetests -a '!host' tests</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">!host</span></tt> parameter tells the suite to not run tests that change the hosts
configuration (like reconfiguring network interfaces).</p>
<p>There currently isn&#8217;t any automated way to run the testsuite on virtual machines.
This feature is greatly needed to be able to test all parts of the library and
to test it on different versions and operating systems.</p>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<p>The documentation is built with <a class="reference external" href="http://sphinx.pocoo.org/">sphinx</a> and is locate under the <tt class="docutils literal"><span class="pre">docs</span></tt> folder.</p>
</div>
</div>
<div class="section" id="todo">
<h2>Todo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition " id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Not tested</p>
</div>
<p class="todo-source">(The <a class="reference internal" href="utilities.html#index-0"><em>original entry</em></a> is located in  utilities.rst, line 54.)</p>
<div class="admonition-todo admonition " id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Create and document log handling</p>
</div>
<p class="todo-source">(The <a class="reference internal" href="utilities.html#index-1"><em>original entry</em></a> is located in  utilities.rst, line 6.)</p>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">sy</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#developing">Developing</a><ul>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo">Todo</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="path.html"
                        title="next chapter">Files and directories</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="path.html" title="Files and directories"
             >next</a> |</li>
        <li><a href="#">sy v1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Paul Diaconescu.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.3.
    </div>
  </body>
</html>