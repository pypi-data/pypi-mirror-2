<div id="workflow-states" class="workflow-list" 
    tal:define="available_states options/available_states;
                available_transitions options/available_transitions">
    
    <a name="fieldsetlegend-states-anchor" class="doc-link">fieldsetlegend-states-anchor</a>
    
    <span class="set-top">
        <a class="dialog-box" rel="#overlay"
            tal:attributes="href python: view.get_url('@@northstar-add-new-state');
                            id string:add-state-box-${view/selected_workflow/id}">
            <form tal:attributes="action string:${context/absolute_url}/@@northstar-add-new-state" method="POST">
                <input type="hidden" name="selected-workflow" tal:attributes="value view/selected_workflow/id" />
                <input type="submit" class="context allowMultiSubmit" name="add-new-state-button-one" value="Add new state" />
            </form>
        </a>
    </span>
    
  
  <tal:states tal:repeat="state available_states" 
    tal:content="structure python: view.workflow_state_template(state=state, available_transitions=available_transitions)" />

    <span class="set-top">
        <a class="dialog-box" rel="#overlay"
            tal:attributes="href python: view.get_url('@@northstar-add-new-state');
                            id string:add-state-box-${view/selected_workflow/id}">
            <form tal:attributes="action string:${context/absolute_url}/@@northstar-add-new-state" method="POST">
                <input type="hidden" name="selected-workflow" tal:attributes="value view/selected_workflow/id" />
                <input type="submit" class="context allowMultiSubmit" name="add-new-state-button-two" value="Add new state" />
            </form>
        </a>
    </span>

</div>
