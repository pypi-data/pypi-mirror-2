<html>
    <head>
        <title>Export objects to filesystem</title>
         <link rel="stylesheet" type="text/css" href="/manage_page_style.css"/>
    </head>
    <body>
        <span tal:replace="structure here/manage_tabs" />

        <div style="padding: 10px;" tal:define="opath python:'/'.join(here.getPhysicalPath())">

        <tal:if condition="exists:request/status_message">
            <div style="border: 2px solid grey;font-weight:bold;padding:4px;margin-bottom:8px;"
                tal:content="structure request/status_message">
            </div>
        </tal:if>

        <tal:if condition="python:request.get('expert', '')=='1' or opath.endswith('/portal_skins/custom') or opath.endswith('portal_view_customizations')">
                Using this tab you can export objects from the current folder to
                the filesystem. This only makes sense for the folders
                <i>custom</i> and <i>portal_view_customization</i> (although pcw
                is not supported currently). It is not
                guaranteed that this works for other folders because it can only
                handle types found under <b>portal_skins/</b> well.
                <br/><br/>
                <form method="GET" action="#" tal:attributes="action request/getURL">
                    Input here the folder you want to export files to (directory
                    will NOT be created if not existing - make sure you have the
                    correct rights and directory exists):
                    <input type="text" name="path" size="80"
                            tal:attributes="value
                            python:'/tmp/%s' % '_'.join(context.getPhysicalPath())"/><br/>
                    <input type="submit" name="action" value="Export!"/>
                </form>
        </tal:if>

        <tal:else condition="python:not (opath.endswith('/portal_skins/custom') or opath.endswith('portal_view_customizations')) and request.get('expert', '')!='1'">
            The current folder does not seem to be a custom folder! If you are
            sure that I'm wrong then click here: 
            <a href="@@customexport?expert=1">Show me the export interface</a>
        </tal:else>
        </div>
    </body>
</html>
