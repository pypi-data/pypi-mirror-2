<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
  <head>
    <metal:script metal:fill-slot="javascript_head_slot">
        <script type="text/javascript"
                tal:attributes="src string:$here_url/slideshow_contents.js">
        </script>
    </metal:script>
  </head>

<body>

<div metal:fill-slot="main">

    <tal:main-macro metal:define-macro="main" 
           tal:define="size python:context.getObjSize(context);
                       content_type context/getMimeType;
                       scale request/size|request/cookies/size|string:preview;
                       force_refresh request/force_refresh|python:False;
                       Iterator python:modules['Products.CMFPlone'].IndexIterator;
                       tabindex python:Iterator();
                      ">

        <div metal:use-macro="context/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <h1 tal:content="context/title_or_id" class="documentFirstHeading">
            Title or id
        </h1>
        
        <small class="discreet" id="image_infos">
            <span i18n:translate="label_size">
            Size:
            </span>
            
            <span tal:condition="size" id="PhotoSize"
                  tal:content="size">
            257 KB
            </span>
    
            <span tal:condition="python:test(size,0,1)" id="PhotoSize"
                  i18n:translate="no_file_uploaded">
              (No file has been uploaded yet)
            </span>
    
            -
            
            <span i18n:translate="label_file_type">
            File type:
            </span>
    
            <span tal:content="python:context.getMimeType()" id="ContentType">
            Content type
            </span>
        </small>

        <div class="documentDescription" id='PhotoDescription'
             tal:content="context/Description">
            description
        </div>

        
        <metal:control metal:use-macro="context/atphoto_macros/macros/control" />
    
        <div id="BatchNavigation">
            <!--tal:if tal:condition="python: context.aq_parent.portal_type=='ATPhotoAlbum'">
                <div metal:use-macro="context/batch_macros/macros/navigation">
                </div>
            </tal:if-->
        </div>

        <div class="row" align="center">
            <div id="PhotoWrapper" style="background-repeat:no-repeat;">
                <img tal:replace="structure python:context.tag(force_refresh=force_refresh,scale=scale)"/>
            </div>
        </div>

        <pre id='Debug' name="Debug"
             tal:content="python:''"
             style="visibility:hidden;">
             Area to show debug messages
        </pre>
        
        <div id="EXIFWrapper"
             tal:define="info_type string:EXIF;
                         values context/getEXIF;"
             tal:attributes="style python:'visibility:%s;;' % test(values,'visible','hidden');">
                <dl class="collapsible collapsedOnLoad"
                    tal:attributes="id info_type;">
                    <dt class="collapsibleHeader" 
                        tal:content="info_type">EXIF</dt>
                    <dd class="collapsibleContent" tal:attributes="id string:${info_type}Header;">
                        <tal:infos metal:use-macro="context/atphoto_infos/macros/infos">
                        </tal:infos>
                    </dd>
                </dl>
        </div>

        <div id="IPTCWrapper"
             tal:define="info_type string:IPTC;
                         values context/getIPTC;"
             tal:attributes="style python:'visibility:%s;;' % test(values,'visible','hidden');">
                <dl class="collapsible collapsedOnLoad"
                    tal:attributes="id info_type;">
                    <dt class="collapsibleHeader" 
                        tal:content="info_type">IPTC</dt>
                    <dd class="collapsibleContent" tal:attributes="id string:${info_type}Header;">
                        <tal:infos metal:use-macro="context/atphoto_infos/macros/infos">
                        </tal:infos>
                    </dd>
                </dl>
        </div>

        <div metal:use-macro="context/document_byline/macros/byline">
           Get the byline - contains details about author and modification date.
        </div>

</tal:main-macro>
</div>


</body>

</html>
