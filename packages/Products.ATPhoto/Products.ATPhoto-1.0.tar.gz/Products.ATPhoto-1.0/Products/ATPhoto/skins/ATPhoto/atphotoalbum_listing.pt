<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
      <head>
      </head>
<body>
<div metal:fill-slot="main"
         tal:define="standalone python:1;
                     contentFilter python: {'meta_type':['ATPhoto','ATPhotoAlbum']};
                     b_size b_size|request/b_size|python:15;
                     view_title view_title|request/view_title|string:;
                     contentsMethod nocall:here/getFolderContents;
                     batch batch|python:contentsMethod(contentFilter,batch=True, b_size=b_size);
                     full_view full_view|request/full_view|python:True;">
    
    <div metal:use-macro="here/document_actions/macros/document_actions">
        Document actions (print, sendto etc)
    </div>

    <h1 tal:content="object_title" class="documentFirstHeading">
      Title or id
    </h1>

    <tal:full_view condition="full_view">

        <a href=""
           class="link-parent"
           tal:define="parent_url python:here.navigationParent(here, fallThroughDefaultPage = False, checkPermissions = ['List folder contents'])"
           tal:condition="parent_url"
           tal:attributes="href string:${parent_url}/folder_contents"
           i18n:translate="go_to_parent_url">
            Up one level
        </a>

        <p tal:content="here/Description">
            Description
        </p>
    </tal:full_view>

    <div tal:condition="batch">

        <table class="listing">
            <thead>
                <th>&nbsp;</th>
                <th i18n:translate="listingheader_title">title</th>
                <th i18n:translate="listingheader_description">description</th>
            </thead>
            <tbody>
                <tal:loop tal:repeat="item batch">
                    <tr tal:define="photo item/getObject;
                                    oddrow repeat/item/odd;
                                    title  item/pretty_title_or_id;"
                        tal:attributes="class python: test(oddrow,'odd','even');">
                        <td>
                            <a href=""
                               tal:attributes="href string:${photo/absolute_url}/view;
                                               title title;"
                               tal:content="structure python:photo.tag(scale='tile')">image</a>
                        </td>
                        <td>
                            <a href=""
                               tal:attributes="href string:${photo/absolute_url}/view;
                                               title title;">
                                <b tal:condition="python: item.meta_type == 'ATPhotoAlbum'"
                                   tal:content="title">
                                   album title
                               </b>
                                <span tal:condition="python: item.meta_type == 'ATPhoto'"
                                   tal:content="title">
                                   photo title
                               </span>
                           </a>
                        </td>
                        <td tal:content="item/Description">
                            Description
                        </td>
                   </tr>
                </tal:loop>
            </tbody>
        </table>

        <div metal:use-macro="here/batch_macros/macros/navigation" />
    </div>
</div>
</body>
</html>


