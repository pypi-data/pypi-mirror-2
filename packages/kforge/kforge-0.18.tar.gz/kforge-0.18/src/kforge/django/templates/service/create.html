{% extends "service/master.html"%}

{% block title %}Create new service{% endblock %}

{% block content %}
<h2>Create new service</h2>
<p>
Please make sure fields marked with a <strong class="fieldset">*</strong> are filled in.
</p>

{% if form.has_errors %}
<div class="form-errors">
  <h3>Sorry, the following problems prevented your service from being created.</h3>
  <ul>
  {% for errorMessage in form.getErrorMessages %}
      <li>{{ errorMessage }}</li>
  {% endfor %}
  </ul>
</div>
{% endif %}

<form action="." method="post">
  <fieldset>
    <legend>
      New service
    </legend>

    <label for="id_plugin">Type of service <strong>*</strong></label><br />
    {{ form.plugin }}
    <p class="desc">The service type determines what kind of application will be made available at the service url. So, for example, if you choose a svn (subversion) type you will get a subversion repository, if you choose moin you will get a moinmoin wiki. 
    </p>

    <label for="id_name">Service name <strong>*</strong></label><br />
    {{ form.name }}
    <p class="desc">The name has several restrictions because it is used to locate your service (in links). The service name:</p>
    <ul class="desc">
      <li>cannot match the name of any other service in your project</li>
      <li>must be between 1 and 16 characters in length</li>
      <li>can only contain alphanumeric, underscore and hyphen characters</li>
    </ul>

  </fieldset>

{% if pluginFields %}
  <fieldset>
    <legend>
      Service configuration
    </legend>
    {% for pluginField in form.plugin_fields %}
        {{ pluginField }} <br/>
    {% endfor %}
  </fieldset>
{% endif %}

  <p>
    Please check the form and then <input type="submit" name="edit-submission" value="create the service &raquo;" />
  </p>
<p>
&nbsp;
</p>

  <fieldset>
    <legend>
      Notes
    </legend>
    <p class="desc">See the section on services in the <a href="http://www.kforgeproject.com/doc/">documentation</a> for more information about project services.</p>
    <p class="desc">Note that the type of service cannot be changed after the service has been created. If you would like a different type of service, simply create another service of a different type, and then delete the unwanted service. For more information about the different types of service see the <a href="http://www.kforgeproject.com/doc/">documentation</a> or contact the {{ systemServiceName }} service administrator. </p>
    {% if view.canUpdateSystem %}
    <label>Information for Administrators</label>
    <p class="desc">
    The list of available service types is directly adjusted by enabling and disabling KForge plugins. When enabling a KForge plugin for the first time, please ensure external software applications are installed okay and that KForge is configured accordingly. It's often worth testing newly installed plugins by creating a test service and checking it over.
    </p>
    <p class="desc">
    The 'kforge-admin plugin' command can be used to list all the available plugins, and to enable and disable individual plugins. Individual help messages for each plugin are available, containing details of external software dependencies and KForge configuration adjustments. 
    </p>
    <p class="desc">
    For example, to list all the available plugins on your system:
    </p>
    <p class="desc"><code>
    $ kforge-admin plugin list
    </code></p>
    <p class="desc">
    For example, to read about how to use Subversion in KForge:
    </p>
    <p class="desc"><code>
    $ kforge-admin plugin doc svn | less
    </code></p>
    <p class="desc">
    For example, to enable the Subversion plugin:
    </p>
    <p class="desc"><code>
    $ kforge-admin plugin enable svn
    </code></p>
    <p class="desc">
    For example, to disable the Subversion plugin:
    </p>
    <p class="desc"><code>
    $ kforge-admin plugin disable svn
    </code></p>
    <p class="desc">
    Substitute 'svn' with any of the available plugins on your system (for example 'trac'). If in doubt or in trouble, please seek help on <a href="http://lists.okfn.org/mailman/listinfo/kforge-user">the kforge-user mailing list</a>. 

    </p>
    {% endif %}
  </fieldset>
</form>
{% endblock %}
