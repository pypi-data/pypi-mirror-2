{% extends "member/master.html"%}

{% block title %}{{ project.getLabelValue|escape }} - Members - List{% endblock %}

{% block content %}
  <h2>Project Members</h2>
  <p>
    Here are all the members of <strong>{{ project.getLabelValue|escape }}</strong>.
  </p>
  <table>
    <tr>
      <th>Full name</th>
      <th>Username</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
    {% for member in project.members %}
    <tr>
      <td>{{ member.person.fullname|escape }}</td>
      <td><a href="{{uriPrefix}}/person/{{ member.person.name }}/">{{ member.person.name }}</a></td>
      <td>{{ member.role.name|escape }}</td>
      <td>
        {% if view.canUpdateMember %}
        {% if view.canDeleteMember %}
        <a href="{{uriPrefix}}/project/{{ project.name }}/members/{{ member.person.name }}/delete/" title="Remove this member ({{ member.person.name }})"><img height="20" width="20" src="{{ kforge_media_url }}/images/icon-delete.png" alt="Remove" /></a>
        &nbsp;
        {% endif %}
        <a href="{{uriPrefix}}/project/{{ project.name }}/members/{{ member.person.name }}/edit/" title="Edit this member ({{ member.person.name }})"><img height="20" width="20" src="{{ kforge_media_url }}/images/icon-edit.png" alt="Edit" /></a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
  {% if view.canCreateMember %}
    {% if project.pending_members %}
  <p>
    There are {{ project.pending_members.count }} pending members of <strong>{{ project.getLabelValue|escape }}</strong>.
  </p>
  <table>
    <tr>
      <th>Full name</th>
      <th>Username</th>
      <th>Actions</th>
    </tr>
      {% for member in project.pending_members %}
    <tr>
      <td>{{ member.person.fullname|escape }}</td>
      <td>
        <a href="{{uriPrefix}}/person/{{ member.person.name }}/">{{ member.person.name }}</a></td>
      <td>
        <a href="{{uriPrefix}}/project/{{ project.name }}/members/{{ member.person.name }}/reject/" title="Reject this member ({{ member.person.name }})"><img height="20" width="20" src="{{ kforge_media_url }}/images/icon-delete.png" alt="Remove" /></a>
        &nbsp;
        <a href="{{uriPrefix}}/project/{{ project.name }}/members/{{ member.person.name }}/approve/" title="Approve this member ({{ member.person.name }})"><img height="20" width="20" src="{{ kforge_media_url }}/images/icon-edit.png" alt="Edit" /></a>
      </td>
    </tr>
      {% endfor %}
  </table>
    {% endif %}
  <h3>Create new member</h3>
  <form action="{{uriPrefix}}/project/{{ project.name }}/members/create/" method="post">
    <p>
      <input type='submit' value='Create new member &raquo;'/>
    </p>
  </form>
  {% endif %}

{% endblock %}

