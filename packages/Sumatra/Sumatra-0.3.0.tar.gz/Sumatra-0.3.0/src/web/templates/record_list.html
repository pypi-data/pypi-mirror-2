{% extends "base.html" %}
{% load filters %}

{% block title %}{{project_name}}: List of records{% if tag %} tagged with {{tag}}{% endif %}{% endblock %}

{% block header %}<h1>{{project_name}}: List of records{% if tag %} tagged with <em>{{tag}}</em>{% endif %}</h1>{% endblock %}

{% block content %}

<p><a href="/">Return to list of projects</a></p>
{% if tag %}
<p><a href="/{{project_name}}/">Return to full record list</a></p>
<p><a href="/{{project_name}}/tag/">Return to list of tags</a></p>
{% endif %}

{% if object_list %}
    <form method="POST" action="/{{project_name}}/delete/">
    <table class="simlist">
        <tr>
            <th rowspan="2"><input type="Submit" value="Delete"/><br/><small>include data&nbsp;</small><input type="checkbox" name="delete_data" value="True"/></th>
            <th rowspan="2">Label</th>
            <th rowspan="2">Reason</th>
            <th rowspan="2">Outcome</th>
            <th rowspan="2">Duration</th>
            <th rowspan="2">Processes</th>
            <th colspan="2">Executable</th>
            <th colspan="4">Script</th>
            <th rowspan="2">Date</th>
            <th rowspan="2">Time</th>
            <th rowspan="2">Tags</th>
        </tr>
        <tr>
            <th>Name</th>
            <th>Version</th>
            <th>Repository</th>
            <th>Main file</th>
            <th>Version</th>
            <th>Arguments</th>
        </tr>
        {% for record in object_list %}
        <tr class="{% cycle odd,even %}">
            <td><input type="checkbox" name="delete" value="{{record.label}}"/></td>
            <td><a href="/{{project_name}}/{{record.label|escapeslash}}/">{{record.label}}</a></td>
            <td>{{record.reason}}</td>
            <td>{{record.outcome}}</td>
            <td>{{record.duration|floatformat:2}}&nbsp;s</td>
            <td>{{record.launch_mode.get_parameters.n|default:"1"}}</td>
            <td>{{record.executable.name}}</td>
            <td>{{record.executable.version}}</td>
            <td>{{record.repository.url}}</td>
            <td>{{record.main_file}}</td>
            <td>{{record.version}}{% if record.diff %}*{% endif %}</td>
            <td>{{record.script_arguments}}</td>
            <td>{{record.timestamp|date:"d/m/Y"}}</td>
            <td>{{record.timestamp|date:"H:i:s"}}</td>
            {% if tag %}
            <td>{{record.tags|link:"../%s/"}}</td>
            {% else %}
            <td>{{record.tags|link:"tag/%s/"}}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
    </form>
{% else %}
    <p class="warning"><strong>No records found</strong></p>
{% endif %}

{% endblock %}
