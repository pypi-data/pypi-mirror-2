<dl class="portlet portletTocPortlet"
    i18n:domain="collective.portlet.toc" tal:condition="python:context.restrictedTraverse('@@plone_context_state').is_view_template()">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        Contents
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd full-view" tal:define="getTableContents python:getattr(context, 'getTableContents', None)">
 	<div class="title" tal:condition="getTableContents">About</div>
	<div tal:replace="structure provider:collective.portlet.toc.full_view_manager" />

	<tal:anchors condition="view/data/scan_anchors">
	<ul tal:define="types view/getOrderedTypes" tal:condition="python:len(context.getRelatedItems()) > 0 or len(context.getBRefs()) > 0">
                <span tal:repeat="type types" tal:omit-tag="">
                	<li tal:define="items python:view.getRelatedItemsByType(type)"  tal:condition="python:len(items) > 0 and type != 'Image'">
				<a href="#" tal:attributes="href python:(context.absolute_url())+'#' + view.getTypeName(type)">
                                        <span tal:replace="python:view.getTypeName(type)">TYPE</span>
                                </a>
                        </li>
		</span>
        </ul>
	</tal:anchors>
	<div class="visualClear"></div>
    </dd>

    <dd class="portletFooter">
        <span class="portletBottomLeft"></span>
		<div class="visualClear"></div>
        <span class="portletBottomRight"></span>
    </dd>

</dl>
