{% extends "sewer/base.html" %}

{% block title %}Repositories{% endblock %}

{% block head %}
<script type="text/javascript">
$(function() {
  $("#repo-prefix").click(function(e) {
    $.ajax({
      url: "{% url sewer:json-admin-groups %}",
      success: show_prefix_dialog
    });
  });
});
</script>
{% endblock %}

{% block content %}

<div id="repo-form">
  <form method="post" action="{% url sewer:repo-add %}">
    {% csrf_token %}
    {% spaceless %}
    <input type="hidden" name="prefix-type" value="user"/>
    <input type="hidden" name="prefix" value="{{ user.username }}"/>
    <span id="repo-prefix" class="monospace">{{ user.username }}/</span>
    <input class="monospace" type="text" name="name"/>
    {% endspaceless %}
    <input type="submit" value="create"/>
<!--      class="ui-widget ui-state-default ui-corner-all"/>-->
  </form>
</div>

<div id="repositories">
{% if repos %}
  Repositories:
  <ul>
    {% for r in repos %}
    <li>
      <a class="repo-name" href="{% url sewer:repo-view r %}">{{ r }}</a> -
      <a href="{% url sewer:repo-admin r %}" class="grate-button-admin">admin</a>
    </li>
    {% endfor %}
  </ul>
{% else %}
  You do not have any repositories. Maybe you should create some.
{% endif %}
</div>

{% endblock %}
